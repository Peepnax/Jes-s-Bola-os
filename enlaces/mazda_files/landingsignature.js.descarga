angular.module("appLanding",[]).controller("ValidationControllerLanding",["$scope","$http",function(e,a){var c=!1;if(e.pattern_email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.pattern_phone=/^([0-9]{7})$|(^[0-9]{10})$/,e.citys_array=[{id:1,name:"Armenia"},{id:2,name:"Barracabermeja"},{id:3,name:"Barranquilla"},{id:4,name:"Bogot\xe1 D.C"},{id:5,name:"Bucaramanga"},{id:6,name:"Cali"},{id:7,name:"Cartagena"},{id:8,name:"C\xfacuta"},{id:9,name:"Ibagu\xe9"},{id:10,name:"Manizales"},{id:11,name:"Medell\xedn"},{id:12,name:"Monter\xeda"},{id:13,name:"Neiva"},{id:14,name:"Pasto"},{id:15,name:"Pereira"},{id:16,name:"Sabaneta"},{id:17,name:"Santa Marta"},{id:18,name:"Sincelejo"},{id:19,name:"Tunja"},{id:21,name:"Valledupar"},{id:22,name:"Villavicencio"},{id:23,name:"Yopal"},{id:24,name:"Ch\xeda"},],e.concecionarios=[{id_city:1,cod_conce:420,cod_suc:2,name:"COLAUTOS S.A ARMENIA"},{id_city:2,cod_conce:270,cod_suc:4,name:"MAYORAUTOS S.A.S BARRANCABERMEJA"},{id_city:3,cod_conce:540,cod_suc:1,name:"JANNA MOTORS S.A"},{id_city:4,cod_conce:330,cod_suc:1,name:"ALCIAUTOS S.A.S CALLE 134"},{id_city:4,cod_conce:330,cod_suc:2,name:"ALCIAUTOS S.A.S. CENTRO MAYOR"},{id_city:4,cod_conce:330,cod_suc:4,name:"ALCIAUTOS S.A.S. CALLE 13"},{id_city:4,cod_conce:330,cod_suc:5,name:"ALCIAUTOS S.A.S. CALLE 96"},{id_city:4,cod_conce:340,cod_suc:1,name:"CASATORO S.A CALLE 127"},{id_city:4,cod_conce:340,cod_suc:2,name:"CASATORO S.A. CRA 30"},{id_city:4,cod_conce:350,cod_suc:1,name:"MADIAUTOS S.A.S"},{id_city:4,cod_conce:360,cod_suc:1,name:"MOTORES DEL VALLE MOTOVALLE S.A.S."},{id_city:4,cod_conce:370,cod_suc:1,name:"JORGE CORTES MORA Y CIA S.A.S AV. SUBA"},{id_city:4,cod_conce:375,cod_suc:1,name:"KYOTO MOTORS"},{id_city:4,cod_conce:370,cod_suc:2,name:"JORGE CORTES MORA Y CIA S.A.S CRA 7"},{id_city:5,cod_conce:270,cod_suc:1,name:"MAYORAUTOS S.A.S"},{id_city:6,cod_conce:610,cod_suc:1,name:"MAZAUTOS"},{id_city:6,cod_conce:620,cod_suc:1,name:"MAZKO CRA 100 S.A.S"},{id_city:6,cod_conce:620,cod_suc:2,name:"MAZKO S.A. SUCURSAL NORTE"},{id_city:7,cod_conce:300,cod_suc:2,name:"AUTOVARDI CARTAGENA"},{id_city:24,cod_conce:300,cod_suc:1,name:"AUTOVARDI S.A.S"},{id_city:8,cod_conce:270,cod_suc:2,name:"MAYORAUTOS S.A.S CUCUTA"},{id_city:9,cod_conce:340,cod_suc:6,name:"CASATORO IBAGUE"},{id_city:10,cod_conce:420,cod_suc:1,name:"COLAUTOS S.A."},{id_city:11,cod_conce:130,cod_suc:1,name:"AUTOMONTA\xd1A S.A."},{id_city:11,cod_conce:140,cod_suc:1,name:"SOMERAUTO S.A."},{id_city:11,cod_conce:150,cod_suc:3,name:"VEHICULOS DEL CAMINO LLANO GRANDE"},{id_city:11,cod_conce:150,cod_suc:1,name:"VEHICULOS DEL CAMINO S.A.S AV. POBLADO"},{id_city:12,cod_conce:300,cod_suc:4,name:"AUTOVARDI MONTERIA"},{id_city:13,cod_conce:340,cod_suc:5,name:"CASA TORO NEIVA"},{id_city:14,cod_conce:710,cod_suc:1,name:"AUTOMOTRIZ DEL SUR S.A.S"},{id_city:15,cod_conce:610,cod_suc:4,name:"MAZAUTOS"},{id_city:16,cod_conce:130,cod_suc:2,name:"AUTOMONTA\xd1A S.A MAYORCA"},{id_city:17,cod_conce:300,cod_suc:3,name:"AUTOVARDI SANTA MARTA"},{id_city:18,cod_conce:300,cod_suc:5,name:"AUTOVARDI SINCELEJO"},{id_city:19,cod_conce:720,cod_suc:1,name:"CARRAZOS S.A.S"},{id_city:21,cod_conce:270,cod_suc:3,name:"MAYORAUTOS S.A.S VALLEDUPAR"},{id_city:22,cod_conce:340,cod_suc:3,name:"CASATORO S.A. V/CIO"},{id_city:23,cod_conce:330,cod_suc:3,name:"ALCIAUTOS S.A.S. YOPAL"}],window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection||!1,window.RTCPeerConnection){c=[];var t=new RTCPeerConnection({iceServers:[]}),n=function(){};t.createDataChannel(""),t.createOffer(t.setLocalDescription.bind(t),n),t.onicecandidate=function(e){if(e&&e.candidate&&e.candidate.candidate){var a=e.candidate.candidate.split("\n");c.push(a[0].split(" ")[4])}}}e.minCapacityNumber=5,e.maxCapacitynumber=10,e.changeTypeDoc=function(){e.data.legalDocumentNumber="",e.messValidate="","CC"==e.data.legalDocument&&(e.minCapacityNumber=5,e.maxCapacitynumber=10),"CE"==e.data.legalDocument&&(e.minCapacityNumber=8,e.maxCapacitynumber=10),"CD"==e.data.legalDocument&&(e.minCapacityNumber=6,e.maxCapacitynumber=10),"PD"==e.data.legalDocument&&(e.minCapacityNumber=8,e.maxCapacitynumber=10),"PP"==e.data.legalDocument&&(e.minCapacityNumber=8,e.maxCapacitynumber=10)},e.messValidate="",e.messValidateTel="",e.messValidatePlate="",e.messValidateDate="",e.validationMess=function(a,c,t,n,i){return"doc"==n?(!0==a&&!0==c&&!0!=t.minlength&&(e.messValidate="Ingresa un n\xfamero de documento"),!0==a&&!0==c&&!0==t.minlength&&(e.messValidate="Debe contener minimo "+i+" caracteres"),!0==a&&!1==c&&(e.messValidate=""),e.messValidate):"tel"==n?(!0==a&&!0==c&&!0!=t.minlength&&(e.messValidateTel="Ingresa un n\xfamero de tel\xe9fono"),!0==a&&!0==c&&!0==t.minlength&&(e.messValidateTel="Debe contener m\xednimo 7 d\xedgitos en caso de t\xe9lefono fijo, celular 10 d\xedgitos"),!0==a&&!0==c&&!0==t.pattern&&(e.messValidateTel="Debe contener exactamente 7 o 10 d\xedgitos"),!0==a&&!1==c&&(e.messValidateTel=""),e.messValidateTel):"plate"==n?(!0==a&&!0==c&&!0==t.required&&(e.messValidatePlate="Ingresa una placa."),!0==a&&!0==c&&!0==t.pattern&&(e.messValidatePlate="Formato de placa incorrecto: Ejemplo  ABC123"),!0==a&&!1==c&&(e.messValidatePlate=""),e.messValidatePlate):"fech"==n?(!0==a&&!0==c&&!0==t.required&&(e.messValidateDate="Ingresa una fecha."),!0==a&&!0==c&&!0==t.min&&(e.messValidateDate="Por favor seleccione una fecha posterior"),!0==a&&!1==c&&(e.messValidateDate=""),e.messValidateDate):void 0},e.redirectResponse=function(e){var a="";switch(e){case"1":a="/vehiculos/linea-signature/mazda-6-signature/gracias-por-tu-registro/";break;case"4":a="/vehiculos/linea-signature/Mazda-CX-5-Signature/gracias-por-tu-registro/";break;case"3":a="/vehiculos/linea-signature/Mazda-CX-9-Signature/gracias-por-tu-registro/"}return window.location.href=a};var i,d=new Date,o=d.getFullYear(),r=d.getMonth(),s=r+"/"+d.getDate()+"/"+o+" "+d.toLocaleTimeString("en-US",{hour12:!0});s=s.replace(".",""),e.showGif=!1,e.serviceForm=function(){e.showGif=!0,void 0!=e.InputpolicyAcceptance?e.data.policyAcceptance="0":e.data.policyAcceptance="1",void 0!=e.InputtestDriveAcceptance?e.data.testDriveAcceptance="0":e.data.testDriveAcceptance="1";var a=e.citys_array.filter(function(a){return a.id==e.city_selected})[0];e.data.user="3Ct0sP561020Rp",e.data.password="{GE!8%24~>v/8V5",e.data.city=a.name,e.data.dealerCode=e.conce_selected.cod_conce,e.data.dealerBranchCode=e.conce_selected.cod_suc,e.data.dateCreated=s,e.data.hostUrl="landingSignature",e.data.dateEmailSend=s,e.data.token=Math.random().toString(12).substring(2,23)+Math.random().toString(12).substring(2,23),e.data.ip=c[0];var t=$.param(e.data);e.data.estadoSend="";var n={EMAIL:e.data.privateEmail,NOMBRE:e.data.firstName,APELLIDO:e.data.surname,TELEFONO:e.data.privateTelephone,FECHAREG:e.data.dateCreated,MODELO:e.data.modelsOfInterest,TDOCUMENTO:e.data.legalDocument,DOCUMENTO:e.data.legalDocumentNumber,IDFORM:e.data.hostUrl,CIUDAD:e.data.city,CONCESIONA:e.data.dealerCode,POLITICAS:e.data.testDriveAcceptance,TERMINOS:e.data.policyAcceptance,FECHAENVIO:e.data.dateEmailSend,IP:e.data.ip,TOKEN:e.data.token,SUCURSAL:e.data.dealerBranchCode,ESTADO:e.data.estadoSend};$.ajax({method:"GET",url:"https://mazda.us10.list-manage.com/subscribe/post-json?u=078cfb1fd376d69a165b26f31&amp;id=cc8db72c3d",data:n,cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(e){alert("Could not connect to the registration server. Please try again later.")},success:function(e){e.result},error:function(e){console.log(e)}}),$.ajax({method:"POST",url:"https://prospectos.mazda.co/pruebaREST/signatureREST?"+t,headers:{Accept:"*/*","Content-Type":"application/json"},data:{},type:"json",success:function(a){"OK"==a.codigo&&e.redirectResponse(e.data.modelsOfInterest)},error:function(e){console.log(e)}})}}]).directive("onlyLetters",[function(){return{require:"ngModel",link:function(e,a,c,t){t.$parsers.push(function e(a){var c=a.replace(/[^a-zA-Z ]/g,"");return c!==a&&(t.$setViewValue(c),t.$render()),c})}}}]).directive("onlyNumbers",[function(){return{require:"ngModel",link:function(e,a,c,t){t.$parsers.push(function e(a){var c=a.replace(/\D/g,"");return c!==a&&(t.$setViewValue(c),t.$render()),c})}}}]);