if(!STRY){var STRY = {};}
STRY.config_10825 = {"app_name": "Homepage Carousel", "fallback_channel_id": false, "fallback_language_code": null, "can_tab_expanded_content": true, "analytics": {"ga4_measurement_id": "G-SVS8X6CFSZ", "version": "v2", "id": "false"}, "api": {"story": "mazda-colombia", "workflow_state": "live", "story_id": "2177", "app_id": "10825", "environment": "//live.storystream.it", "channel_id": "6177f86f7f509866f44278f8", "token": "0ba35921a23ecb3d807089ecfeab5d72f963709b", "version": "v4", "type": "channel", "channel_name": "Homepage Carousel"}, "category_filters": [], "filters": {"show": false}, "hosted": false, "smartgoals_same_window": false, "app_type": "storyboard", "ignore_analytics_consent": true, "has_been_saved": true, "theme": "advanced", "breakpoints": [{"width": 768, "columns": 1}, {"width": 1100, "columns": 2}, {"width": 1380, "columns": 3}, {"width": 1400, "columns": 4}], "seo_utils_enabled": false, "smartgoals_always_visible": false, "kenfits": false, "element_id": "stry-wrapper-10", "type": "carousel", "previewMode": false, "templates": {"version": "1.1.0", "html": {"item": "html/item.html", "popup": "html/popup-item.html", "custom_story_item_popup": "html/story-popup-item.html", "menu": "html/menu.html"}, "css": "styles.css", "location": "//s3-eu-west-1.amazonaws.com/templates.storystream.it/carousel/{theme}/{version}/"}, "hasDeeplink": false, "sharing": {"app_type": "carousel", "url_query": "rel=carousel~10825", "embed_url": "https://www.mazda.com.co/", "app_id": "10825", "analytics_page": "/"}, "embed_url": "https://apps.storystream.ai/app/js/3799217710825.js", "hostingModel": {}, "roi_enabled": false, "show_popup_brand_messages": false, "smartgoal_adobe_attribute_value": false, "hasDeeplinkCategories": false, "stylesheets": "\n\n/*INLINE SMARTGOAL*/\n\n.stry-carousel-layout .stry-item .stry-media .stry-grid-smartgoal{\n    background: #910A2D !important;\n    color:#ffffff!important;\n}\n\n.stry-carousel-layout .stry-popup.active-smartgoals .stry-smartgoal-bar{\n    background: #910A2D !important;\n    color:#ffffff!important;\n}\n\n\n\n/*Star rating */\n.stry-carousel-layout.stry-earned-media-module .stry-item .stry-star-rating, .stry-carousel-layout.stry-earned-media-module .stry-popup-item .stry-star-rating{\n    display:none!important;\n}\n\n/*Text rating */\ndiv.stry-score-text{\n    display:none!important;\n}\n\n/*Number rating */\n.stry-carousel-layout.stry-earned-media-module .stry-item .stry-score, .stry-carousel-layout.stry-earned-media-module .stry-item .stry-score-text, .stry-carousel-layout.stry-earned-media-module .stry-popup-item .stry-score, .stry-carousel-layout.stry-earned-media-module .stry-popup-item .stry-score-text{\n    display:none!important;\n}\n\n\n\n\n\n.stry-carousel-layout.stry-earned-media-module .stry-item .stry-score-text {\n    font-size: 13px;\n    font-weight: 500;\n    line-height: 1;\n    text-align: right;\n}\n\n.stry-carousel-layout .stry-item .stry-item-inner .stry-hub-meta,\n.stry-carousel-layout.stry-earned-media-module .stry-item .stry-item-inner .stry-text {\n    background-color: transparent !important;\n}\n\n.stry-pane a {\n    border-bottom: none !important;\n    line-height: 1.5 !important;\n}\n\n.stry-pane a:hover {\n    margin-bottom: 0 !important;\n}\n\n.stry-accessible-hide {\n    position: absolute !important;\n    left: -999999px !important;\n}\n\n.stry-carousel-layout.stry-earned-media-module .stry-item .stry-item-inner .stry-text {\n    min-height: 265px !important;\n}\n\n.stry-carousel-layout .stry-menu .stry-categories .stry-menu-item a {\n    font-size: 18px !important;\n    font-weight: 400 !important;\n}\n.stry-carousel-layout .stry-item-hover * {\n    pointer-events: none;\n}\n\n.stry-carousel-layout img {\n    max-width: 100%;\n}\n\n.stry-carousel .stry-popup .is-post-view.stry-popup-outer {\n-ms-overflow-style: none !important;\n} \n.stry-popup-outer::-webkit-scrollbar {\n    display: none !important;\n}", "storystream_credit": {"inline": {"colour": "dark", "enabled": false}, "expanded": {"colour": "light", "enabled": false}}, "useCloudinaryDerivatives": true, "latest_versions": {"storyboard": "3.88.0", "sdk": "9.58.0"}, "track_storyboard_interactions": true, "isChina": false, "lookbook": false, "no_base_cookies": false, "cookie_killswitch": false, "emm": true, "limit": 12, "carousel_crop": true, "show_grid_brand_messages": false};
window.STRY||(window.STRY={}),function(e,t,a){!function(){"use strict";var e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:a,compile:a};function t(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(t,(function(t){return e[t]||t})):this}}"undefined"!=typeof module&&module.exports?module.exports=e:(function(){return this||(0,eval)("this")}()).doT=e,String.prototype.encodeHTML=t();var r={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},i=/$^/;function s(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}e.template=function(a,n,o){var l,c,d=(n=n||e.templateSettings).append?r.append:r.split,p=0,u=n.use||n.define?function e(t,a,r){return("string"==typeof a?a:a.toString()).replace(t.define||i,(function(e,a,i,s){return 0===a.indexOf("def.")&&(a=a.substring(4)),a in r||(":"===i?(t.defineParams&&s.replace(t.defineParams,(function(e,t,i){r[a]={arg:t,text:i}})),a in r||(r[a]=s)):new Function("def","def['"+a+"']="+s)(r)),""})).replace(t.use||i,(function(a,i){t.useParams&&(i=i.replace(t.useParams,(function(e,t,a,i){if(r[a]&&r[a].arg&&i){var s=(a+":"+i).replace(/'|\\/g,"_");return r.__exp=r.__exp||{},r.__exp[s]=r[a].text.replace(new RegExp("(^|[^\\w$])"+r[a].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+s+"']"}})));var s=new Function("def","return "+i)(r);return s?e(t,s,r):s}))}(n,a,o||{}):a;u=("var out='"+(n.strip?u.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):u).replace(/'|\\/g,"\\$&").replace(n.interpolate||i,(function(e,t){return d.start+s(t)+d.end})).replace(n.encode||i,(function(e,t){return l=!0,d.start+s(t)+d.endencode})).replace(n.conditional||i,(function(e,t,a){return t?a?"';}else if("+s(a)+"){out+='":"';}else{out+='":a?"';if("+s(a)+"){out+='":"';}out+='"})).replace(n.iterate||i,(function(e,t,a,r){return t?(p+=1,c=r||"i"+p,t=s(t),"';var arr"+p+"="+t+";if(arr"+p+"){var "+a+","+c+"=-1,l"+p+"=arr"+p+".length-1;while("+c+"<l"+p+"){"+a+"=arr"+p+"["+c+"+=1];out+='"):"';} } out+='"})).replace(n.evaluate||i,(function(e,t){return"';"+s(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),l&&n.selfcontained&&(u="String.prototype.encodeHTML=("+t.toString()+"());"+u);try{return new Function(n.varname,u)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+u),e}},e.compile=function(t,a){return e.template(t,null,a)}}();!function(){function a(e){return new a.fn.init(e)}function r(t,a,r){if(!r.contentWindow.postMessage)return!1;var i=r.getAttribute("src").split("?")[0];t=JSON.stringify({method:t,value:a});"//"===i.substr(0,2)&&(i=e.location.protocol+i),r.contentWindow.postMessage(t,i)}function i(e){var t,a;try{a=(t=JSON.parse(e.data)).event||t.method}catch(e){}if("ready"==a&&!o&&(o=!0),e.origin!=l)return!1;e=t.value;var r=t.data,i=""===i?null:t.player_id;return t=i?n[i][a]:n[a],a=[],!!t&&(void 0!==e&&a.push(e),r&&a.push(r),i&&a.push(i),0<a.length?t.apply(null,a):t.call())}function s(e,t,a){a?(n[a]||(n[a]={}),n[a][e]=t):n[e]=t}var n={},o=!1,l="";a.fn=a.prototype={element:null,init:function(a){"string"==typeof a&&(a=t.getElementById(a)),this.element=a,"//"===(a=this.element.getAttribute("src")).substr(0,2)&&(a=e.location.protocol+a);for(var r="",i=0,s=(a=a.split("/")).length;i<s&&3>i;i++)r+=a[i],2>i&&(r+="/");return l=r,this},api:function(e,t){if(!this.element||!e)return!1;var a=this.element,i=""!==a.id?a.id:null,n=t&&t.constructor&&t.call&&t.apply?null:t,o=t&&t.constructor&&t.call&&t.apply?t:null;return o&&s(e,o,i),r(e,n,a),this},addEvent:function(e,t){if(!this.element)return!1;var a=this.element,i=""!==a.id?a.id:null;return s(e,t,i),"ready"!=e?r("addEventListener",e,a):"ready"==e&&o&&t.call(null,i),this},removeEvent:function(e){if(!this.element)return!1;var t,a=this.element;e:{if((t=""!==a.id?a.id:null)&&n[t]){if(!n[t][e]){t=!1;break e}n[t][e]=null}else{if(!n[e]){t=!1;break e}n[e]=null}t=!0}"ready"!=e&&t&&r("removeEventListener",e,a)}},a.fn.init.prototype=a.fn,e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),e.Froogaloop=e.$f=a}();function r(){var e,a=this,r=!1,i=!1,n=!1;function o(e){return"storyboard"==e.params.app_type&&0==e.items.length&&"live-video"!==e.params.type||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent&&"live-video"!==e.params.type}a.init=function(t){t.params&&(e=t.params),!t.params||void 0!==t.params.track_storyboard_interactions&&!0!==t.params.track_storyboard_interactions||(t.addEventListener("onViewed",(function e(i){r||o(t)||(r=!0,a.track("Storyboard, View")),t.removeEventListener("onViewed",e)})),t.addEventListener("onHovered",(function e(){i||o(t)||(i=!0,a.track("Storyboard, Hover")),t.removeEventListener("onHovered",e)})),t.addEventListener("onEngagedView",(function e(r){n||o(t)||(n=!0,a.track("Storyboard, engagedView")),t.removeEventListener("onEngagedView",e)})),t.addEventListener("onDirectDeeplink",(function(e){a.track("Content Item, click, "+e.detail.id)})))},a.track=function(a){var r=Object.keys(e.adobe_analytics_config).map((function(t){return e.adobe_analytics_config[t]})).join(","),i=t.getElementsByTagName("title")[0].text;if(event&&event.target){if(Array.isArray(a))var n=a;else n=a.split(",");var o=n[2];if(n[1].length>=5)var l=n[1].replace(/([A-Z])/g," $1");else l=n[1];var c=n[0]?n[0]+" "+l:event.type;c=c.replace(/  +/g," ");var d=event.target.getAttribute("href");if(d){smartgoal_data_segments=event.target.dataset.stryTrack.split("/");var p=smartgoal_data_segments.slice(-1)[0];o=smartgoal_data_segments.slice(-1)[2]}}r&&(s.linkTrackVars=r),i&&(s[e.adobe_analytics_config.pagename]=i),e.api.app_id&&(s[e.adobe_analytics_config.app_id]=e.api.app_id),c&&(s[e.adobe_analytics_config.event_type]=c.toLowerCase()),o&&" undefined"!==o&&(s[e.adobe_analytics_config.content_id]=o),o&&"live video show video time watched"==c&&(s[e.adobe_analytics_config.content_id]="",s[e.adobe_analytics_config.lvs_show_time_watched]=o),d?(s[e.adobe_analytics_config.smg_url_name]=d,s[e.adobe_analytics_config.smart_goal_type]=p):(s[e.adobe_analytics_config.smg_url_name]="",s[e.adobe_analytics_config.smart_goal_type]=""),s.tl(!0,"o","stry event")}}function i(){var r,i,s,n=this,o=!1,l=3,c=5,d=!1,p=!1,u=!1,m=!1,f=!1,_=null;function y(t,i,s,l){!function(t,i){if(!o)return!1;if(t>=c)return!1;if(e.GoogleAnalyticsObject==a)return!1;if(e[e.GoogleAnalyticsObject]==a)return!1;if(i)return!1;if(r.dynamic_ga_tracker&&!m&&!f)return!1;return!0}(i,s)?setTimeout((function(){y(t,i+1,!1,l)}),500):(n.track(t,l),s=!0)}function g(a){var s=-1!==t.domain.indexOf(".stystm");("off"===STRY.util.getQueryString("analytics")&&(s=!1),a||r.dynamic_ga_tracker)||function(e,t,a,r,i,s,n){e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(a),n=t.getElementsByTagName(a)[0],s.async=1,s.src=r,n.parentNode.insertBefore(s,n)}(e,t,"script","//www.google-analytics.com/"+(s?"analytics_debug":"analytics")+".js","ga");r.analytics.id=r.override_analytics_property?r.override_analytics_property:r.analytics.id,"v2"!=r.analytics.version||"v2"==r.analytics.version&&!a&&!r.dynamic_ga_tracker?(!function(a,s){switch(h(a,i,r),s){case"v2":r.hasOwnProperty("custom_analytics_dimensions")&&r.custom_analytics_dimensions.length&&b(i,r.custom_analytics_dimensions),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview");break;default:e[e.GoogleAnalyticsObject](i+".set","dimension1",r.api.story),e[e.GoogleAnalyticsObject](i+".set","dimension2",r.sharing.app_type),e[e.GoogleAnalyticsObject](i+".set","dimension3",r.sharing.app_id),e[e.GoogleAnalyticsObject](i+".set","dimension4",t.domain),e[e.GoogleAnalyticsObject](i+".set","dimension5",e.location.pathname+e.location.search),e[e.GoogleAnalyticsObject](i+".set","dimension6",e.location.hash),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview")}}(r.analytics.id,r.analytics.version),o=!0):"v2"==r.analytics.version&&a&&(!function(t){e[e.GoogleAnalyticsObject]((function(){for(var a,s=e[e.GoogleAnalyticsObject].getAll(),n=s.length,o=!1,l=r.native_tracker_name?r.native_tracker_name:null;n--;)(a=s[n]).get("name")!==i&&(a.get("trackingId")===t&&(o=!0,a.get("name")==l&&(i=a.get("name"))),r.dynamic_ga_tracker&&(a.get("trackingId")&&0!==a.get("name").indexOf("gtm")&&(i=a.get("name"),t=a.get("trackingId"),m=!0),0!=n||m||(i="stst_tracker",t=a.get("trackingId"),f=!0)));o||r.dynamic_ga_tracker?(o&&i!==l&&!r.dynamic_ga_tracker||f)&&h(t,i,r):(h(t,i,r),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview"))}))}(r.analytics.id),o=!0)}function h(t,a,r){var i={name:a,cookieDomain:"auto",cookieFlags:"secure;samesite=none"};r.cookieless_analytics&&(i.storage="none");try{e[e.GoogleAnalyticsObject].remove(i.name)}catch{}e[e.GoogleAnalyticsObject]("create",t,i),e[e.GoogleAnalyticsObject](i.name+".set","anonymizeIp",!0),r.ga_remove_search_parameters&&function(t){e[e.GoogleAnalyticsObject](t+".set","page",e.location.href.split(e.location.search)[0]),e[e.GoogleAnalyticsObject](t+".set","location",e.location.href.split(e.location.search)[0])}(i.name),r.hasOwnProperty("custom_analytics_dimensions")&&r.custom_analytics_dimensions.length&&b(i.name,r.custom_analytics_dimensions),r.optimize_container_id&&e[e.GoogleAnalyticsObject](i.name+".require",r.optimize_container_id)}function v(e,t){return e=void 0===t||t?i+".send, event, "+e+", {useBeacon: true}":i+".send, event, "+e+", {useBeacon: true, nonInteraction: true}",JSON.parse(e)}function S(e,t){for(var a=(e=i+".send, event, "+e).split(","),n=a.length;n--;)a[n]=a[n].trim();if(r.analytics.version)for(s[a[3].toLowerCase()]&&s[a[3].toLowerCase()][a[2].toLowerCase()]?a[3]=s[a[3].toLowerCase()][a[2].toLowerCase()]:a[3]=a[2]+" "+a[3],a[2]="storystream_"+r.api.story+"_"+r.sharing.app_id,n=a.length;n--;)n>0&&2!=n&&(a[n]=a[n].toLowerCase());return void 0===t||t?a.push({useBeacon:!0}):a.push({nonInteraction:!0,useBeacon:!0}),a}function b(t,a){for(var r=0;r<a.length;r++)e[e.GoogleAnalyticsObject](t+".set","dimension"+a[r].key,a[r].value)}function k(e){return"storyboard"==e.params.app_type&&0==e.items.length||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent}n.init=function(t){t.params&&((r=t.params).ga_domain_property&&function(t){var a=e.location.host;for(var[r,i]of Object.entries(t.ga_domain_property)){if(r==a||"www."+r==a){t.analytics.id=i;break}t.analytics.id=t.analytics.id}}(r),i=r.native_tracker_name?r.native_tracker_name:"storystream_tracker_"+r.sharing.app_id,s=function(e){switch(e){case"v2":return{click:{"content item":"content item click",smartgoal:"smartgoal click",controls:"control click",filter:"filter click","direct upload":"direct upload click","asset upload":"asset upload click","download asset":"download asset click","item selected":"item selected click"},share:{twitter:"content item share twitter",facebook:"content item share facebook",pinterest:"content item share pinterest",email:"content item share email",linkedin:"content item share linkedin","google+":"content item share google+"},view:{storyboard:"storyboard view"},hover:{storyboard:"storyboard hover"},engagedview:{storyboard:"storyboard engaged view"},tab:{"content item":"content item tab"}}}}(r.analytics.version),l=r.analyticsAttemptsLimit?r.analyticsAttemptsLimit:3,function t(i){if(o||r.analytics_init_wait)setTimeout((function(){g(!0)}),r.analytics_init_wait);else if(i<l||r.dynamic_ga_tracker){if(e.GoogleAnalyticsObject!==a&&e[e.GoogleAnalyticsObject]!==a)return void g(!0);setTimeout((function(){t(i+1)}),500)}else g(!1)}(0)),!t.params||void 0!==t.params.track_storyboard_interactions&&!0!==t.params.track_storyboard_interactions||(t.addEventListener("onViewed",(function e(a){d||k(t)||(d=!0,y("Storyboard, View",0,!1,a.detail.isInteractive)),t.removeEventListener("onViewed",e)})),t.addEventListener("onHovered",(function e(){p||k(t)||(p=!0,y("Storyboard, Hover",0,!1)),t.removeEventListener("onHovered",e)})),t.addEventListener("onEngagedView",(function e(a){u||k(t)||(u=!0,y("Storyboard, engagedView",0,!1,a.detail.isInteractive)),t.removeEventListener("onEngagedView",e)})),t.addEventListener("onDirectDeeplink",(function(e){y("Content Item, click, "+e.detail.id,0,!1)})))},n.track=function(t,a){if(o){if(!t)return;var r,i;try{JSON.parse(t),r=v}catch(e){r=S}if(i=r(t,a),!e[e.GoogleAnalyticsObject])return;e[e.GoogleAnalyticsObject].apply(this,i)}},n.updateConsent=function(e){r=e.params,_||(_=r.analytics.id),h(_,i,r)}}function n(){var a=this,r=null,i=null,s=null,n={"Content Item,click":{name:"StoryStream Content Item Click",type:"view_item",item:{item_id:0}},"Content Item,tab":{name:"StoryStream Content Item Tab",type:"view_item",item:{item_id:0}},"SmartGoal,click":{name:"StoryStream Smart Goal Click",type:"select_promotion",item:{item_id:0,item_name:1,item_variant:2}},"Twitter,share":{name:"StoryStream Share",type:"select_promotion",item:{item_id:0,item_name:"Twitter"}},"Facebook,share":{name:"StoryStream Share",type:"select_promotion",item:{item_id:0,item_name:"Facebook"}},"LinkedIn,share":{name:"StoryStream Share",type:"select_promotion",item:{item_id:0,item_name:"LinkedIn"}},"Email,share":{name:"StoryStream Share",type:"select_promotion",item:{item_id:0,item_name:"Email"}},"Load more":{name:"StoryStream Storyboard Load More",type:"view_item_list"},"live video show,before show engaged view":{name:"Live Video Show Before Show Engaged View",type:"view_item"},"live video show,live show view":{name:"Live Video Show Live Show View",type:"view_item"},"live video show,replay show view":{name:"Live Video Show Replay Show View",type:"view_item"},"live video show,video viewed":{name:"Live Video Show Video Viewed",type:"view_item"},"live video show,video time watched":{name:"Live Video Show Video Time Watched",type:"view_item",item:{item_variant:0}},"Direct Upload,click,Open":{name:"StoryStream Direct Upload Open",type:"select_item"},"Direct Upload,click,Finish":{name:"StoryStream Direct Upload Submit",type:"select_item"},"Category,filter":{name:"StoryStream Storyboard Category Filter",type:"view_item_list",item:{item_variant:0}}};if(e.dataLayer&&void 0===e.dataLayer.push){function o(){ststDataLayer.push(arguments)}e.ststDataLayer=e.ststDataLayer||[]}else{function o(){dataLayer.push(arguments)}e.dataLayer=e.dataLayer||[]}var l=()=>{if(o("js",new Date),s.ignore_analytics_consent);else{let e=s.no_base_cookies||s.cookieless_analytics?"denied":"granted",t={ad_storage:e,analytics_storage:e};s.additional_analytics_consent_properties&&s.additional_analytics_consent_properties.forEach(a=>{t[a]=e}),s.no_base_cookies||s.cookieless_analytics?o("consent","default",t):o("consent","update",t)}var e=!!s.prevent_page_view_firing&&s.prevent_page_view_firing;o("config",r,{send_page_view:!e})};a.updateConsent=e=>{s=e.params,l()};var c=e=>e.items.length>0||e.layout.currentMinimumContent>0&&e.items.length>=e.layout.currentMinimumContent;a.init=n=>{(s=n.params,i=s.api.app_id,s.server_side_ga4)||(r=s.analytics.ga4_measurement_id||s.GA4ID,t.querySelector('script[src$="//https://www.googletagmanager.com/gtag/js?id='+r+"]")?l():(()=>{var a=t.createElement("script");a.type="text/javascript";var i="";e.dataLayer&&void 0===e.dataLayer.push&&(i="&l=ststDataLayer"),a.src="https://www.googletagmanager.com/gtag/js?id="+r+i,t.body.appendChild(a),l()})());n.addEventListener("onViewed",(function e(){c(n)&&(a.track(null,"storystream_storyboard_view","StoryStream Storyboard View","view_item_list"),n.removeEventListener("onViewed",e))})),n.addEventListener("onEngagedView",(function e(){c(n)&&(a.track(null,"storystream_storyboard_engaged_view","StoryStream Storyboard Engaged View","view_item_list"),n.removeEventListener("onEngagedView",e))})),n.addEventListener("onHovered",(function e(){c(n)&&(a.track(null,"storystream_storyboard_hover","StoryStream Storyboard Hover","view_item_list"),n.removeEventListener("onHovered",e))})),n.addEventListener("onDirectDeeplink",()=>{this.track(null,"storystream_storyboard_direct_deeplink","StoryStream Storyboard Direct Deeplink","view_item")})},a.track=(e,t,a,l)=>{var c=null,d=null,p=[],u={};if(e&&(Array.isArray(e)&&(e=e.join(", ")),e.includes(",")?("Direct Upload,click"==(c=e.split(", ").slice(0,2).join())&&(c=e.split(", ").join()),d=e.split(", ")[2].split("/")):c=e),c&&n.hasOwnProperty(c)&&(a=n[c].name,n[c].id,l=n[c].type,n[c].item)){for(const[e,t]of Object.entries(n[c].item))Number.isInteger(t)?u[e]=d[t]:u[e]=t;u.item_list_id=i+"",u.item_list_name=a,p.push(u)}if(p.length||(u.item_list_id=i+"",u.item_list_name=a,p.push(u)),void 0===a)return;let m={item_list_id:i+"",item_list_name:a,items:p};s.server_side_ga4||(m.send_to=r),s.custom_ga4_event_mapping&&(l=s.custom_ga4_event_mapping[a].type),o("event",l,m)}}function o(){var a=this,r=!1,i=!1,s=!1,n=e.vwdata||null,o=e.digitalData||null,l="undefined"!=typeof dynamic_dataLayer&&dynamic_dataLayer,c=e.pagData||[],d=e.dataLayer||[],p=!1,u=null,m=null,f=null,_=null,y=[2625,2603,2574,2690,2703,2349,2602,2717,2642,2036,2543,2277,2036,1760,1863,1873,1762,1864,1671,1714,1689,1711,1712,1713,1715,1716,1717,1718,1719,1720,1721,1722,1723,1674,1686,1687,1688,1685,1731,2626,2198,1925,2447,2452,2448,2454,2450,2453,2451,2455,2449,2445,2446,2440,1756,1876,1627,2162,1617,1733,1763,1757,2037,1755,1877,1728,2709,2605,2961,2952,2962,2964,2958,2963,2965,2951];const g=[1366],h=[2840];function v(e){return"storyboard"==e.params.app_type&&0==e.items.length||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent}function S(e){for(var t=[321,480,560,768,960,1200,1280,1600,2560],a=0;a<=t.length;a++){if(void 0===t[a+1])return t[a]+"";if(e>t[a]&&e<t[a+1])return t[a]+""}}a.init=function(e){if(e.params&&(void 0===e.params.track_storyboard_interactions||!0===e.params.track_storyboard_interactions)){if(p=e.params.app_name,m=Number(e.params.api.story_id),f=e.params.api.app_id,_=e.params.type,2087==m)u={onViewed:["impression","storystream - module view"],onEngagedView:["impression","storystream - module engaged view"],"Content Item,click":["click","storystream - article opened"],"Content Item,tab":["click","storystream - article opened"],"Read more,click":["click","storystream - article opened"],"SmartGoal,click":["click","storystream - CTA click"],"Read Review,click":["click","storystream - read review click"]};else if(2100==m||2549==m||2725==m)u={"Twitter,share":"VWBasic_SocialShare_Click","LinkedIn,share":"VWBasic_SocialShare_Click","SmartGoal,click":"VWBasic_SocialLink_Click","Facebook,share":"VWBasic_SocialShare_Click","Email,share":"VWBasic_SocialShare_Click","Content Item,tab":"VWBasic_SliderElement_Load","Pinterest,share":"VWBasic_SocialShare_Click","Content Item,click":["VWBasic_SocialLink_Click","VWBasic_Layer_Load"],onViewed:"VWBasic_Gallery_Load",onEngagedView:"VWBasic_GalleryEngagedView_Load","Read Review,click":"VWBasic_SocialLink_Click"};else if(1666==m||1879==m||2698==m)u={onViewed:"storyStream-View",onEngagedView:"storyStream-View-Engaged","Content Item,click":"storyStream-Content-Opens","SmartGoal,click":"storyStream-SmartGoal","Read Review,click":"storyStream-CTA-Click"};else if(y.indexOf(m)>-1)u={onEngagedView:"PAGPCOM_StorystreamEngagedView_Load","SmartGoal,click":"PAGPCOM_StorystreamCTA_Click","Content Item,tab":"PAGPCOM_StorystreamTab_Click","Content Item,click":["PAGPCOM_StorystreamGeneral_Click","PAGPCOM_StorystreamSlider_Load"],"Load more,click":"PAGPCOM_StorystreamMore_Click"};else{if(!g.includes(m)&&!h.includes(m))return;u={"SmartGoal,click":"StoryStream SmartGoal Open","Content Item,click":"StoryStream Content Open","Content Item,tab":"StoryStream Content Tab","Category,filter":"StoryStream Storyboard Category Filter","Direct Upload,click,Finish":"StoryStream Direct Upload Finish","Direct Upload,click,Open":"StoryStream Direct Upload Open","Twitter,share":"StoryStream content item share twitter","LinkedIn,share":"StoryStream content item share linkedin","Facebook,share":"StoryStream content item share facebook","Email,share":"StoryStream content item share email","Pinterest,share":"StoryStream content item share pinterest",onViewed:"StoryStream Storyboard View","Storyboard,hover":"StoryStream Storyboard Hover",onEngagedView:"StoryStream Engaged View"}}u=e.params.custom_event_mapping?e.params.custom_event_mapping:u,e.addEventListener("onViewed",(function t(i){r||v(e)||(r=!0,a.track("onViewed")),e.removeEventListener("onViewed",t)})),e.addEventListener("onEngagedView",(function t(r){s||v(e)||(s=!0,a.track("onEngagedView")),e.removeEventListener("onEngagedView",t)})),e.addEventListener("onDirectDeeplink",(function(e){c||a.track("Content Item, tab, "+e.detail.id)})),e.addEventListener("onHovered",(function t(){i||v(e)||(i=!0,a.track("Storyboard, Hover",0,!1)),e.removeEventListener("onHovered",t)}))}},a.track=function(r,i){var s,y,v,b="",k=!1,w="",T="",C="",R=r.destination_url,A=(r.direction,null);if(void 0!==r.title&&r.title&&(s=v=r.title),void 0!==r.smartgoal_text&&r.smartgoal_text&&(y=v=r.smartgoal_text),void 0!==r.href&&void 0!==r.action&&(C=r.href,r=r.action),"string"==typeof r&&(r=r.split(",")),r.action&&"string"==typeof r.action&&(r=r.action.split(",")),r.length>1){b=u[r[0].trim()+","+r[1].trim().toLowerCase()];try{w=r[2].trim()}catch{}n&&("VWBasic_SocialShare_Click"==b&&(A=r[0]),"VWBasic_Teaser_Click"==b&&(T={url:e.location.href,name:w},a.track(["Content Item","tab",w])),"VWBasic_SocialLink_Click"==b&&(T={url:C,name:w}),"object"==typeof b&&b.indexOf("VWBasic_SocialLink_Click")>-1&&(T={url:R,name:"StoryStream content item"})),o&&(k=b[1],b=b[0])}else if("VWBasic_LayerClose_Click"==r[0].trim()){if(!n)return;b=r[0].trim(),T={url:e.location.href,name:"StoryStream Layer Close"},w=i.closed_item}else(b=u[r[0].trim()])&&"string"!=typeof b&&b.length>1&&(k=b[1],b=b[0],v=p);if(r&&b){if(n&&(b&&"object"!=typeof b&&(b=[b]),b.forEach(t=>{var a={eventInfo:{eventAction:t,contentId:w,pageName:e.vw_data_layer?e.vw_data_layer.page.pageName:2549==m?"Volkswagen UK |  The official Volkswagen website":"life : magazine",pageId:e.location.href,brand:2549==m?"commercial":"passenger"},environment:{language:"en",country:"GB",featureAppId:2549==m?"StoryStream-VWN-D6-UK":"StoryStream-D6-UK",featureAppIdAppVersion:"1.1"},user:{browserResolutionHeight:e.innerHeight+"",browserResolutionWidth:e.innerWidth+"",browserResolutionOrientation:e.innerHeight<e.innerWidth?"h":"v",browserResolutionBreakpoint:S(e.innerWidth)}};a.environment.applicationId="VWCMSD6",T&&"VWBasic_Layer_Load"!==t&&(a.link=T),A&&(a.social={},a.social.Platform=A),n.push(a)})),o){if("storystream - article opened"==k&&!C&&!R&&(R=e.location.hash,!v))try{v=e.location.hash.split("/")[2]}catch{v=null}var Y={eventInfo:{eventAction:b,eventName:k},attributes:{componentName:"storystream",label:v}};(C||R)&&(Y.attributes.targetURL=C||R),o.event.push(Y)}if(l){var x={eventName:b,moduleComponent:"storystream_module_"+f};s&&(x.interactionElements=s),y&&(x.interactionElements=y),w&&(x.componentID=w),"storyStream-SmartGoal"!=b&&"storyStream-CTA-Click"!=b||(x.linkURL=C),dynamic_dataLayer.call("interaction",x)}if(c){b&&"object"!=typeof b&&(b=[b]);var E="";try{E=(E=t.getElementsByTagName("html")[0].getAttribute("lang")).split("-")[0]}catch(e){}var L="";e.pagData.every((function(e){return!e.context||!e.context.country||(L=e.context.country,!1)}));var O="";try{O=t.getElementsByTagName("phn-header")[0].getAttribute("page-name")}catch(e){}b.forEach(t=>{x={context:{applicationId:"pcom",applicationName:"storystream",eventAction:t,moduleId:"s-531",moduleName:"Story-Stream",language:E,country:L,environment:"P",timestamp:(new Date).toISOString()},visitor:{deviceBrowserHeight:e.innerHeight+"",deviceBrowserWidth:e.innerWidth+"",deviceBrowserOrientation:e.innerHeight>=e.innerWidth?"p":"l",deviceType:"ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?"mobile":"desktop",useragent:navigator.userAgent},pageExperience:{pageId:e.location.href.split("?")[0],pageName:O}},"PAGPCOM_StorystreamCTA_Click"==t&&(x.componentClick={clickElementType:"button",clickElementId:w,clickElementName:y,targetUrl:C}),"PAGPCOM_StorystreamGeneral_Click"==t&&(x.componentClick={clickElementType:"teaser",clickElementId:w,clickElementName:s,targetUrl:R},x.componentDisplay={displayElementType:"storystream content item",displayElementId:w,displayElementName:s}),"PAGPCOM_StorystreamMore_Click"==t&&(x.componentClick={clickElementType:"button",clickElementId:"storystream_load_more",clickElementName:"load more",targetUrl:""}),"PAGPCOM_StorystreamTab_Click"==t&&(x.componentClick={clickElementType:"button",clickElementId:w,clickElementName:s,targetUrl:R}),c.push(x)})}if(d&&g.includes(m)){const e={event:"sweatyBettyEvent",category:`storystream_${m}_${_}_${f}`,action:b,label:null};w&&(e.label=`${w}`.trim()),d.push(e)}if(h.includes(m)){const t={event:"uaEvent",data:{eventCategory:b[0],eventAction:"",eventLabel:`storystream_${m}_${_}_${f}`}};w&&(t.data.eventAction=`${w}`.trim()),"StoryStream SmartGoal Open"==b&&(t.data.eventAction=r[2]),e.adobeDataLayer&&e.adobeDataLayer.push(t)}}}}function l(e){var t="//{sub_domain}.cloudfront.net/",a={detail:"t_detail/",preview:"t_preview/",carousel:"t_carousel/",emm_carousel:"t_emm_carousel/"},r={portrait:"d2z3xezg2yr13f",landscape:"d1qaslvk445j9a",square:"d2h5xeim3950up"},i={portrait:"d1cnb6xktgk46g",landscape:"d32hn0yls9aacg",square:"d3nlehdvzxvlz6"},s={square:"d2ybnotg3p35l0"},n="d1m9n8rb7nznh0";this.available=function(e){var t=0;return["d2vykwbochoala.cloudfront.net","d23abykesh9wm6.cloudfront.net","du66ttpehq3tn.cloudfront.net","d3gs7vyexhyssp.cloudfront.net","d2iaiknek2e21s.cloudfront.net","d1sdeqoxcfgxl0.cloudfront.net","cdninstagram.com"].every((function(a){return-1==e.indexOf(a)||(t=1,!1)})),!!t},this.get_simple_urls=function(e,t){var a={};for(const r in t.customCloudinaryTransforms)a[r]="//d2vykwbochoala.cloudfront.net/"+t.customCloudinaryTransforms[r]+"/"+e;return a},this.get_urls=function(o,l,c,d){var p,u,m,f,_={};if((f="d2vykwbochoala")||(f="res"),p=e.formatter.string(t,{sub_domain:f}),l.car_crop&&l.locked_ratio_mode&&l.ratio_layout&&c){var y,g="";switch(void 0!==l.bespoke_cdn_url&&l.bespoke_cdn_url&&(r=l.bespoke_cdn_url.small_locked_ratio_cdns,i=l.bespoke_cdn_url.large_locked_ratio_cdns),c){case 320:y=r;break;case 420:y=i;break;case 480:y=s}if(y)switch(l.ratio_layout){case"square":case"portrait":case"landscape":g=y[l.ratio_layout]}u=l.bespoke_cdn_url?g:e.formatter.string(t,{sub_domain:g})}var h=o.substring(o.lastIndexOf("/"));for(m in a)l.bespoke_cdn_url?l.locked_ratio_mode&&l.car_crop&&("preview"==m||"customPreview"==m)?_[m]=u+h:_[m]=l.bespoke_cdn_url[m]+h:(o=o.replace("?","%3F"),("preview"==m||"customPreview"==m)&&l.locked_ratio_mode&&l.car_crop?l.device_pixel_ratio?_[m]=u+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=u+o:"preview"!=m&&"customPreview"!=m||!l.carousel_crop||"storyboard"!=l.app_type||"carousel"!=l.type?l.device_pixel_ratio?_[m]=p+a[m]+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=p+a[m]+o:(u=e.formatter.string(t,{sub_domain:n}),l.device_pixel_ratio?_[m]=u+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=u+o));return"digital-magazine"==l.type||"news-hub"==l.type?(_.preview=d?l.car_crop?_.preview.replace("/t_preview/","/c_fill,g_auto:car,h_800,w_1200/"):_.preview.replace("/t_preview/","/c_fill,g_auto,h_800,w_1200/"):l.car_crop?_.preview.replace("/t_preview/","/c_fill,g_auto:car,h_450,w_450/"):_.preview.replace("/t_preview/","/c_fill,g_auto,h_450,w_450/"),l.customCloudinaryDetailTransform?(_.digital_magazine_small=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.small),_.digital_magazine_large=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.large)):(_.digital_magazine_small=_.detail.replace("/t_detail/","/w_900,c_limit/"),_.digital_magazine_large=_.detail.replace("/t_detail/","/w_2000,c_limit/"))):l.customCloudinaryDetailTransform&&(_.detail=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.large)),_},this.set_custom_preview_transform=function(e){a.customPreview="t_"+e+"/"}}function c(t){let r=this,i=t.params.api.story_id,s=t.params.api.app_id,n={"Content Item,click":"co","SmartGoal,click":"sgc"};r.trackEvent=t=>{let r=new Image,n={e:t.event,s:i,ed1:s,t:Date.now(),p:e.location.protocol+"//"+e.location.host+e.location.pathname};null!==t.link_id&&t.link_id!==a&&(n.ed2=t.link_id),null!==t.link_url&&t.link_url!==a&&(n.ed3=t.link_url);let o=new URLSearchParams(n);r.src="https://dn666andut2j1.cloudfront.net/measure_endpoint.gif?".concat(o.toString())},r.formatThenTrack=e=>{if(e.includes(",")&&(event_name=e.split(", ").slice(0,2).join(),event_args=e.split(", ")[2].split("/"),n[event_name])){let e=null;"SmartGoal,click"===event_name&&(e=event_args[1]),r.trackEvent({event:n[event_name],link_id:event_args[0],link_url:e})}};let o=e=>e.items.length>0||e.layout.currentMinimumContent>0&&e.items.length>=e.layout.currentMinimumContent;t.addEventListener("onViewed",(function e(){o(t)&&(r.trackEvent({event:"sv",link_id:null,link_url:null}),t.removeEventListener("onViewed",e))})),t.addEventListener("onEngagedView",(function e(){o(t)&&(r.trackEvent({event:"sev",link_id:null,link_url:null}),t.removeEventListener("onEngagedView",e))})),r.trackEvent({event:"pv",content_id:null,smartgoal_id:null})}function d(r){if(!(this instanceof d))return new d(r||{});if(r){var i,s=this;s.has_viewed=!1,s.is_out_of_view=!1,s.has_engaged_viewed=!1,s.view_timer=a,s.engaged_view_timer=a;var n=function(n){var o,l;switch(!(!(n=n||e.event)||!n.type)&&n.type){case"documentIsReady":case"touchmove":case"scroll":case"storyboardRendered":s.has_viewed&&s.has_engaged_viewed||function(i){var n=STRY.util.isIE();if(!n||n>8){var o=r.el.getBoundingClientRect(),l=t.documentElement,c=o.top<=(e.innerHeight||l.clientHeight)/2,d=e.pageYOffset!==a?e.pageYOffset:(t.documentElement||t.body.parentNode||t.body).scrollTop;c&&!s.view_timer&&(s.view_timer=setTimeout((function(){s.has_viewed=!0,STRY.util.transmit(r,"onViewed",{event:i,isInteractive:d>0})}),100)),c&&!s.engaged_view_timer&&(s.engaged_view_timer=setTimeout((function(){s.has_engaged_viewed=!0,STRY.util.transmit(r,"onEngagedView",{event:i,isInteractive:d>0})}),5e3)),c||(clearTimeout(s.view_timer),clearTimeout(s.engaged_view_timer),s.view_timer=a,s.engaged_view_timer=a)}}(n),s.has_viewed&&(o=r.el.getBoundingClientRect(),l=o.x+o.width<0||o.y+o.height<0||o.x>e.innerWidth||o.y>e.innerHeight,s.is_out_of_view!=l&&(s.is_out_of_view=l,s.is_out_of_view?STRY.util.transmit(r,"onOutOfView",{}):STRY.util.transmit(r,"onEnterView",{})));break;case"mouseover":i=setTimeout((function(){STRY.util.transmit(r,"onHovered",{event:n})}),100);break;case"mouseout":clearTimeout(i);break;case"onClicked":var c=n.detail.target.getAttribute("data-stry-track");c&&c.toLowerCase().indexOf("smartgoal")>=0&&STRY.util.transmit(r,"onSmartGoalClick",{target:n.detail.target,event:n,data:n.detail.data})}};r.el&&(r.addEventListener("documentIsReady",n),r.addEventListener("onClicked",n),r.el.addEventListener("mouseover",n),r.el.addEventListener("mouseout",n),r.addEventListener("storyboardRendered",n),e.addEventListener("scroll",STRY.util.debounce(n,200,!1,[{type:"scroll"}]),{capture:!0,passive:!0}),r.hasTouchEvents&&t.addEventListener("touchmove",STRY.util.debounce(n,200),{capture:!0,passive:!0}))}else STRY.util.error("StoryStream -> SDK -> StoryInteractions -> Scope for displaying must be defined.")}function p(t){if(!(this instanceof p))return new p(t||{});if(t){var a=function(t){switch(!!(t=t||e.event).type&&t.type){case"onClicked":r(t)}},r=function(e){var t=e.detail.target||e.srcElement,a=STRY.util.getDataAttribute(t,STRY.resources.data_action);if(a.action)switch(a.action){case"control-fade-carousel":i(t)}},i=function(e){var t=0,a=1;STRY.util.hasClass(e,STRY.resources.class_fade_carousel_previous)&&(a=0);for(var r=STRY.util.getClosest(e,(function(e){return STRY.util.hasClass(e,STRY.resources.class_fade_carousel)})).querySelectorAll("."+STRY.resources.class_fade_carousel_item),i=r.length,s=0;s<i;s++)STRY.util.hasClass(r[s],STRY.resources.class_fade_carousel_active_item)&&(t=s,STRY.util.removeClass(r[s],STRY.resources.class_fade_carousel_active_item));a?(t+=1)==i&&(t=0):(t-=1)<0&&(t=i-1),STRY.util.addClass(r[t],STRY.resources.class_fade_carousel_active_item)};return t.addEventListener("onClicked",a),this}STRY.util.error("StoryStream -> SDK -> StoryFadeCarousel -> Scope for displaying must be defined.")}function u(t,r){if(!(this instanceof u))return new u(t,r||{});var i=this;i.el=t,this.enableMediaCarousel=function(){if(i.el){var e=l();if(e&&!(e.length<2))try{e[0].querySelectorAll("video")[0].setAttribute("tabindex",-1)}catch{}}},this.actionMediaCarouselButton=function(e){STRY.util.hasClass(e,"stry-media-carousel-prev")&&o("backward"),STRY.util.hasClass(e,"stry-media-carousel-next")&&o("forward"),STRY.util.hasClass(e,"stry-media-carousel-ticker-button")&&o("forward",e.getAttribute("data-stry-media-carousel-ticker-index"))};var s=function(t){switch(!!(t=t||e.event).type&&t.type){case"click":n(t)}},n=function(e){var t=e.target||e.srcElement,a=STRY.util.getDataAttribute(t,STRY.resources.data_action);if(a.action)switch(a.action){case"control-media-carousel":i.actionMediaCarouselButton(t)}};function o(e,t){var r=l(),s=i.el.querySelectorAll(".stry-media-carousel-ticker"),n=0;if(r&&s){for(var o=0;o<r.length;o++){STRY.util.hasClass(r[o],"active")&&(n=o);try{r[o].querySelectorAll("video")[0].setAttribute("tabindex",-1),r[o].querySelectorAll("video")[0].pause()}catch{}STRY.util.removeClass(r[o],"active"),STRY.util.removeClass(s[o],"active")}2==r.length&&(e="forward"),"forward"==e?(n+=1)==r.length&&(n=0):"backward"==e&&(n-=1)<0&&(n=r.length-1),t&&(n=t),STRY.util.addClass(r[n],"active");try{let e=r[n].querySelectorAll("video")[0];e.setAttribute("tabindex",0);let t=e.play();t!==a&&t.catch(t=>{e.muted=!0,e.play()})}catch{}!function(e){if(e&&e.firstChild){var t,a=e.firstChild;STRY.util.hasClass(a,"stry-landscape")?t="stry-media-carousel-landscape":STRY.util.hasClass(a,"stry-portrait")&&(t="stry-media-carousel-portrait"),STRY.util.removeClass(i.el,"stry-media-carousel-landscape"),STRY.util.removeClass(i.el,"stry-media-carousel-portrait"),STRY.util.addClass(i.el,t)}}(r[n]),STRY.util.addClass(s[n],"active")}}function l(){return i.el.querySelectorAll(".stry-media-carousel-list-item")}return i.el.onclick=s,i.enableMediaCarousel(),i}function m(a,r){if(!(this instanceof m))return new m(a,r||{},"");if(a)if(a.params){if(r){var i,s,n=this,o='<div class="stry-loader-graphic"><div></div><div></div><div></div><div></div><div></div></div>',l="22px",c="20px",d=!1,p=!1,u=!1;n.remove=function(){n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el)};var f=function(t){switch(!!(t=t||e.event).type&&t.type){case"onClicked":STRY.util.hasClass(t.detail.target,"stry-loader-button")&&_();break;case"stylesAreReady":d=!0,p&&g();break;case"controlsAreReady":p=!0,d&&g();break;case"documentIsReady":u=!0,y();break;case"documentHasUpdated":y()}},_=function(){clearTimeout(i),clearTimeout(s),clearTimeout(void 0),n.outer&&(n.outer.style.width=n.width,n.outer.style.height=n.height,n.el.style.height=n.height,STRY.util.addClass(n.el,"stry-loader-loading"),i=setTimeout((function(){STRY.util.addClass(n.el,"stry-loader-shrink"),n.outer.style.width=l,n.outer.style.height=c,n.outer.style.top=n.pos}),100),s=setTimeout((function(){STRY.util.addClass(n.el,"stry-loader-split"),STRY.util.addClass(n.el,"stry-loader-animate")}),300))},y=function(){clearTimeout(i),clearTimeout(s),clearTimeout(void 0),n.outer&&(STRY.util.removeClass(n.el,"stry-loader-animate"),STRY.util.removeClass(n.el,"stry-loader-split"),STRY.util.removeClass(n.el,"stry-loader-no-transition"),n.outer.style.width=n.width,n.outer.style.height=n.height,n.outer.style.top=0,s=setTimeout((function(){STRY.util.removeClass(n.el,"stry-loader-shrink"),STRY.util.removeClass(n.el,"stry-loader-loading")}),200))},g=function(){n.el=a.el.querySelector(r),n.outer=n.el.querySelector(".stry-loader-outer"),n.outer?n.outer.htmlContent(o):(n.el.htmlContent('<div class="stry-loader-outer">'+o+"</div>"),n.outer=n.el.querySelector(".stry-loader-outer")),STRY.util.hasClass(n.el,"is-button")?(n.isButton=!0,n.width=n.outer.offsetWidth+20+"px",n.height=n.outer.offsetHeight+"px",n.pos=(parseInt(n.height)-parseInt(c))/2+"px",n.el.hasAttribute("data-stry-loader-init")&&!u&&(STRY.util.addClass(n.el,"stry-loader-no-transition"),STRY.util.addClass(n.el,"stry-loader-loading"),STRY.util.addClass(n.el,"stry-loader-shrink"),STRY.util.addClass(n.el,"stry-loader-split"),n.el.style.height=n.height,n.outer.style.width=l,n.outer.style.height=c,n.outer.style.top=n.pos,STRY.util.addClass(n.el,"stry-loader-animate"))):(n.outer.style.width=l,n.outer.style.height=c,STRY.util.addClass(n.el,"stry-loader-no-transition"),STRY.util.addClass(n.el,"stry-loader-loading"),STRY.util.addClass(n.el,"stry-loader-shrink"),STRY.util.addClass(n.el,"stry-loader-split"),STRY.util.addClass(n.el,"stry-loader-animate"))},h=function(){n.inc||(n.inc=0),n.inc+=1,n.inc===n.total&&(f({type:"stylesAreReady"}),n.inc=0)};return function(){var e=t.querySelectorAll('link[data-stry-type="stylesheet"]'),i=e.length,s=a.el.querySelector(r);if(!s||STRY.util.hasClass(s,"is-button")){if(n.inc=0,n.total=e.length,i>0)for(;i--;)e[i].addEventListener("load",h)}else g();a.addEventListener("onClicked",f),a.addEventListener("controlsAreReady",f),a.addEventListener("documentIsReady",f),a.addEventListener("documentHasUpdated",f)}(),n}STRY.util.error("StoryStream -> SDK -> StoryLoader -> No element selector specified")}else STRY.util.error("StoryStream -> SDK -> StoryLoader -> No parameters supplied");else STRY.util.error("StoryStream -> SDK -> StoryLoader -> Scope must be defined.")}function f(a){if(!(this instanceof f))return new f(a||{});if(a.params.direct_upload.terms_url){if(a.params.direct_upload.endpoint){var r,i,s,n,o,l=new STRY.renderer(a),c=0,d=/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]|[+]))+[@](([a-zA-Z0-9])|([-])){2,63}(([a-zA-Z0-9]|[.]){2,63})+/,p={app_id:a.params.sharing.app_id,author:{},files:[],terms_url:T(a.params.direct_upload.terms_url),privacy_policy_url:T(a.params.direct_upload.privacy_policy_url),additional_checkbox:T(a.params.direct_upload.additional_checkbox),website:{},errors:{},terms_disabled:a.params.direct_upload_terms_disabled};a.params.api.channel_id&&(p.channel_id=a.params.api.channel_id),a.params.api.story_id&&(p.story_id=a.params.api.story_id);var u=a.language?a.language:a.params.language,m=function(r){var s=!!(r=r||e.event).type&&r.type;if(r=r.detail?r.detail:r,"onClicked"===s)switch(r.data.action){case"directUploadOpen":b(c=1),i=a.el.querySelector("."+STRY.resources.class_direct_upload_popop),STRY.util.addClass(i,STRY.resources.class_direct_upload_popup_active),n=t.getElementsByTagName("body")[0],STRY.util.addClass(n,"stry-direct-upload-is-active"),o=t.getElementsByTagName("html")[0],STRY.util.addClass(o,"stry-direct-upload-is-active"),a.params.accessibility_features&&(null,setTimeout((function(){var e=a.el.querySelector(".stry-direct-upload-popup").querySelector('[role="dialog"]');aria&&new aria.Dialog(e,null,a.el.querySelector(".stry-direct-upload-icons-list div"))}),100));break;case"directUploadClose":STRY.util.hasClass(r.target,"stry-direct-upload-close-link")&&(S(),p={app_id:a.params.sharing.app_id,files:[],author:{},terms_url:T(a.params.direct_upload.terms_url),privacy_policy_url:T(a.params.direct_upload.privacy_policy_url),additional_checkbox:T(a.params.direct_upload.additional_checkbox),tab:null,living:null,website:{},errors:{},terms_disabled:a.params.direct_upload_terms_disabled},STRY.util.removeClass(i,STRY.resources.class_direct_upload_popup_active),STRY.util.removeClass(n,"stry-direct-upload-is-active"),STRY.util.removeClass(o,"stry-direct-upload-is-active"),a.params.accessibility_features&&a.el.querySelector("#direct-upload").focus());break;case"directUploadNext":_(r.data),S(),c++,b(c,p);break;case"directUploadBack":_(r.data),S(),c--,b(c,p);break;case"directUploadFinish":_(),w();break;case"directUploadStartUploadCare":_(r.data),S(),b("upload_care",p).then((function(){e.require&&e.define&&!a.appStoreMode?require(["https://ucarecdn.com/libs/widget/3.17.2/uploadcare.full.min.js"],(function(e){k(e)})):k(uploadcare)}));break;case"directUploadStopUploadCare":S(),b(c);break;case"directUploadRemoveFile":_(r.data),y(r),S(c),p.files.length<1&&c--,b(c,p);break;case"directUploadRestart":S(),p.author.terms_and_conditions=!1,p.author.privacy_policy=!1,p.author.additional_checkbox=!1,p.website={},p.files=[],p.errors={},b(c=1,p);break;case"directUploadStopBubbling":r.event.stopPropagation()}},_=function(e){1!==c?2!==c?3!==c||g(e):h(e):v(e)},y=function(e){var t=e.data.element.getAttribute("data-stry-file-id");p.files.splice(parseInt(t),1)},g=function(){for(var e=a.el.querySelector("#stry-direct-upload-form").querySelectorAll("input.stry-author-input"),t=0;t<e.length;t++)p.author[e[t].name]=e[t].value;a.el.querySelector("#terms_and_conditions:checked")||a.params.direct_upload_terms_disabled?p.author.terms_and_conditions=!0:p.author.terms_and_conditions=!1,a.el.querySelector("#privacy_policy:checked")&&a.params.direct_upload.privacy_policy_url||a.params.direct_upload_terms_disabled?p.author.privacy_policy=!0:p.author.privacy_policy=!1,a.el.querySelector("#additional_checkbox:checked")&&a.params.direct_upload.hasOwnProperty("additional_checkbox")?p.author.additional_checkbox=!0:p.author.additional_checkbox=!1},h=function(){for(var e=a.el.querySelectorAll(".stry-direct-upload-file-description"),t=0;t<e.length;t++)p.files[t].description=e[t].value},v=function(e){p.tab=e.element.children[0].children[0].value},S=function(e){var t=a.el.querySelector(".stry-direct-upload-body-inner");t.parentNode.removeChild(t)},b=function(e,r){return new Promise((function(i,s){r=r||{},l.compile({template:a.params.direct_upload["tab_template_"+e],item:{info:r,localisation:u.strings},callback:function(r){a.el.querySelector(".stry-direct-upload-body").appendChild(r.el),3===e&&setTimeout((function(){var e=t.createElement("input"),a=t.createElement("span"),r=t.createTextNode(u.strings.i_am_not_robot);e.type="checkbox",e.name="living",e.checked=!1,e.id="living",a.classList.add("stry-check-faux"),t.querySelector("#terms_check")&&t.querySelector("#terms_check").classList.add("stry-check-enhanced"),t.querySelector("#living_check").classList.add("stry-check-enhanced"),t.querySelector("#living_check").appendChild(e),t.querySelector("#living_check").appendChild(r),t.querySelector("#living_check").appendChild(a)}),1e3),i()}})}))},k=function(e){data=p,e.tabsCss.addStyle(".side-bar { display: none; } .main-content { margin-left: 0; } .main-content-header, .main-content-header-reserved, .uploadcare-dialog-button { display: none; } .welcome { padding-top: 5px; }"),data.tab||(data.tab="file"),(r=e.openPanel("#uploader-placeholder",null,{tabs:data.tab,publicKey:a.params.direct_upload.uploadcare_publickey,role:"uploadcare-uploader",multiple:!0,previewStep:!1,imagesOnly:!1})).done((function(e){Promise.all(e.files()).catch((function(e){return s&&s.remove(),l.compile({template:a.params.direct_upload.error_template,item:{error:e,localisation:u.strings},callback:function(e){a.el.querySelector(".stry-direct-upload-main").appendChild(e.el)}}),{error:e}})).then((function(e){var t;if(!e.hasOwnProperty("error")){t=e,"instagram"===p.tab&&(p.author={id:t[0].sourceInfo.user_id,user_name:t[0].sourceInfo.username,display_name:t[0].sourceInfo.username});for(var a=p.files.length,r=0;r<t.length;r++)p.files.push({id:t[r].uuid,public_url:t[r].cdnUrl,source:t[r].sourceInfo.source,type:t[r].isImage?"image":"video"}),"instagram"===t[r].sourceInfo.source&&(p.files[a+r].description=t[r].sourceInfo.caption.replace(/"/g,"&quot;"),p.files[a+r].source_url=t[r].sourceInfo.public_page,p.files[a+r].likes={count:t[r].sourceInfo.like_count});S(),c++,b(c,{files:p.files})}}))})).onTabVisibility((function(e,t){"file"===p.tab&&(l.compile({template:a.params.direct_upload.loading_template,item:{localisation:u.strings},callback:function(e){a.el.querySelector(".stry-direct-upload-main").appendChild(e.el),s=new STRY.loader(a,"[data-stry-loader]")}}),r.resolve())})).fail((function(e){console.log("ERROR: ",e)}))},w=function(){p.author.id||(""===p.author.user_name?p.errors.user_name=u.strings.please_enter_name:(p.author.display_name=p.author.user_name,delete p.errors.user_name),""!==p.author.email&&p.author.email.match(d)?delete p.errors.email:p.errors.email=u.strings.please_enter_valid_email),p.author.terms_and_conditions||p.terms_disabled?delete p.errors.terms_and_conditions:p.errors.terms_and_conditions=u.strings.please_agree_to_terms_and_conditions,p.author.privacy_policy||p.terms_disabled||!a.params.direct_upload.privacy_policy_url?delete p.errors.privacy_policy:p.errors.privacy_policy=u.strings.please_confirm_privacy_policy,!p.author.additional_checkbox&&a.params.direct_upload.hasOwnProperty("additional_checkbox")&&""!=a.params.direct_upload.additional_checkbox?p.errors.additional_checkbox=!0:delete p.errors.additional_checkbox,p.website=a.el.querySelector("#stry-direct-upload-form").querySelector('input[name="website"]').value,p.living=a.el.querySelector("#stry-direct-upload-form").querySelector('input[name="living"]').checked,p.living?delete p.errors.living_check:p.errors.living_check=u.strings.please_prove_you_are_not_robot,0===Object.keys(p.errors).length?(STRY.util.request({url:a.params.direct_upload.endpoint,method:"POST",content_type:"application/json",data:JSON.stringify(p)}),S(),c++,b(c,p)):(S(),b(c,p))};return this.applyUploadCare=function(){var r=t.createElement("script");r.type="text/javascript",r.id="stst_uploadcare_script",r.src="https://ucarecdn.com/libs/widget/3.17.2/uploadcare.full.min.js",r.integrity="sha256-RIw1QGksH8N9pp5Ie4XJxpmK2I+HVuM9a8i8lvo1uyY=",r.crossOrigin="anonymous";var i=t.createElement("script");i.textContent="UPLOADCARE_LIVE = false;";var s=t.createElement("script"),n=u.code.split("-")[0];if(s.textContent='UPLOADCARE_PUBLIC_KEY = "'+a.params.direct_upload.uploadcare_publickey+'"; UPLOADCARE_LOCALE = "'+n+'";',"en"==n){var o=t.createElement("script"),l=JSON.stringify({dialog:{tabs:{file:{drag:"Drop a file here"}}}});o.textContent="UPLOADCARE_LOCALE_TRANSLATIONS = "+l,t.getElementsByTagName("body")[0].appendChild(o)}if(u.strings.direct_upload_drag_drop&&u.strings.direct_upload_choose_local_file){var c=t.createElement("script"),d={dialog:{tabs:{file:{drag:u.strings.direct_upload_drag_drop,button:u.strings.direct_upload_choose_local_file}}}},p=JSON.stringify(d);c.textContent="UPLOADCARE_LOCALE_TRANSLATIONS = "+p,t.getElementsByTagName("body")[0].appendChild(c)}t.getElementsByTagName("body")[0].appendChild(s),e.require||e.define||t.getElementsByTagName("body")[0].appendChild(r),t.getElementsByTagName("head")[0].appendChild(i)},a.addEventListener("onClicked",m),this}STRY.util.error("StoryStream -> SDK -> StoryDirectUpload -> No direct upload url parameter supplied")}else STRY.util.error("StoryStream -> SDK -> StoryDirectUpload -> No terms and conditions url parameter supplied");function T(t){return"string"!=typeof t&&t?t[e.location.host]?t[e.location.host]:"":t}}function _(a){if(!(this instanceof _))return new _(a||{});if(a){var r=this,i=!1;r.apply=function(e){var a="IMG"===e.nodeName?e:e.querySelectorAll("img")[0];if(a&&!STRY.util.isIE()){var r=t.createElement("div"),s=a.src;STRY.util.addClass(e,"stry-kenfits"),STRY.util.addClass(a,"stry-kenfits-image"),r.className="stry-kenfits-blur",r.style.backgroundImage="url('"+s+"')";var o=e.querySelector(".stry-spot-wrapper");o?(o.style.height="100%",o.insertBefore(r,a)):e.insertBefore(r,a),n(a,(function(t){if(STRY.util.addClass(e,t),i){var r=a.clientWidth,s=a.clientHeight;0===s?(s="100%",r="auto"):0===r?(s="auto",r="100%"):(s+="px",r+="px"),a.setAttribute("style","height: "+s+" !important; width: "+r+" !important;"),a.setAttribute("data-stry-height",s),a.setAttribute("data-stry-width",r)}}))}},r.applyToAll=function(e){for(var t,a=e.length;a--;)!!(t=e[a]).querySelector(".stry-kenfits-blur")||r.apply(t)};var s=function(t){var a=!!(t=t||e.event).type&&t.type,r=t.target||{};switch(a){case"mouseover":case"mouseout":var i,s=STRY.util.getClosest(r,(function(e){return STRY.util.hasClass(e,"stry-item-hover")}));s&&(i=s.querySelector(".stry-kenfits-image"))&&o(i,a)}},n=function(e,t){var a,r;a=setInterval((function(){e.naturalWidth>0&&(t&&(r=e.naturalHeight>e.naturalWidth?"stry-portrait":"stry-landscape",t(r)),clearInterval(a))}),1)},o=function(e,t){var a,r,i,s=e.parentNode,n=s.clientHeight;switch(t){case"mouseover":STRY.util.hasClass(s,"stry-portrait")?(i=e.naturalWidth/e.naturalHeight,a=n,r=Math.round(a*i)):(i=e.naturalHeight/e.naturalWidth,r=n,a=Math.round(r*i)),e.setAttribute("style","height: "+a+"px !important; width: "+r+"px !important;");break;case"mouseout":e.removeAttribute("style"),r=e.getAttribute("data-stry-width"),a=e.getAttribute("data-stry-height"),e.setAttribute("style","height: "+a+" !important; width: "+r+" !important;")}};return STRY.util.addClass(a.el,"stry-has-kenfits"),a.params.presets&&a.params.presets.kenfitsHover&&(STRY.util.addClass(a.el,"stry-has-kenfits-with-hover"),i=!0,a.el.addEventListener("mouseover",s),a.el.addEventListener("mouseout",s)),r}STRY.util.error("StoryStream -> SDK -> StoryKenFits -> Scope must be defined.")}function y(a){var r,i,s;this.willUpdatePopupMetaData=function(a){var n=t.querySelector("title"),o=t.querySelector('link[rel="canonical"]'),l=t.querySelector('meta[name="description"]');n&&(r=n.textContent,a.title&&(n.textContent=r+" - "+a.title)),o&&(i=o.href,o.href=e.location.href),l&&l.hasAttribute("content")&&a.seo_description&&(s=l.getAttribute("content"),l.setAttribute("content",a.seo_description))},this.willResetPopupMetaData=function(){var e=t.querySelector("title"),a=t.querySelector('link[rel="canonical"]'),n=t.querySelector('meta[name="description"]');e&&(e.textContent=r),a&&(a.href=i),n&&n.hasAttribute("content")&&n.setAttribute("content",s)}}function g(a,r,i){if(!(this instanceof g))return new g(a,r,i||{});var s=this;s.popup=r,s.data=i,s.supportsNativeSmoothScroll="scrollBehavior"in t.documentElement.style,s.imageEl=s.popup.querySelector(".stry-main-image"),e.innerWidth<900?s.wrapper=s.popup.querySelector(".stry-visual-smartgoal-wrapper.mobile")?s.popup.querySelector(".stry-visual-smartgoal-wrapper.mobile"):s.popup.querySelector(".stry-visual-smartgoal-wrapper"):s.wrapper=s.popup.querySelector(".stry-visual-smartgoal-wrapper.desktop")?s.popup.querySelector(".stry-visual-smartgoal-wrapper.desktop"):s.popup.querySelector(".stry-visual-smartgoal-wrapper"),s.inner=s.wrapper.querySelector(".stry-visual-smartgoal-list"),s.leftButton=s.wrapper.querySelector(".stry-visual-smartgoal-list-button.left"),s.rightButton=s.wrapper.querySelector(".stry-visual-smartgoal-list-button.right"),s.items=s.wrapper.querySelectorAll(".stry-visual-smartgoal"),s.spots=[];var n=0,o=0,l=0,c=function(t,a,r,i){for(var s=r/100,n=0,o=0;n<=a;)e.setTimeout(d,n,t,o,s,i),n+=a/100,o++};function d(e,t,a,r){e.scrollLeft=a*t+r}var p,u=function(){s.inner.clientWidth<s.inner.scrollWidth&&s.wrapper.classList.add("has-right-button"),s.inner.addEventListener("scroll",(function(e){s.inner.scrollLeft>=s.inner.scrollWidth-s.inner.offsetWidth-24?(s.wrapper.classList.remove("has-right-button"),s.rightButton.tabIndex=-1):0==s.inner.scrollLeft?(s.wrapper.classList.remove("has-left-button"),s.leftButton.tabIndex=-1):(s.wrapper.classList.add("has-left-button"),s.wrapper.classList.add("has-right-button"),s.rightButton.tabIndex=0,s.leftButton.tabIndex=0)})),s.leftButton.onclick=m,s.rightButton.onclick=f},m=function(){l-1>0?(l--,s.supportsNativeSmoothScroll?s.inner.scrollTo({left:s.items[l].offsetLeft-24,behavior:"smooth"}):c(s.inner,250,s.items[l].offsetLeft-24-s.inner.scrollLeft,s.inner.scrollLeft)):l-1==0&&(l=0,s.supportsNativeSmoothScroll?s.inner.scrollTo({left:0,behavior:"smooth"}):c(s.inner,250,-s.inner.scrollLeft,s.inner.scrollLeft))},f=function(){if(l+1<s.items.length){var e=0;++l>1&&(e=24),s.supportsNativeSmoothScroll?s.inner.scrollTo({left:s.items[l].offsetLeft-e,behavior:"smooth"}):c(s.inner,250,s.items[l].offsetLeft-(s.inner.scrollLeft+e),s.inner.scrollLeft)}},_=function(e){e.sizes&&e.sizes.original&&e.sizes.original.width&&e.sizes.original.height&&(n=e.sizes.original.width,o=e.sizes.original.height,STRY.util.addLoadEvent(s.imageEl,(function(){y(s.data.visual_smartgoals),h(),a.addEventListener("onResized",h)})))},y=function(e){for(var a=e.length,r=0;r<a;r++)if(e[r].has_coords&&e[r].coords&&e[r].coords.x&&e[r].coords.y){var i=t.createElement("div");i.classList.add("stry-spot"),i.textContent=e[r].index,s.spots.push({el:i,originalCoords:e[r].coords,applied:!1})}},h=function(){for(var t=s.spots.length,a=0;a<t;a++){var r=s.imageEl.parentNode.clientWidth-s.imageEl.clientWidth,i=s.imageEl.parentNode.clientHeight-s.imageEl.clientHeight,l=(s.spots[a].originalCoords.x+r/2)/(n+r)*100,c=(s.spots[a].originalCoords.y+i/2)/(o+i)*100;if("contain"==e.getComputedStyle(s.imageEl).getPropertyValue("object-fit")){var d=s.imageEl.naturalWidth/s.imageEl.naturalHeight,p=s.imageEl.height*d,u=s.imageEl.height;p>s.imageEl.width&&(p=s.imageEl.width,u=s.imageEl.width/d);var m=(s.imageEl.parentNode.clientHeight-u)/2,f=(s.imageEl.parentNode.clientWidth-p)/2,_=u/o,y=p/n,g=m+s.spots[a].originalCoords.y*_,h=f+s.spots[a].originalCoords.x*y;c=g/s.imageEl.parentNode.clientHeight*100,l=h/s.imageEl.parentNode.clientWidth*100}s.spots[a].el.style.left="calc("+l+"% + "+-12+"px)",s.spots[a].el.style.top="calc("+c+"% + "+-12+"px)",s.spots[a].applied||(s.imageEl.parentNode.insertBefore(s.spots[a].el,s.imageEl),s.spots[a].applied=!0)}};return 0==s.data.videos.length&&s.data.images&&1==s.data.images.length&&_(s.data.images[0]),e.innerWidth<480&&(s.popup.querySelector(".stry-visual-smartgoal-outer").style.maxHeight="0px"),((p=s.inner).scrollWidth>p.clientWidth||p.scrollHeight>p.clientHeight)&&u(),s}function h(){var a=this;a.fb_added=!1,a.initialised=!1,a.init=function(e){if(!t.getElementById("fb-root")&&!e){var r=t.body,i=t.createElement("div");i.id="fb-root",r.insertBefore(i,r.firstChild)}a.initialised=!0},a.applyXFBMLreparse=function(t){STRY.util.isIE()&&STRY.util.isIE()<9||e.setTimeout((function(){"undefined"!=typeof FB&&e.fbAsyncInit.hasRun&&FB.XFBML.parse(t)}),0)},a.addFacebookSDK=function(){var e="facebook-jssdk";if(!t.getElementById(e)){var r=null,i=t.getElementsByTagName("script")[0];(r=t.createElement("script")).setAttribute("async","true"),r.setAttribute("defer","true"),r.id=e,r.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i)}a.fb_added=!0},a.initFacebookSDK=function(){e.fbAsyncInit||(e.fbAsyncInit=function(){FB.init({xfbml:!0,version:"v4.0"})})}}function v(r){if(!(this instanceof v))return new v(r||{});if(r)if(r.params)if(r.params.api){this.items=[],this.filters=[],this.pages=0,this.page=0;var i=this,s=r.params,n=(s.no_cookies||s.no_base_cookies,"//d29qb9vav0xwuc.cloudfront.net");s.cookie_killswitch&&!0;var o,l=[],c=[],d={term:null,category:null,query:null},p=!1,u={item:null,published:null,fallback:null},m={limit:null,channel_id:null};this.loadMore=function(){"custom"===s.api.type?h({more:!1}):g({more:!0})},this.loadFallbackContent=function(e,t){m.channel_id=r.params.api.channel_id,m.limit=r.params.limit,r.params.api.channel_id=r.params.fallback_channel_id,r.params.limit=t,r.params.fallback_language_code&&(r.params.filters.tags?r.params.filters.tags.push({url_name:e}):r.params.filters.tags=[{url_name:e}]),r.params.filters.products=[],g({more:!1,fallback_request:!0})};this.resetAndReload=function(){this.items=[],this.pages=0,this.page=0,"custom"===s.api.type?h({more:!1}):g({more:!1})},this.loadNew=function(){STRY.util.transmit(r,"onLoadingItems",{target:r.el,data:a}),S()},this.getFilters=function(){return this.filters},this.poll=function(){var e=k();STRY.util.transmit(r,"onPollingItems",{target:r.el,data:a}),STRY.util.request({url:e,cache:!1,method:"GET",success:function(e){A(i,e),y(i)},error:function(e){A(i,e)}})},this.getItemById=function(e){return e?_(e):a},this.loadItemById=function(e,t){if(!e)return a;b(e,t)};var f=function(t){switch(!!(t=t||e.event).type&&t.type){case"onForceRedraw":i.resetAndReload();break;case"searchApply":!function(e,t,a){this.items=[],this.pages=0,this.page=0,d.term=e,d.category=t,d.query=a,p=!0,g({more:!0})}(t.detail.term,t.detail.category,t.detail.param);break;case"searchClear":!function(){this.items=[],this.pages=0,this.page=0,d.term=null,d.category=null,d.query=null,p=!0,g({more:!0})}()}},_=function(e){var t,r,s=i.items.length;for(e=e?e.toString():a;s--;)(t=i.items[s].content_block_id)&&e===t.toString()&&(r=i.items[s]);return r},y=function(e){var t=s.polling;t&&t>=5e3?(clearTimeout(o),o=setTimeout((function(){u.item||u.published?y(e):e.poll()}),t)):t&&t<5e3&&STRY.util.error("StoryStream -> SDK -> StoryStream -> Polling interval cannot be set to a value of less than 5000 (5 seconds)")},g=function(e){if(s.pdp_data_layer&&s.dynamic_product_page_mode&&(!s.filters.productGroup||s.filters.productGroup.length<1)&&(!s.filters.products||s.filters.products.length<1)){var t={target:r.el,data:[],filters:s.filters};STRY.util.transmit(r,"onLoadingComplete",t)}else{var n=k(e),o=s.api.type;e.fallback_request?u.fallback=n:u.published=n,STRY.util.transmit(r,"onLoadingItems",{target:r.el,data:a}),STRY.util.request({url:n,cache:!1,method:"GET",success:function(t,a){STRY.util.transmit(r,"refreshLogOutTimer",{}),R(i,t,a),"published"!==o&&"app.hashtag_battle"!==o&&"app.storystream_tv"!==o||e.more||y(i)},error:function(e,t){R(i,e,t)}})}},h=function(e){var t,n=function(e,t){for(var a=s.api.environment+s.api.endpoints[e].url,r=Object.keys(s.api.endpoints[e].parameters),i=r.length;i--;)a+="&"+r[i]+"="+s.api.endpoints[e].parameters[r[i]];return a}(t=e.more&&s.api.endpoints.more?"more_items":e.item?"single_item":"all_items");u.published=n,STRY.util.transmit(r,"onLoadingItems",{target:r.el,data:a}),STRY.util.request({url:n,cache:!1,csrf_token:s.api.endpoints[t].csrf_token,method:s.api.endpoints[t].method||"GET",data:JSON.stringify(s.api.endpoints[t].data),content_type:"application/json",success:function(e,t){R(i,e,t)},error:function(e,t){R(i,e,t)}})},S=function(){var e=!1;if(l.length>0){for(var t=l.length;t--;)i.items.unshift(l[t]);e=!0}c!=i.filters&&(i.filters=c,e=!0),e&&STRY.util.transmit(r,"onLoadingComplete",{target:r.el,data:l,filters:c,newItems:!0}),T()},b=function(e,t){var s;i.items.length;if(e=e?e.toString():a,STRY.util.transmit(r,"onItemLoading",{target:r.el,data:a}),s=_(e))Y(i,s,t);else{var n=k({item:e});u.item=n,STRY.util.request({url:n,cache:!1,method:"GET",success:function(e,a){Y(i,e,t,a)},error:function(e,a){Y(i,e,t,a)}})}},k=function(a){var o,l,c,u;if(void 0!==r.params.hasDeeplinkCategories&&r.params.hasDeeplinkCategories&&(u=void 0!==r.params.customCategoryUrl&&r.params.customCategoryUrl?r.params.customCategoryUrl:"stst_cat:",c=[],l=(o=STRY.util.getUrlPrefix()).indexOf(u)>-1))for(var m=o.split(u)[1].split("/")[0].split(","),f=0;f<m.length;f++)STRY.util.containsObjectValue("url_name",m[f].toLowerCase(),c)||c.push({url_name:m[f].toLowerCase()});var _,y,g,h=s.api.type,v=function(){return-1!==["published","channel","channel_files"].indexOf(h)?a&&a.more?STRY.endpoints[h].all:a&&a.item?(g=a.item,STRY.endpoints[h].item):0===i.items.length?STRY.endpoints[h].all:a.fallback_request?STRY.endpoints[h].all:(y=i.items[0].content_block_id,STRY.endpoints[h].since):"livescreen"===h||"app.hashtag_battle"===h||"app.storystream_tv"===h?STRY.endpoints[h]:void STRY.util.error("StoryStream -> SDK -> StoryStream -> Invalid API configuation")};if(-1===["app.hashtag_battle","app.storystream_tv","channel","channel_files"].indexOf(h)?_=STRY.formatter.string(s.api.environment+v(),{story_name:s.api.story,access_token:s.api.token}):-1!==["channel","channel_files"].indexOf(h)?("//live.storystream.it"===s.api.environment&&(s.api.environment=n),_=STRY.formatter.string(s.api.environment+v(),{story_name:s.api.story,channel_id:s.api.channel_id,workflow_state:s.api.workflow_state?s.api.workflow_state:"live",access_token:s.api.token})):("//live.storystream.it"===s.api.environment&&(s.api.environment=n),_=s.api.external_config_enabled&&"app.storystream_tv"==h?STRY.formatter.string(s.api.storyboard_service_location+"{app_id}?access_token={access_token}",{access_token:s.api.token,app_id:s.api.app_id}):STRY.formatter.string(s.api.environment+v(),{story_name:s.api.story,access_token:s.api.token,app_id:s.api.app_id})),g)_=STRY.formatter.string(_,{item_id:g});else{if(y&&(_=STRY.formatter.string(_,{since_id:y})),a&&a.more&&i.page&&i.page<=i.pages&&(p&&(i.page=0),_+="&page="+i.page),!y&&s.limit&&s.limit>0&&(_+="&rpp="+s.limit),s.filters){if(void 0!==r.params.hasDeeplinkCategories&&r.params.hasDeeplinkCategories&&l&&""!==c[0].url_name&&(r.filterScope.categories=c),r.params.use_custom_category_filters){let e=r.params.category_filters.filter(e=>e.enabled);e.length&&"stry-emm-all"!==e[0].url_name&&!r.filterScope.categories&&(r.filterScope.categories=[{url_name:e[0].url_name}])}var S=r.filterScope.categories&&r.filterScope.categories.length?r.filterScope.categories:s.filters.categories,b=r.filterScope.tags&&r.filterScope.tags.length?r.filterScope.tags:s.filters.tags,k=r.filterScope.types&&r.filterScope.types.length?r.filterScope.types:s.filters.types,w=r.filterScope.media_types&&r.filterScope.media_types.length?r.filterScope.media_types:s.filters.media_types,T=s.filters.products&&s.filters.products.length?s.filters.products:[],C=s.filters.productGroup?s.filters.productGroup:null;if(s.hasQueryTags){var R=Object.fromEntries(new URLSearchParams(e.location.search).entries());if(R.stst_tags){var A=R.stst_tags.split(",");b||(b=[]),A.forEach(e=>{b.push({url_name:e})})}}if(S){_+="&categories=";for(var Y=0;Y<S.length;Y++)Y>0&&(_+=","),_+=S[Y].url_name}if(b||T){if(_+="&tags=",b)for(var x=0;x<b.length;x++)x>0&&(_+=","),_+=b[x].url_name;if(T){"homebase"==r.params.api.story&&(_+="&pdp_id="),b&&b.length&&T.length&&(_+=",");for(var E=0;E<T.length;E++)E>0&&(_+=","),_+=T[E]}}if(k){_+=!r.params.api.type||"channel"!=r.params.api.type&&"channel_files"!=r.params.api.type?"&types=":"&feedTypes=";for(var L=0;L<k.length;L++)L>0&&(_+=","),_+=!r.params.api.type||"channel"!=r.params.api.type&&"channel_files"!=r.params.api.type?k[L].url_name:k[L].url_name.toLowerCase()}if(w){_+="&media_types=";for(var O=0;O<w.length;O++)O>0&&(_+=","),_+=w[O].name}C&&(_+="&product_group="+C)}y||(_+="&all_media=true")}if(r.params.market_specific)if("1366"==r.params.api.story_id){var I=function(e){if(""==e)return{};for(var t={},a=0;a<e.length;++a){var r=e[a].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}(e.location.search.substr(1).split("&")),q=encodeURIComponent(location.origin.replace("http://","//").replace("https://","//")+location.pathname);if(e.self!==e.top&&t.referrer.length>0){let e=new URL(t.referrer);q=encodeURIComponent(e.origin.replace("http://","//").replace("https://","//")+e.pathname)}I.hasOwnProperty("glCountry")&&(q+=encodeURIComponent("?glCountry="+I.glCountry)),I.hasOwnProperty("glCurrency")&&(q+=encodeURIComponent("?glCurrency="+I.glCurrency)),_+="&market="+q}else if("2328"==r.params.api.story_id){var D=location.host,M="en-gb";try{M=location.pathname.split("/")[1]}catch(e){}_+="&market="+D+"/"+M}else if("2524"==r.params.api.story_id){D=location.host,M="";try{M=location.pathname.split("/")[1]}catch(e){}_+=M?"&market="+D+"/"+M:"&market="+D}else _+="&market="+location.host;if("digital-magazine"==r.params.type&&(_+="&feedTypes=custom,review"),"news-hub"==r.params.type&&(_+="&feedTypes=custom"),s.query&&(_+=s.query),-1==_.indexOf(n)&&-1==_.indexOf("//d26ms2o5zr3dwc.cloudfront.net")||(_=_.replace("/api/","/")),d.term&&d.query&&d.category)switch(d.query){case"q":case"tags":case"text":case"category":case"aura":case"metadata":case"smart_goal":case"brand":_+="&"+d.query+"="+d.term;break;case"media_types":case"feedTypes":"Custom Article"==d.category?d.category="article":"Text Items"==d.category&&(d.category="text"),_+="&"+d.query+"="+d.category,_+="&q="+d.term}return _},w=function(e){if(s.filters||-1!==["channel","channel_files"].indexOf(s.api.type)){for(var t=-1!==["channel","channel_files"].indexOf(s.api.type)?STRY.resources.ce_filter_types:STRY.resources.filter_types,a=0;a<t.length;a++){var n=t[a];s.filters&&s.filters[n]?i.filters[n]=s.filters[n]:i.filters[n]=e[n]}r.params.emm&&i.filters.categories.unshift({name:"all",url_name:"stry-emm-all",data:{}})}return i.filters},T=function(){i.page>i.pages?STRY.util.transmit(r,"onNoMoreItems",null):i.page<=i.pages&&STRY.util.transmit(r,"onMoreItemsAvailable",null)},C=function(e){e&&e.blocks&&(i.pages=e.total_pages,!i.page&&i.pages<1?(i.page=0,i.pages=0):i.page&&1!==i.pages?i.page<=i.pages&&(i.page+=1):i.page=2)},R=function(e,t,a){var i="string"==typeof t?JSON.parse(t):t,n=[],o="string"==typeof u.published&&a&&a.url&&u.published===a.url.replace("http://","//").replace("https://","//"),l="string"==typeof u.fallback&&a&&a.url&&u.fallback===a.url.replace("http://","//").replace("https://","//"),c=s&&s.api&&"app.storystream_tv"==s.api.type&&"string"==typeof u.published&&a&&a.url&&a.url===u.published;if(o||l||c){if(!i.status&&0!==i.status){var d,f=JSON.parse(t),_=s.api.type,y=[],g=0;if(s.sharing&&(f.share_url=s.sharing.url_query),-1!==["published","channel","channel_files"].indexOf(_))if(C(f),y=STRY.formatter.blocks(f,r,0==e.items.length),0===e.items.length)e.items=y;else for(d=y.length;d--;)e.items.push(y[g]),g++;else if("livescreen"===_)y=f.items,e.items=y;else if("app.hashtag_battle"===_)y=f,e.items=y;else if("app.storystream_tv"===_)y=f,e.items=y;else if("custom"===_&&s.api.data_formatter_method)if(y=s.api.data_formatter_method(f.items,!1,!1,r),0===e.items.length)e.items=y;else for(d=y.length;d--;)e.items.push(y[g]),g++;n=w(f.meta),i=y}var h={target:r.el,data:i,filters:n};h.refresh=!!p,(o||c)&&STRY.util.transmit(r,"onLoadingComplete",h),l&&STRY.util.transmit(r,"onFallbackLoadingComplete",h),p&&(p=!1),T(),o&&(u.published=!1),l&&(u.fallback=!1,r.params.api.channel_id=m.channel_id,r.params.limit=m.limit)}},A=function(e,t){var i,n=[],o=JSON.parse(t),d=s.api.type?s.api.type:a;"published"===d?(i=STRY.formatter.blocks(o,r),l=i,n=w(o.meta),c=n):"app.storystream_tv"!==d&&"app.hashtag_battle"!==d||(i=JSON.parse(t)),STRY.util.transmit(r,"onPollingComplete",{target:r.el,data:i,filters:n})},Y=function(e,t,a,i){var n="string"==typeof t?JSON.parse(t):t;!("string"==typeof u.item&&i&&i.url&&u.item===i.url.replace("http://","//").replace("https://","//"))&&i||(n.status||n.sdk||(n.share_url=s.sharing.url_query,STRY.formatter.blocks(n,r)),(!n.slug_name&&a||!a&&n.slug_name)&&(n={status:404}),a&&n.slug_name!==a&&(n={status:404}),STRY.util.transmit(r,"onItemLoadingComplete",{target:r.el,data:n}),u.item=!1)};STRY.util.connection((function(e){e.online&&("custom"==s.api.type?h({more:!1}):g({more:!1}))})),r.addEventListener("onForceRedraw",f),r.addEventListener("searchApply",f),r.addEventListener("searchClear",f)}else STRY.util.error("StoryStream -> SDK -> StoryStream -> No API details supplied");else STRY.util.error("StoryStream -> SDK -> StoryStream -> No parameters supplied");else STRY.util.error("StoryStream -> SDK -> StoryStream -> Scope must be defined.")}function S(e){if(doT)if(e){var a={},r="//s3-eu-west-1.amazonaws.com/templates.storystream.it/";this.compile=function(e){var r=STRY.util.slugify(e.template),s=t.createElement("div");a[r]?(s.htmlContent(a[r](e.item)),e.callback({el:s.children.length>1?s.children:s.children[0],html:a[r](e.item),params:e})):i(e.template,(function(t){t.length?(s.htmlContent(a[r](e.item)),e.callback({el:s.children.length>1?s.children:s.children[0],html:a[r](e.item),params:e})):e.callback({error:t,params:e})}))},this.prefetchTemplate=function(e,t){var r=STRY.util.slugify(e.template);a[r]||i(e.template,t||function(){})};var i=function(e,t){var i=STRY.util.slugify(e);".html"==e.slice(-5)?(e.indexOf(r)>-1&&(e=e.replace(r,"//d7c4jjeuqag9w.cloudfront.net/")),STRY.util.request({url:e,method:"GET",success:function(r){try{a[i]=doT.template(r),t(r)}catch(a){t({code:a}),console.warn(a),console.warn('StoryStream -> SDK -> Renderer -> Invalid template: "'+e+'"')}},error:function(a){t({code:404}),console.warn('StoryStream -> SDK -> Renderer -> Server error: "'+e+'"')}})):(a[i]=doT.template(e),t(e))}}else STRY.util.error("StoryStream -> SDK -> StoryRenderer -> Scope must be defined.");else STRY.util.error("StoryStream -> SDK -> StoryRenderer -> doT template engine not found.")}function b(t){var a=function(a){var i=!!(a=a||e.event).type&&a.type;switch(a=a.detail?a.detail:a,i){case"onClicked":if(t.params.use_custom_category_filters&&!t.params.category_filters.some(e=>"stry-emm-all"==e.url_name&&e.enabled)&&a.data.element.classList.contains("selected"))return;"filterClick"===a.data.action?r(a.data):"filterClearClick"===a.data.action&&r()}},r=function(e){var a,r;if(e&&e.element){t.params.can_multiselect_categories||t.resetFilters();var n=e.element,o=n.getAttribute(STRY.resources.data_filter_name),l=n.getAttribute(STRY.resources.data_filter_url),c=STRY.util.hasClass(n,"selected"),d=o.split("-");a=d[0];var p=d[1];if(void 0!==t.filterScope[a]&&""!==t.filterScope[a]||(t.filterScope[a]=[]),c||STRY.util.containsObjectValue("url_name",l,t.filterScope[a]))for(var u=0;u<t.filterScope[a].length;u++)t.filterScope[a][u].url_name==l&&t.filterScope[a].splice(u,1);else{if(t.filterScope[a].push({name:p,url_name:l}),!t.params.can_multiselect_categories){var m=t.el.querySelector(".stry-categories .stry-menu-link.selected");m&&m.classList.remove("selected")}n.classList.add("selected")}"stry-emm-all"==l&&(t.filterScope.categories=[]),"categories"===a&&void 0!==t.params.hasDeeplinkCategories&&t.params.hasDeeplinkCategories&&(r=i(),s(r))}else{for(var f=0,_=0;_<STRY.resources.filter_types.length;_++)a=STRY.resources.filter_types[_],f+=t.filterScope[a].length;if(0===f)return;t.resetFilters()}t.params.emm&&"storyboard"!==t.params.app_type?(t.filterScope.categories.length?t.el.classList.add("has-selected-emm-category"):t.el.classList.remove("has-selected-emm-category"),t.el.classList.remove("stry-emm-loaded"),t.el.querySelectorAll(".stry-item").forEach((function(e){e.classList.add("stry-item-loading")})),t.el.style.minHeight=t.el.offsetHeight+"px",setTimeout((function(){t.resetDOM(),t.resetAndReload()}),600)):(t.resetDOM(),t.resetAndReload())},i=function(){for(var e=[],a=0;a<t.filterScope.categories.length;a++)e.push(t.filterScope.categories[a].url_name);return e.join()},s=function(a){var r,i,s;r=void 0!==t.params.customCategoryUrl&&t.params.customCategoryUrl?t.params.customCategoryUrl:"stst_cat:",e.location.href.indexOf(r)>-1?(s=[(i=e.location.href.split(r))[0]+r+a,i[1].split("/")[1]].join("/"),e.location.href=s):(s=STRY.util.getUrlPrefix(r)+r+a,e.location.href=s)};!function(){if(t.addEventListener("onClicked",a),t.params&&t.params.prefilteredCategories&&t.params.prefilteredCategories.length){t.filterScope.categories=[];for(var e=0;e<t.params.prefilteredCategories.length;e++)t.filterScope.categories.push({url_name:t.params.prefilteredCategories[e]})}}()}function k(){var r=/\s+/,i=/[\n\t\r]/g,s={};HTMLElement.prototype.htmlContent=function(e){for(var t=(new DOMParser).parseFromString(e,"text/html").body;t.hasChildNodes();)this.appendChild(t.firstChild)},this.debounce=function(e,t,a,r){var i;return function(){var s=this,n=arguments,o=function(){i=null,STRY.util.isIE()&&STRY.util.isIE()<9&&(n=r||[{}]),a||e.apply(s,n)},l=a&&!i;clearTimeout(i),i=setTimeout(o,t),l&&e.apply(s,n)}},this.transmit=function(e,t,a){var r=new CustomEvent(t,{detail:a});e.dispatchEvent(r)},this.request=function(e){if(e.url in s&&e.success)e.success(s[e.url]);else{void 0!==e.cache&&"boolean"==typeof e.cache||(e.cache=!0);var t=new XMLHttpRequest;if(t.open(e.method||"GET",e.url,!0),e.data&&t.setRequestHeader&&t.setRequestHeader("Content-type",e.content_type||"application/x-www-form-urlencoded"),e.csrf_token&&t.setRequestHeader&&t.setRequestHeader("X-CSRFToken",e.csrf_token),t.url=e.url,t.onreadystatechange!==a){if(t.onreadystatechange=function(){4==t.readyState&&(200!=t.status&&304!=t.status?e.error&&e.error(t):(e.cache&&(s[e.url]=t.responseText),e.success&&e.success(t.responseText,t)))},4==t.readyState)return;t.send(e.data)}else null===t.onload&&(t.onload=function(){e.cache&&(s[e.url]=t.responseText),e.success&&e.success(t.responseText,t)},t.onprogress=function(){},t.ontimeout=function(){},t.onerror=function(){},setTimeout((function(){t.send(e.data)}),0))}},this.connection=function(e){e&&e({online:!0})},this.formatString=function(e,t){return STRY.formatter.string(e,t)},this.shuffle=function(e){for(var t,a,r=e.length;0!==r;)a=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[a],e[a]=t;return e},this.searchObjectArray=function(e,t,a){return e.filter((function(e){try{return e[t].toLowerCase().indexOf(a.toLowerCase())>-1}catch(e){return!1}}))},this.utf8_encode=function(e){if(null==e)return"";var t,a,r,i=e+"",s="";t=a=0,r=i.length;for(var n=0;n<r;n++){var o=i.charCodeAt(n),l=null;if(o<128)a++;else if(o>127&&o<2048)l=String.fromCharCode(o>>6|192,63&o|128);else if(55296!=(63488&o))l=String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128);else{if(55296!=(64512&o))throw new RangeError("Unmatched trail surrogate at "+n);var c=i.charCodeAt(++n);if(56320!=(64512&c))throw new RangeError("Unmatched lead surrogate at "+(n-1));o=((1023&o)<<10)+(1023&c)+65536,l=String.fromCharCode(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}null!==l&&(a>t&&(s+=i.slice(t,a)),s+=l,t=a=n+1)}return a>t&&(s+=i.slice(t,r)),s},this.hasTouchEvents=function(){return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)},this.isIOS=function(){return!(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.isIE())},this.isIE=function(){var e=navigator.userAgent.toLowerCase(),a=(t.getElementsByTagName("body")[0],!1);return-1!=e.indexOf("msie")?a=parseInt(e.split("msie")[1]):-1!=e.indexOf("trident")&&-1!=e.indexOf("rv:")&&(a=parseInt(e.split("rv:")[1])),a},this.isWebKit=function(){var e=/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent);return e?parseFloat(e[1]):null},this.getQueryString=function(t){var a=new RegExp("[?&]"+t+"=([^&]*)").exec(e.location.search);return a&&decodeURIComponent(a[1].replace(/\+/g," "))},this.getUrlPrefix=function(t){var a,r;return(a=void 0!==t&&t?e.location.hash.indexOf("/"+t):e.location.hash.indexOf("/id:"))>-1?"#"!==(r=e.location.hash.substr(0,a))&&"#!"!==r||(r+="/"):e.location.hash?"/"!==(r=e.location.hash).charAt(r.length-1)&&(r+="/"):r="#!/",r},this.replacePrefix=function(e){var t,a=this.getUrlPrefix(),r=a.substr(a.length-1);return a&&a.length&&"#!/"!==a?(t=e.substring(e.indexOf("id:")),t="/"!==r?a+"/"+t:a+t):e},this.getDataAttribute=function(e,t,r){var i=r||5,s=e;if(s.nodeName&&"a"===s.nodeName.toLowerCase()&&!s.getAttribute(t)&&s.getAttribute("href"))return{element:s,action:"default"};for(;i--;){if(t==STRY.resources.data_track&&s&&s.getAttribute(STRY.resources.data_action))return{element:s,action:s.getAttribute(t)};if(s&&"#document"!==s.nodeName&&s.getAttribute(t))return{element:s,action:s.getAttribute(t)};s.parentNode&&(s=s.parentNode)}return{element:a,action:a}},this.getClosest=function(e,t){return e&&(t(e)?e:this.getClosest(e.parentNode,t))},this.getHostUrl=function(e){if(!e)return!1;var t=e.replace(/^((\w+:)?\/\/[^\/]+\/?).*$/,"$1"),a=t.substr(t.indexOf("://")+3);return(a=a.replace("www.","")).length>3&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1)),a},this.formatPublishedItems=function(e){return STRY.formatter.blocks(e)},this.getDateObject=function(e){var t=this.getCrossBrowserDate(e),a={char3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r={char3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],full:["January","February","March","April","May","June","July","August","September","October","November","December"]};return{unix:t.getTime(),date:{day:{number:t.getDate(),char3:a.char3[t.getDay()],full:a.full[t.getDay()]},month:{number:t.getMonth()+1,char3:r.char3[t.getMonth()],full:r.full[t.getMonth()]},year:{char2:t.getFullYear().toString().slice(-2),full:t.getFullYear()}},time:{milliseconds:t.getMilliseconds(),seconds:t.getSeconds(),minutes:t.getMinutes(),hours:t.getHours()}}},this.getCrossBrowserDate=function(e){var t=Date.parse(e);return new Date(t)},this.getViewport=function(){var a=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,r=e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight;return this.isIOS()&&(a=screen.width,r=screen.height,"undefined"==e.orientation||90!=e.orientation&&-90!=e.orientation||(a=screen.height,r=screen.width)),{w:a,h:r}},this.truncate=function(e,t,a,r){if(e&&"string"==typeof e&&t){var i=(e=r?e.substring(e.indexOf(a),e.indexOf(r)):e.substring(e.indexOf(a))).replace(/(<([^>]+)>)/gi,"");if(i.length>t){var s;i.length;for(s=t;s<i.length;s++)if(" "===i[s])return i.substring(0,s)+"...";return i.substring(0,t)+"..."}return e}},this.slugify=function(e){return e=e.replace(/[^\w\-]/g,"-").replace(/^\-/,"").toLowerCase()},this.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return"string"==typeof e?e.replace(/[&<>"']/g,(function(e){return t[e]})):e},this.element=function(e){if(e)return"string"==typeof e?t.getElementById(e):"string"==typeof e.nodeName?e:void 0},this.addClass=function(e,t){if(t&&"string"==typeof t){var a=(t||"").split(r);if(1===e.nodeType)if(e.className){for(var i=" "+e.className+" ",s=e.className,n=0,o=a.length;n<o;n++)i.indexOf(" "+a[n]+" ")<0&&(s+=" "+a[n]);e.className=s.replace(/^\s+|\s+$/g,"")}else e.className=t}},this.removeClass=function(e,t){if(t&&"string"==typeof t||t===a){var s=(t||"").split(r);if(e&&1===e.nodeType&&e.className)if(t){t=(" "+e.className+" ").replace(i," ");for(var n=0,o=s.length;n<o;n++)t=t.replace(" "+s[n]+" "," ");e.className=t.replace(/^\s+|\s+$/g,"")}else e.className=""}},this.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},this.toggleClass=function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},this.log=function(e){STRY.debug&&"undefined"!=typeof console&&void 0!==console.log&&console.log("STRY -> "+e)},this.error=function(e){"undefined"!=typeof console&&void 0!==console.log&&("undefined"!==console.error?console.error("STRY -> "+e):this.log(e,!0))},this.warn=function(e){},this.getLength=function(e){return Object.keys(e).length},this.extend=function(){var e={},t=!1,a=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],a++);for(var i=function(a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t&&"[object Object]"===Object.prototype.toString.call(a[r])?0===Object.keys(a[r]).length?e[r]=a[r]:e[r]=STRY.util.extend(!0,e[r],a[r]):e[r]=a[r])};a<r;a++){var s=arguments[a];i(s)}return e},this.clone=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var a in e)t[a]=this.clone(e[a]);return t},this.applyConfig=function(e,t,a){var r,i={},s=STRY.util.clone(e);if(a?((i=STRY.util.extend(!0,s,a)).breakpoints&&(i.breakpoints=a.breakpoints),i.presets&&!0===i.presets.carousel&&(i.breakpoints={})):t?((i=STRY.util.extend(!0,s,t)).breakpoints&&(i.breakpoints=t.breakpoints),i.presets&&!0===i.presets.carousel&&(i.breakpoints={})):s&&(i=s),i.templates&&i.templates.location&&"string"==typeof i.templates.location&&(i.theme&&i.templates.version?("storyboard"==i.app_type&&"1.1.0"==i.templates.version&&(i.templates.version="1.2.0"),i.templates.location=STRY.formatter.string(i.templates.location,{theme:i.theme,version:i.templates.version})):i.theme&&(i.templates.location=STRY.formatter.string(i.templates.location,{theme:i.theme,version:""}))),i.direct_upload)for(r in i.direct_upload)i.direct_upload[r].indexOf&&i.direct_upload[r].indexOf("{theme}")>-1?i.direct_upload[r]=STRY.formatter.string(i.direct_upload[r],{theme:i.theme}):i.direct_upload[r].indexOf&&0===i.direct_upload[r].indexOf("html/")&&(i.direct_upload[r]=i.templates.location+i.direct_upload[r]);return i},this.applyStyles=function(e){var a,r="//s3-eu-west-1.amazonaws.com/templates.storystream.it/",i={},s=t.getElementsByTagName("head")[0],n=function(){i.loaded+=1,i.loaded===i.total&&e.callback&&(e.callback(),i.loaded=0)};if("string"==typeof e&&e.indexOf(".css")>0)(a=t.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("href",e),s.appendChild(a);else if(e.custom||e.template){var o;if(e.template&&e.template.location&&e.template.stylesheet)if(e.template.location.indexOf(r)>-1&&(e.template.location=e.template.location.replace(r,"//d7c4jjeuqag9w.cloudfront.net/")),"string"==typeof e.template.stylesheet&&e.template.stylesheet.indexOf(".css")>0)(o=e.template.stylesheet).indexOf("http")<0&&0!==o.indexOf("//")&&(o=e.template.location+o),i.loaded=0,i.total=1,(a=t.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("href",o),a.setAttribute("data-stry-type","stylesheet"),a.addEventListener("load",n),s.appendChild(a);else if("object"==typeof e.template.stylesheet&&e.template.stylesheet.length>0){var l=e.template.stylesheet.length,c=0;if(a={},i.loaded=0,i.total=e.template.stylesheet.length,l)for(;l--;)(o=e.template.stylesheet[c]).indexOf("http")<0&&0!==o.indexOf("//")&&(o=e.template.location+o),a[l]=t.createElement("link"),a[l].setAttribute("rel","stylesheet"),a[l].setAttribute("href",o),a[l].setAttribute("data-stry-type","stylesheet"),a[l].addEventListener("load",n),s.appendChild(a[l]),c+=1}if("string"==typeof e.custom&&e.custom.length>4){var d=t.createElement("style");e.preview&&(d.id="StryCustomStyles"),8===this.isIE()?setTimeout((function(){d.styleSheet.cssText=e.custom}),100):d.textContent=e.custom,s.appendChild(d)}}},this.initialiseAnalytics=function(e){"storyboard"==e.app_type?scope.params.canDualWriteGA?(STRY.AnalyticsModules[scope.params.api.app_id+":GA4"].init(e),STRY.AnalyticsModules[scope.params.api.app_id+":GA"].init(e)):STRY.AnalyticsModules[e.api.app_id].init(e):scope.params.adobe_analytics?STRY.adobeAnalytics.init(e):STRY.googleAnalytics.init(e)},this.sendTrackEvent=function(e,t,a){if(t&&a&&"storyboard"==a.app_type)try{a&&a.can_use_measure_endpoint&&STRY.MeasureEndpointModules[t].formatThenTrack(e),a&&a.canDualWriteGA?(STRY.AnalyticsModules[t+":GA4"].track(e),STRY.AnalyticsModules[t+":GA"].track(e)):STRY.AnalyticsModules[t].track(e)}catch(e){}else a&&a.adobe_analytics?STRY.adobeAnalytics.track(e):STRY.googleAnalytics.track(e)},this.getDummyContentItems=function(e,t,a,r){var i={};for(var s in e.length&&(i=JSON.parse(JSON.stringify(e[0]))),i)i.hasOwnProperty(s)&&("[object Array]"===Object.prototype.toString.call(i[s])?i[s]=[]:i[s]="");for(var n=a.length;n--;){i[a[n]]=r}for(;t--;)e.push(i);return e},this.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},this.getComputedStyle=function(t){if(e.getComputedStyle)return e.getComputedStyle(t);function a(e,t,r,i){var s,n=t[r],o=parseFloat(n),l=n.split(/\d/)[0];return i=null!==i?i:/%|em/.test(l)&&e.parentElement?a(e.parentElement,e.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==r?i:/width/i.test(r)?e.clientWidth:e.clientHeight,"em"==l?o*i:"in"==l?96*o:"pt"==l?96*o/72:"%"==l?o/100*s:o}function r(e,t){var a="border"==t?"Width":"",r=t+"Top"+a,i=t+"Right"+a,s=t+"Bottom"+a,n=t+"Left"+a;e[t]=(e[r]==e[i]==e[s]==e[n]?[e[r]]:e[r]==e[s]&&e[n]==e[i]?[e[r],e[i]]:e[n]==e[i]?[e[r],e[i],e[s]]:[e[r],e[i],e[s],e[n]]).join(" ")}function i(e){var t=e.currentStyle,i=a(e,t,"fontSize",null);for(var s in t)/width|height|margin.|padding.|border.+W/.test(s)&&"auto"!==this[s]?this[s]=a(e,t,s,i)+"px":"styleFloat"===s?this.float=t[s]:this[s]=t[s];return r(this,"margin"),r(this,"padding"),r(this,"border"),this.fontSize=i+"px",this}return i.prototype={constructor:i,getPropertyPriority:function(){},getPropertyValue:function(e){return this[e]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},function(e){return new i(e)}(t)},this.containsObjectValue=function(e,t,a){var r;for(r=0;r<a.length;r++)if(a[r][e]===t)return!0;return!1},this.nodeListToArray=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t},this.addLoadEvent=function(e,t){var a=e.onload;"function"!=typeof e.onload?e.onload=t:e.onload=function(){a&&a(),t()}},this.mergeArrays=function(e,t){return t&&t.forEach((function(t){-1==e.indexOf(t)&&e.push(t)})),e},this.clearHTML=function(e){if(e)for(;e.firstChild;)e.firstChild.remove()},this.cleanseChildElements=function(e){var a=navigator.userAgent.indexOf("Safari")>-1;if(navigator.userAgent.indexOf("Chrome")>-1&&a&&(a=!1),a)for(var r=e.el.querySelectorAll("video"),i=null,s=0;s<r.length;s++)i=t.createElement("video"),[...r[s].attributes].forEach(e=>{i.setAttribute(e.nodeName,e.nodeValue)}),r[s].replaceWith(i)},this.hasValidLVSConfig=function(e){var t=!0,a=[];return e.hasOwnProperty("lvs_settings")||(t=!1,a.push("LVS settings")),e.lvs_settings.hasOwnProperty("video")&&(e.lvs_settings.video.mp4_url||e.lvs_settings.video.live_feed_event_id)||(t=!1,a.push("Uploaded video")),e.lvs_settings.hasOwnProperty("before_show")&&e.lvs_settings.before_show.poster||(t=!1,a.push("Before show poster")),e.lvs_settings.hasOwnProperty("live_show")&&e.lvs_settings.live_show.poster||(t=!1,a.push("Live show poster")),e.lvs_settings.hasOwnProperty("after_show")&&e.lvs_settings.after_show.poster||(t=!1,a.push("After show poster")),a.length&&console.log("This Storyboard is missing the following config required to run an LVS show: "+a.join(", ")),!(!e.lvs_settings.before_show||!e.lvs_settings.before_show.poster)||t},this.updateCookieGroupsAndReload=function(e,t){STRY.current_apps.forEach(a=>{STRY["cookie_groups_enabled_"+a]||(STRY["cookie_groups_enabled_"+a]=STRY["config_"+a].cookie_groups_enabled),STRY["app_"+a]=null,Object.keys(STRY["config_"+a].cookie_groups_enabled[e]).forEach(r=>{STRY["config_"+a].cookie_groups_enabled[e][r]=t}),Object.keys(STRY["cookie_groups_enabled_"+a][e]).forEach(r=>{STRY["cookie_groups_enabled_"+a][e][r]=t}),STRY["app_"+a]=STRY.app(STRY["config_"+a])})}}function w(e){var t=/\{(\w+)\}/g,a=/\/\d+\/$/;function r(t,a,r){for(var i,s,n,o=t.length;o--;)if(t[o].sizes&&t[o].sizes.original?(s=t[o].sizes.original.height,i=t[o].sizes.original.width,t[o].sizes.original.orientation=i>s?"landscape":s>i?"portrait":"square"):(t[o].sizes.original={},t[o].sizes.original.orientation="square"),a&&a.params&&a.params.useCloudinaryDerivatives&&e.cloudinary.available(t[o].original)){0==t[o].original.indexOf("//")&&(t[o].original="https:"+t[o].original),a.params.customCloudinaryPreviewTransform&&e.cloudinary.set_custom_preview_transform(a.params.customCloudinaryPreviewTransform),n=a.params.customCloudinaryTransformsEnabled&&a.params.customCloudinaryTransforms?e.cloudinary.get_simple_urls(t[o].original,a.params):e.cloudinary.get_urls(t[o].original,a.params,a.base_dimension,r),"storyboard"==a.params.app_type&&"carousel"==a.params.type?t[o].preview=n.emm_carousel:a.params.presets&&a.params.presets.carousel?t[o].preview=n.carousel:(t[o].preview=n.preview,"digital-magazine"!=a.params.type&&"news-hub"!=a.params.type||(t[o].digital_magazine_small=n.digital_magazine_small,t[o].digital_magazine_large=n.digital_magazine_large)),a.params.customCloudinaryPreviewTransform&&(t[o].preview=n.customPreview);var l=t[o].preview.indexOf(t[o].original);t[o].preview_info_url="https:"+t[o].preview.substring(0,l)+"fl_getinfo/"+t[o].preview.substring(l),t[o].detail=n.detail}else t[o].preview=t[o].original,t[o].detail=t[o].original,"digital-magazine"!=a.params.type&&"news-hub"!=a.params.type||(t[o].digital_magazine_small=t[o].original,t[o].digital_magazine_large=t[o].original)}function i(e){return e.display_date.date.day.number+" "+e.display_date.date.month.char3+" "+e.display_date.date.year.full+" "+e.title}function s(e){return"youtube"!=e.feed_class&&"youku"!=e.feed_class&&(!(1==e.images.length&&!e.videos.length)&&(!(1==e.videos.length&&!e.images.length)&&(e.images.length+e.videos.length!=2||0!=e.images[0].order||!e.videos.length||0!=e.videos[0].order&&void 0!==e.videos[0].order)))}this.string=function(e,a){if(void 0===e||"string"!=typeof e)return"";if(void 0===a)return e;return e.replace(t,(function(e,t,r,i,s,n){return a[t]||e}))},this.blocks=function(e,t,a){if(e.meta&&e.meta.types)for(var r=e.meta.types.length;r--;)"Youtube"===e.meta.types[r].name&&(e.meta.types[r].name="YouTube"),"Rss"===e.meta.types[r].name&&(e.meta.types[r].name="RSS");for(var i=[],s=e.blocks?e.blocks:[{content_items:[e]}],n=0,o=s.length;n<o;n++)i=i.concat(this.formatDataArray(s[n].content_items,e.share_url,s[n].content_block_id,t,a,n));return i},this.formatDataArray=function(t,n,o,l,c,d){for(var p=[],u=0,m=t.length;m--;){var f=t[u];if(!f.sdk){if(f.content_block_id=o||f.content_item_id,n&&(f.share_url=n),f.created=e.util.getDateObject(f.created_date),f.published=e.util.getDateObject(f.publish_date),l&&l.params&&l.params.date_type&&"created"==l.params.date_type?f.display_date=f.created:f.display_date=f.published,f.feed_type&&(f.feed_class=f.feed_type.toLowerCase()),f.origin&&(f.feed_class=f.origin.toLowerCase()),"facebook"==f.feed_class&&f.videos.length>0&&!e.facebook.fb_added&&e.facebook.initialised&&(e.facebook.addFacebookSDK(),e.facebook.initFacebookSDK()),f.feed_class&&"flickr"==f.feed_class&&(f.url=f.url.replace(a,"/")),l.params.username_links_to_post&&f.url){var _=f.url.split("/");"Facebook"==f.feed_type?f.url=_[0]+"//"+_[2]+"/"+_[3]:f.url=_[0]+"//"+_[2]+"/"+f.author}f.title=e.util.escapeHTML(f.title),f.feed_class.startsWith("twitter")&&(f.title=i(f)),"instagram"!==f.feed_class&&"instagram-user"!==f.feed_class&&"instagram-tagged"!==f.feed_class&&"instagram-hashtag"!==f.feed_class&&"youtube"!=f.feed_class||(f.body=f.body.replace(/(?:\r\n|\r|\n)/g,"<br/>"),null===f.author&&(f.author=f.source)),f.headline&&(f.review_headline=f.headline);var y=!!f.title&&e.util.truncate(f.title,50,l.params.snippet_truncate_start,l.params.snippet_truncate_end),g=!!f.body&&e.util.truncate(f.body,160,l.params.snippet_truncate_start,l.params.snippet_truncate_end),h=!!f.body&&e.util.truncate(f.body,260,l.params.snippet_truncate_start,l.params.snippet_truncate_end);if(y&&(f.headline=y),g&&(f.snippet=g),h&&(f.long_snippet=h),l.params.retain_full_length_title&&(f.headline=!!f.title&&f.title),f.images.length>0||void 0!==f.images.original){if(void 0!==f.images.original){var v=f.images;f.images=[],f.images.push(v)}c&&"digital-magazine"==l.params.type?r(f.images,l,0==d||1==d):r(f.images,l,!1)}if(f.feed_class?"link"===f.feed_class||"image"===f.feed_class||"embed"===f.feed_class||"quote"===f.feed_class||f.feed_class.startsWith("twitter")?f.is_shareable=!1:f.is_shareable=!0:f.is_shareable=!1,f.feed_class?"link"===f.feed_class||"image"===f.feed_class||"embed"===f.feed_class||"quote"===f.feed_class||f.feed_class.startsWith("twitter")?f.is_deeplink=!1:f.is_deeplink=!0:f.is_deeplink=!1,l&&l.params&&(!0===l.params.retainArticleHeroImage||void 0!==l.params.no_base_cookies&&l.params.no_base_cookies)&&"Custom"===f.feed_type&&(f.content_type="image",f.videos=[],l.params.no_base_cookies)){f.body=f.body.replace(/<div class=\"video-container\">/gi,'<div class="video-container" style="display: none;">')}"video"===f.content_type&&(f.has_touch=e.util.hasTouchEvents()),"youtube"===f.feed_class||"vimeo"===f.feed_class||"custom"===f.feed_class||"url"===f.feed_class?f.view_class="is-article-view":f.feed_class.startsWith("twitter")?f.view_class="is-tweet-view":"link"===f.feed_class?f.view_class="is-promo-view":"image"===f.feed_class?f.view_class="is-image-view":"quote"===f.feed_class?f.view_class="is-quote-view":"embed"===f.feed_class?f.view_class="is-image-view":f.view_class="is-post-view";var S=e.util.getHostUrl(f.url);if(S&&S.length>3&&(f.source_host=S),f.tags){f.smart_goals={meta:{count:0,has_images:!1},data:[]};for(var b=f.tags.length;b--;){var k=f.tags[b];if("smart-goal"==k.type&&(f.smart_goals.data.push(k),!f.smart_goals.meta.has_images&&k.data.image&&(f.smart_goals.meta.has_images=!0)),"filename"==k.url_name)try{var w=k.data.value.split("."),T=w.length;f.file_extension=w[T-1]}catch(e){continue}}f.smart_goals.meta.count=f.smart_goals.data.length}if(l&&l.params&&!l.params.useLargeAvatars&&f.avatar_url&&(f.avatar_url=f.avatar_url+"?thumbnail"),f.avatar_url&&(f.avatar_url=f.avatar_url.replace("//live.storystream.it/av-p/","//d3pnu6wv3ahoms.cloudfront.net/")),l.params.no_base_cookies||l.params.hasOwnProperty("cookie_groups_enabled")&&!l.params.cookie_groups_enabled.social_media.vimeo){var C=f.videos.length;if(C)for(;C--;)if(f.videos[C].url.startsWith("https://player.vimeo.com")){f.videos=[],f.content_type="image";break}}if(s(f)){l.params.templates&&"//www.porsche.com/all/storystream/templates/social-hub/"==l.params.templates.location&&"instagram"==f.feed_class&&(f.videos=[],f.content_type="image");for(var R=[],A=f.videos.length,Y=0;Y<A;Y++){var x=f.videos[Y];void 0!==f.images[x.order]&&(x.thumbnail=f.images[x.order].original),R[x.order]=x}for(var E=0,L=f.images.length,O=!1;E<L;E++){var I=f.images[E],q=void 0===I.order?E:I.order;"Custom"==f.feed_type&&(I.order>0&&0==E&&(O=!0),O&&(q-=1)),void 0===R[q]&&(R[q]=f.images[E])}if(f.media=R,l.params.ccsb||f.toggle_custom_story_item)for(u=0;u<f.media.length;u++)if(void 0===f.media[u].embedded){f.cover_image=f.media.splice(u,1)[0];break}}(l.params.ccsb||f.toggle_custom_story_item)&&!f.cover_image&&f.images.length&&(f.cover_image=f.images[0]);var D="";D=f.feed_type.indexOf("instagram")>-1?"Instagram":"app-direct-upload"==f.feed_type?"Uploaded":f.feed_type.charAt(0).toUpperCase()+f.feed_type.slice(1);var M=l.language?l.language:l.params.language;M&&M.strings.post_by&&(f.author?f.alt_text=D+" "+M.strings.post_by+" "+f.author:f.alt_text=D+" "+M.strings.post_by+" "+M.strings.unknown_user),f.sdk=!0}if(l.params.hasOwnProperty("cookie_groups_enabled")){var P=[];if(Object.keys(l.params.cookie_groups_enabled.social_media).forEach(e=>{"vimeo"==e||l.params.cookie_groups_enabled.social_media[e]||P.push(e)}),P.indexOf(f.feed_class)>-1){if("facebook"!=f.feed_class||f.videos.length)continue;p.push(f)}else p.push(f)}else if(!l.params.cookie_killswitch&&l&&l.params&&void 0!==l.params.no_base_cookies&&!l.params.no_base_cookies)if("storyboard"==l.params.app_type)p.push(f);else{if(!l.params.emm&&"review"==f.feed_type)continue;p.push(f)}else{if("youtube"===f.feed_class||"facebook"===f.feed_class&&f.videos.length||!l.params.emm&&"review"==f.feed_type&&"storyboard"!==l.params.app_type)continue;p.push(f)}l&&l.params&&void 0!==l.params.no_cookies&&l.params.no_cookies&&f.videos.length&&"Facebook"===f.feed_type&&(f.content_type="image"),u+=1}return p}}function T(e,a){if(!(this instanceof T))return new T(e,a||{});var s,l=t.createElement("div");l.version="9.58.0",l.namespace="STRY",l.params=STRY.util.applyConfig(e,STRY.config,a),l.el=STRY.util.element(l.params.element_id),l.filterScope={},l.hasTouchEvents=STRY.util.hasTouchEvents(),l.poll=function(){s.poll()},l.loadMoreItems=function(){s.loadMore()},l.resetAndReload=function(){l.reset&&l.reset(),s.resetAndReload()},l.loadFallbackContent=function(e){s.loadFallbackContent(l.params.fallback_language_code,e)},l.redraw=function(){STRY.util.transmit(l,"onForceRedraw")},l.loadNewItems=function(){s.loadNew()},l.getItemById=function(e){return s.getItemById(e)},l.getItems=function(){return s.items},l.getFilters=function(){return s.getFilters()},l.loadItemById=function(e,t){e||!l.closeOpenItems?s.loadItemById(e,t):l.closeOpenItems()},l.setQuery=function(e){"string"==typeof e&&(l.params.query=e)},l.connection=function(e){STRY.util.connection(e)},l.resetFilters=function(){for(var e=0;e<STRY.resources.filter_types.length;e++){var t=STRY.resources.filter_types[e];l.filterScope[t]=[]}};var c=function(e){var t=!!e.type&&e.type;l.params.events&&l.params.events[t]&&"function"==typeof l.params.events[t]&&l.params.events[t](e)};return function(){if(l.addEventListener("documentHasUpdated",c),l.addEventListener("documentIsReady",c),l.addEventListener("documentIsUpdating",c),l.addEventListener("controlsAreReady",c),l.addEventListener("onItemLoading",c),l.addEventListener("onItemLoadingComplete",c),l.addEventListener("onLoadingComplete",c),l.addEventListener("onLoadingItems",c),l.addEventListener("onMoreItemsAvailable",c),l.addEventListener("onNoMoreItems",c),l.addEventListener("onPollingComplete",c),l.addEventListener("onPollingItems",c),l.addEventListener("popupHasClosed",c),l.addEventListener("popupHasOpened",c),"live-video"==l.params.type||l.params.api&&(s=new STRY.stream(l)),void 0===STRY.current_apps&&(STRY.current_apps=[]),STRY.current_apps.indexOf(l.params.api.app_id)<0&&STRY.current_apps.push(l.params.api.app_id),l.params.can_use_measure_endpoint&&(STRY.hasOwnProperty("MeasureEndpointModules")||(STRY.MeasureEndpointModules={}),STRY.MeasureEndpointModules[l.params.api.app_id]||(STRY.MeasureEndpointModules[l.params.api.app_id]=new STRY.StoryMeasureEndpoint(l))),l.el){var e;for(var t in STRY.modules)STRY.util.hasClass(l.el,t)&&(e=STRY.modules[t]);e&&(e=new STRY[e](l)),new STRY.interactions(l)}if(p=l&&l.params&&l.params.analytics,u=!(l.params.cookie_killswitch||void 0!==l.params.no_base_cookies&&l.params.no_base_cookies),m=l.params.cookieless_analytics,p&&(u||!u&&m)||l.params.custom_data_layer)if("storyboard"==l.params.app_type){if(STRY.hasOwnProperty("AnalyticsModules")||(STRY.AnalyticsModules={}),STRY.hasOwnProperty("AnalyticsModulesCreated")||(STRY.AnalyticsModulesCreated={}),l.params.custom_data_layer)STRY.AnalyticsModules[l.params.api.app_id]=new o,STRY.AnalyticsModules[l.params.api.app_id].init(l),l.params.events={popupHasClosed:function(){STRY.AnalyticsModules[l.params.api.app_id].track("VWBasic_LayerClose_Click",event.detail)}};else{var a=!l.params.hasOwnProperty("cookie_groups_enabled")||l.params.cookie_groups_enabled&&l.params.cookie_groups_enabled.analytics.adobe,d=!l.params.hasOwnProperty("cookie_groups_enabled")||l.params.cookie_groups_enabled&&l.params.cookie_groups_enabled.analytics.ga;a&&l.params.adobe_analytics?STRY.AnalyticsModules[l.params.api.app_id]=new r:d&&(!function(){var e=l.params.analytics.id&&(l.params.analytics.ga4_measurement_id||l.params.GA4ID);return l.params.canDualWriteGA=e,e}()?l.params.analytics.ga4_measurement_id||l.params.GA4ID?STRY.AnalyticsModulesCreated[l.params.api.app_id]||(STRY.AnalyticsModules[l.params.api.app_id]=new n):STRY.AnalyticsModulesCreated[l.params.api.app_id]||(STRY.AnalyticsModules[l.params.api.app_id]=new i):STRY.AnalyticsModulesCreated[l.params.api.app_id]||(STRY.AnalyticsModules[l.params.api.app_id+":GA4"]=new n,STRY.AnalyticsModules[l.params.api.app_id+":GA"]=new i))}!STRY.AnalyticsModulesCreated[l.params.api.app_id]&&d?(l.params.canDualWriteGA?(STRY.AnalyticsModules[l.params.api.app_id+":GA4"].init(l),STRY.AnalyticsModules[l.params.api.app_id+":GA"].init(l)):STRY.AnalyticsModules[l.params.api.app_id]&&STRY.AnalyticsModules[l.params.api.app_id].init(l),STRY.AnalyticsModulesCreated[l.params.api.app_id]=!0):STRY.AnalyticsModulesCreated[l.params.api.app_id]&&d&&(l.params.canDualWriteGA?(STRY.AnalyticsModules[l.params.api.app_id+":GA4"].updateConsent(l),STRY.AnalyticsModules[l.params.api.app_id+":GA"].updateConsent(l)):STRY.AnalyticsModules[l.params.api.app_id].updateConsent(l))}else l.params.adobe_analytics?STRY.adobeAnalytics.init(l):STRY.googleAnalytics.init(l);var p,u,m;if(l&&l.params&&!l.params.cookie_killswitch){if(!l.params.no_base_cookies){var f=l.params.noFacebookFBroot,_=l.params.no_cookies||l.params.no_base_cookies;void 0!==_&&_||STRY.facebook.init(f)}l.params.no_base_cookies&&l.params.one_trust_website&&l.params.cookie_categories&&void 0===STRY.oneTrustInitialised&&(STRY.oneTrustInitialised=new STRY.OneTrustHandler(l))}l.smartGoalHandler||(l.smartGoalHandler=new STRY.smartgoals(l))}(),l}STRY.adobeAnalytics=new r,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryAdobeAnalyticsTasks=r),STRY.googleAnalytics=new i,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryGoogleAnalyticsTasks=i),STRY.googleAnalytics4=new n,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryGoogleAnalytics4Tasks=n),STRY.custom_data_layer=new o,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryCustomDataLayer=o),e.STRY&&(STRY.cloudinary=new l(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.CloudinaryResources=l),STRY.endpoints={livescreen:"/api/v2/{story_name}/search/latestpublished/.json?access_token={access_token}",published:{all:"/api/v2/{story_name}/search/published/.json?access_token={access_token}",since:"/api/v2/{story_name}/search/published/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v2/{story_name}/block/{item_id}.json?access_token={access_token}"},channel:{all:"/api/v4/{story_name}/{channel_id}/search/{workflow_state}/.json?access_token={access_token}",since:"/api/v4/{story_name}/{channel_id}/search/{workflow_state}/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v4/{story_name}/{channel_id}/{workflow_state}/item/{item_id}.json?access_token={access_token}"},channel_files:{all:"/api/v4/{story_name}/{channel_id}/{workflow_state}/search/all/.json?access_token={access_token}",since:"/api/v4/{story_name}/{channel_id}/{workflow_state}/search/all/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v4/{story_name}/{channel_id}/{workflow_state}/item/all/{item_id}.json?access_token={access_token}"},"app.hashtag_battle":"/api/v2/{story_name}/apps/battle/{app_id}/.json?access_token={access_token}","app.storystream_tv":"/api/v2/{story_name}/apps/tv/{app_id}/.json?access_token={access_token}"},STRY.StoryMeasureEndpoint=c,"undefined"!=typeof module&&"undefined"!=typeof _exports_&&null!==_exports_&&(exports.StoryMeasureEndpoint=c),STRY.interactions=d,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryInteractions=d),STRY.fadeCarousel=p,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFadeCarousel=p),STRY.mediaCarousel=u,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryMediaCarousel=u),STRY.loader=m,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryLoader=m),STRY.directUpload=f,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryDirectUpload=f),STRY.kenfits=_,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryKenFits=_),e.STRY&&(STRY.seo=new y(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StorySeo=y),STRY.VisualSmartgoals=g,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryVisualSmartgoals=g),STRY.facebook=new h,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFacebookTasks=h),STRY.resources={class_load_new_ready:"stry-new-items-ready",class_load_new_count:"stry-new-items-count",class_loading_message_wrapper:"stry-loading-message-wrapper",class_loading_message:"stry-loading-message",class_load_new:"stry-load-new",class_load_more:"stry-load-more",class_lookbook:"stry-lookbook",class_story_loading:"stry-loading",class_story_no_more_items:"stry-no-more-items",class_story_no_items_available:"stry-no-items-available",class_content:"stry-content",class_content_mask:"stry-content-mask",class_content_list:"stry-item-list",class_content_item:"stry-item",class_item_loading:"stry-item-loading",class_item_loaded:"stry-item-loaded",class_popup:"stry-popup",class_popup_item:"stry-popup-item",class_popup_enabled:"stry-can-popup",class_popup_disabled:"stry-no-popup",class_popup_active:"stry-is-popup",class_stry_in_focus:"stry-in-focus",class_sharing_active:"is-sharing",class_filter_container:"stry-filters",class_has_touch_events:"stry-has-touch-events",class_no_touch_events:"stry-no-touch-events",class_will_crop:"stry-will-crop",class_document_ready:"stry-document-ready",class_image_carousel:"stry-media-carousel",class_hub_carousel:"stry-hub-carousel",class_hub_carousel_outside_buttons:"stry-hub-carousel-outside-buttons",class_hub_carousel_wrapper:"stry-hub-carousel-content-wrapper",class_hub_carousel_button:"stry-hub-carousel-button",class_has_direct_upload:"stry-hub-has-direct-upload",class_direct_upload_popop:"stry-direct-upload-popup",class_direct_upload_popup_active:"stry-is-direct-upload-popup",class_fade_carousel:"stry-fade-carousel",class_fade_carousel_item:"stry-fade-carousel-item",class_fade_carousel_active_item:"stry-fade-active-item",class_fade_carousel_previous:"stry-fade-prev",class_fade_carousel_next:"stry-fade-next",class_fade_carousel_control:"stry-fade-carousel-control",data_block_id:"data-stry-block",data_action:"data-stry-action",data_direction:"data-stry-direction",data_link:"data-stry-link",data_filter_name:"data-stry-filter",data_filter_url:"data-stry-filter-url",data_track:"data-stry-track",filter_types:["types","categories"],ce_filter_types:["media_types","types","tags","categories"]},STRY.stream=v,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryStream=v),STRY.renderer=S,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryRenderer=S),function(t){"use strict";t.smartgoals=function a(r){if(!(this instanceof a))return new a(r||{});if(r){var i={visualSmartgoalsToggled:!0,initialToggle:!1,popupOpen:!1,willAnimateSmartGoals:function(){var e,t=(e="storyboard"==r.params.app_type?r.el.querySelectorAll(".list-item.has-smart-goals"):r.el.querySelectorAll(".smartgoal-enabled .stry-grid-smartgoal")).length;t&&function a(r){setTimeout((function(){s(e[t-r]),--r&&a(r)}),300)}(t)}},s=function(e){if("storyboard"==r.params.app_type)r.params.no_promoted_panes&&0!=r.params.no_promoted_panes||(t.util.addClass(e,"promoted"),setTimeout((function(){t.util.removeClass(e,"promoted")}),3600));else{var a=t.util.getClosest(e,(function(e){return t.util.hasClass(e,"stry-grid-pane-item")}));t.util.addClass(a,"stry-hovered"),t.util.addClass(a,"promoted"),t.util.addClass(a,"auto-promoted"),setTimeout((function(){t.util.removeClass(a,"stry-hovered"),t.util.removeClass(a,"promoted"),t.util.removeClass(a,"auto-promoted")}),3600)}};return i.willConfigureSmartGoalHeights=function(e){for(var a=e&&e.is_hub?r.el.querySelectorAll(".stry-item-hover.smartgoal-hover"):r.el.querySelectorAll(".list-item.has-smart-goals"),i=a.length;i--;){var s=a[i].querySelectorAll(".stry-grid-smartgoal")[0];s&&s.offsetHeight>46&&t.util.addClass(a[i],"has-dual-line-smart-goals"),s&&r.params.smartgoals_always_visible&&t.util.addClass(a[i],"permanent-smartgoals")}},i.willHandlePopupSmartGoals=function(){var e=r.el.querySelectorAll(".stry-popup");e.length&&e[0].classList.add("active-smartgoals")},i.willToggleVisualSmartgoalState=function(){i.visualSmartgoalsToggled=!i.visualSmartgoalsToggled,i.toggleVisualSmartgoals()},i.toggleVisualSmartgoals=function(){for(var t=r.el.querySelectorAll(".stry-popup-outer"),a=t.length;a--;){if(e.innerWidth<=480){var s=t[a].querySelector(".stry-visual-smartgoal-outer");s&&(i.visualSmartgoalsToggled?s.style.maxHeight=s.scrollHeight+"px":s.style.maxHeight=0)}i.visualSmartgoalsToggled?t[a].classList.remove("visual-smartgoals-hidden"):t[a].classList.add("visual-smartgoals-hidden")}},i.willCollectVisualSmartgoalsWithHotspot=function(e){for(var t=e.length,a=[],r=0;r<t;r++)"smart-goal"==e[r].type&&e[r].data&&e[r].data.image&&e[r].data.has_coords&&e[r].data.co_ords&&e[r].data.co_ords.hasOwnProperty("x")&&e[r].data.co_ords.hasOwnProperty("y")&&a.push(e[r]);return a},i.willCollectVisualSmartgoalsCount=function(e){for(var t=e.length,a=0,r=0;r<t;r++)"smart-goal"==e[r].type&&e[r].data&&e[r].data.image&&a++;return 0==a&&(a=!1),a},i.willCollectVisualSmartgoals=function(a){for(var i=a.length,s=0,n=[],o=0;o<i;o++)if("smart-goal"==a[o].type&&a[o].data&&a[o].data.image){s+=1;var l={title:e.innerWidth<900?t.util.truncate(a[o].data.description,18):t.util.truncate(a[o].data.description,50),button_text:a[o].data.text,image:encodeURIComponent(a[o].data.image),index:s,url:a[o].data.url,url_name:a[o].url_name,price:!!a[o].data.price&&a[o].data.price,has_coords:!!a[o].data.has_coords&&a[o].data.has_coords,coords:!!a[o].data.has_coords&&a[o].data.co_ords,custom_html:!!a[o].data.custom_html&&a[o].data.custom_html,live_video_timeline:!!a[o].data.live_video_timeline&&a[o].data.live_video_timeline};a[o].data.hasOwnProperty("catalogue")&&(l.title=a[o].text,l.button_text=r.language?r.language.strings.product_button_text:r.params.language.strings.product_button_text),n.push(l)}return n.length||(n=!1),n},i}t.util.error("StoryStreamSmartGoals -> scope must be defined.")}}(this.STRY=this.STRY||{}),function(r){"use strict";r.expandedTab=function i(s,n){if(!(this instanceof i))return new i(s||{});var o,l,c={};c.currentItemId;var d,p,u=!0,m=0,f=s.params.use_expanded_view?1024:480;c.willRenderExpandedItems=function(t,a,r){var i;for(l=a.slice(0),o=0,i=l.length;i--;)if(t.id&&t.id==l[i].id||t.content_item_id==l[i].content_item_id){o=i;break}c.currentItemId=l[o].content_item_id,u=!r||!r.no_paginator,s.params.fullscreen_expanded_view&&(u=!1);var d=!Y(),p=!x();if(e.innerWidth>f){u&&S(),d&&n.showItem(l[o-1],"left-side"),p&&n.showItem(l[o+1],"right-side");var m=setInterval((function(){var e=s.el.querySelectorAll(".stry-popup-outer").length;(2==e&&(!d||!p)||3==e&&d&&p)&&(clearInterval(m),v(),s.smartGoalHandler&&setTimeout((function(){s.smartGoalHandler.willHandlePopupSmartGoals()}),1500))}),100)}else{n.showItem(l[0]);var _=setInterval((function(){if(s.el.querySelectorAll(".stry-popup").length){clearInterval(_);for(var e=l.length;e-- >1;)n.showItem(l[e],e)}}),100)}},c.tabLeft=function(){var t,i,d,m=s.el.querySelectorAll(".stry-popup-outer"),f=s.el.querySelector(".stry-popup"),_=m.length;for(o-=1,c.currentItemId=l[o].content_item_id,g(),A(),C(),u&&w();_--;)m[_].classList.add("can-animate"),m[_].classList.contains("right-side")?d=m[_]:m[_].classList.contains("left-side")?t=m[_]:i=m[_];i.classList.add("right-side"),i.classList.remove("active");var y=i.querySelectorAll("video");if(y.length&&y.forEach(e=>{e.controls=!1}),h(i),b(i,"right"),t.classList.remove("left-side"),t.style.transform="none",t.style.pointerEvents="none",setTimeout((function(){t.style.pointerEvents="auto"}),600),t.classList.add("active"),s.params.use_expanded_view&&(t.style.visibility="visible",f.classList.add("is-animating"),setTimeout((function(){t.focus(),i.style.visibility="hidden",f.classList.remove("is-animating");let e=t.querySelector(".stry-expanded-item-autoplayable-video");if(e){let t=e.play();t!==a&&t.catch(t=>{e.muted=!0,e.play()})}t.querySelector(".stry-expanded-item-hotspot")?(s.el.querySelector(".toggle-hotspot-labels-button").style.display="block",s.el.querySelector(".toggle-hotspot-labels-button").tabIndex=0):(s.el.querySelector(".toggle-hotspot-labels-button").style.display="none",s.el.querySelector(".toggle-hotspot-labels-button").tabIndex=-1)}),600)),k(),d&&(d.style.transform="translateX(100%)",d.parentNode.removeChild(d)),setTimeout((function(){n.showItem(l[o-1],"left-side");var e=t.querySelectorAll("video");e.length&&e.forEach(e=>{e.controls=!0})}),600),s.params.analytics&&r.util.sendTrackEvent(["Content Item","tab",l[o].content_item_id],s.params.api.app_id,s.params),s.params.custom_data_layer){var v={},S="";S=e.pagData?l[o+1]:l[o],v.action="Content Item, tab, "+S.content_item_id,v.destination_url=S.deeplink_url,v.title=S.title,v.direction="previous-slide",r.util.sendTrackEvent(v,s.params.api.app_id,s.params)}s.params.seo_utils_enabled&&(r.seo.willResetPopupMetaData(),r.seo.willUpdatePopupMetaData(l[o])),s.params.accessibility_features&&(p.close(),p=null,setTimeout((function(){var e=s.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(p=new aria.Dialog(e,null,e.querySelector('.tab-button[data-stry-action="tab.left')))}),700))},c.tabRight=function(){var t,i,d,m=s.el.querySelectorAll(".stry-popup-outer"),f=s.el.querySelector(".stry-popup"),_=m.length;for(o+=1,c.currentItemId=l[o].content_item_id,g(),A(),C(),u&&w();_--;)m[_].classList.add("can-animate"),m[_].classList.contains("right-side")?d=m[_]:m[_].classList.contains("left-side")?t=m[_]:i=m[_];i.classList.add("left-side"),i.classList.remove("active");var y=i.querySelectorAll("video");if(y.length&&y.forEach(e=>{e.controls=!1}),h(i),b(i,"left"),d.classList.remove("right-side"),d.style.transform="none",d.style.pointerEvents="none",setTimeout((function(){d.style.pointerEvents="auto"}),600),d.classList.add("active"),s.params.use_expanded_view&&(d.style.visibility="visible",f.classList.add("is-animating"),setTimeout((function(){i.style.visibility="hidden",f.classList.remove("is-animating"),d.focus();let e=d.querySelector(".stry-expanded-item-autoplayable-video");if(e){let t=e.play();t!==a&&t.catch(t=>{e.muted=!0,e.play()})}d.querySelector(".stry-expanded-item-hotspot")?(s.el.querySelector(".toggle-hotspot-labels-button").style.display="block",s.el.querySelector(".toggle-hotspot-labels-button").tabIndex=0):(s.el.querySelector(".toggle-hotspot-labels-button").style.display="none",s.el.querySelector(".toggle-hotspot-labels-button").tabIndex=-1)}),600)),k(),t&&(t.style.transform="translateX(-100%)",t.parentNode.removeChild(t)),setTimeout((function(){n.showItem(l[o+1],"right-side");var e=d.querySelectorAll("video");e.length&&e.forEach(e=>{e.controls=!0})}),600),s.params.analytics&&r.util.sendTrackEvent(["Content Item","tab",l[o].content_item_id],s.params.api.app_id,s.params),s.params.custom_data_layer){var v={},S="";S=e.pagData?l[o-1]:l[o],v.action="Content Item, tab, "+S.content_item_id,v.destination_url=S.deeplink_url,v.title=S.title,v.direction="next-slide",r.util.sendTrackEvent(v,s.params.api.app_id,s.params)}s.params.seo_utils_enabled&&(r.seo.willResetPopupMetaData(),r.seo.willUpdatePopupMetaData(l[o])),s.params.accessibility_features&&(p.close(),setTimeout((function(){p=null;var e=s.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(p=new aria.Dialog(e,null,e.querySelector('.tab-button[data-stry-action="tab.right')))}),700))};var _=function(){m++,e.innerWidth<=f&&m==l.length&&((d=s.el.querySelectorAll(".stry-popup")[0]).setAttribute("style","overflow-x:scroll !important; opacity: 1 !important"),d.scrollLeft=e.innerWidth*o,S(),T(d),s.smartGoalHandler&&setTimeout((function(){s.smartGoalHandler.willHandlePopupSmartGoals()}),1500),m=0)},y=function(){var e,t,a;return s.params.use_expanded_view?s.params.fullscreen_expanded_view?(t=(e=s.el.querySelector(".stry-popup-outer.active")).querySelector('.stry-tab-button[data-stry-action="tab.left"]'),a=e.querySelector('.stry-tab-button[data-stry-action="tab.right"]')):(t=s.el.querySelector('.stry-tab-button[data-stry-action="tab.left"]'),a=s.el.querySelector('.stry-tab-button[data-stry-action="tab.right"]')):(t=(e=s.el.querySelector(".stry-popup-outer.active")).querySelector('.tab-button[data-stry-action="tab.left"]'),a=e.querySelector('.tab-button[data-stry-action="tab.right"]')),t.style.display="block",t.setAttribute("tabindex",0),a.style.display="block",a.setAttribute("tabindex",0),[t,a]},g=function(){var e=y();e[0].style.display="none",e[0].setAttribute("tabindex",-1),e[1].style.display="none",e[1].setAttribute("tabindex",-1)},h=function(e){var t=e.querySelectorAll("video");t.length&&t[0].pause()},v=function(){var e=y();Y()?(e[0].classList.add("inactive"),e[0].setAttribute("tabindex",-1)):e[0].setAttribute("tabindex",0),x()?(e[1].classList.add("inactive"),e[1].setAttribute("tabindex",-1)):e[1].setAttribute("tabindex",0),s.params.accessibility_features&&(p=null,setTimeout((function(){var e=s.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(p=new aria.Dialog(e,null,s.el.querySelector(".stry-popup-outer.active .stry-desktop-meta .stry-author a")))}),100))},S=function(){if(E())w();else{var a=t.createElement("div");a.className="stry-paginator-container";for(var r,i=l.length,n=l.length-1;i--;)(r=t.createElement("div")).className="stry-paginator-entry",i==n-o&&(r.className+=" active"),a.appendChild(r);if(a.appendChild(r),e.innerWidth>f)var c=setInterval((function(){var e=s.el.querySelectorAll(".stry-popup");e.length&&(clearInterval(c),e[0].appendChild(a))}),100);else s.el.appendChild(a)}},b=function(t,a){var r="left"==a?"translateX(-":"translateX(+";if(s.params.use_expanded_view)var i="100%";else{var n=t.querySelectorAll(".stry-popup-item")[0].offsetWidth;i=e.innerWidth>900?e.innerWidth-(e.innerWidth-n)/2-30+"px":"100%"}t.style.transform=r+i+")"},k=function(){var e=y();Y()?(e[0].classList.add("inactive"),e[0].setAttribute("tabindex",-1)):1==o&&(e[0].classList.remove("inactive"),e[0].setAttribute("tabindex",0)),o==l.length-2?(e[1].classList.remove("inactive"),e[1].setAttribute("tabindex",0)):x()&&(e[1].classList.add("inactive"),e[1].setAttribute("tabindex",-1))},w=function(){for(var e=s.el.querySelectorAll(".stry-paginator-entry"),t=e.length;t--;)e[t].classList.remove("active");e[o]&&e[o].classList.add("active")},T=function(e){var t=r.util.debounce(R,100,!1,[{type:"scroll"}]);r.tabberScrollListener=t.bind(this),e.addEventListener("scroll",r.tabberScrollListener,{capture:!0,passive:!0})},C=function(){"storyboard"==s.params.app_type?s.params.hasDeeplink&&!s.appStoreMode&&history.pushState(null,null,l[o].deeplink_url):s.params.hasDeeplink&&!s.appStoreMode&&(e.location.hash=r.util.replacePrefix(l[o].deeplink_url))},R=function(){var t,a=s.el.querySelectorAll(".stry-popup")[0];e.clearTimeout(t),t=setTimeout((function(){var t=Math.floor(a.scrollLeft/e.innerWidth);if(t>o||o>t){if(o=t,c.currentItemId=l[o].content_item_id,u&&w(),C(),A(),s.params.analytics&&r.util.sendTrackEvent(["Content Item","tab",l[o].content_item_id],s.params.api.app_id,s.params),s.params.custom_data_layer){var i={};i.action="Content Item, tab, "+l[o].content_item_id,i.destination_url=l[o].deeplink_url,i.title=l[o].title,i.direction="swipe-slide",r.util.sendTrackEvent(i,s.params.api.app_id,s.params)}s.params.seo_utils_enabled&&(r.seo.willResetPopupMetaData(),r.seo.willUpdatePopupMetaData(l[o])),a.querySelectorAll(".stry-popup-outer:not(.active) video").forEach(e=>{e.pause()})}}),50)},A=function(){s.el.classList.contains("stry-is-sharing")&&s.el.classList.remove("stry-is-sharing");for(var e=s.el.querySelectorAll(".stry-popup-item"),t=e.length;t--;)e[t].classList.remove("is-sharing")},Y=function(){return 0==o},x=function(){return o==l.length-1},E=function(){return 0!==s.el.querySelectorAll(".stry-paginator-container").length};return c.willHandleKeyRequest=function(e){[37,39].indexOf(e.keyCode)>-1&&e.preventDefault()},s.addEventListener("popupHasOpened",_),c}}(this.STRY=this.STRY||{}),STRY.filters=b,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFilters=b),function(t){"use strict";t.OneTrustHandler=function a(r){if(!(this instanceof a))return new a(r||{});var i=function(){"undefined"==typeof OneTrust?setTimeout((function(){i()}),500):(OneTrust.OnConsentChanged(s),s())},s=function(){if(e.OnetrustActiveGroups||e.OptanonActiveGroups){var t=e.OnetrustActiveGroups?e.OnetrustActiveGroups.split(","):e.OptanonActiveGroups.split(","),a=0;r.params.cookie_categories.forEach((function(e){t.includes(e)&&(a+=1)})),a===r.params.cookie_categories.length?n(!1):n(!0)}},n=function(e){t.current_apps.forEach(a=>{t["config_"+a].no_base_cookies!=e&&(t["cookie_preference_"+a]||(t["cookie_preference_"+a]={}),t["app_"+a]=null,t["config_"+a].no_base_cookies=e,t["config_"+a].cookieless_analytics=e,t["cookie_preference_"+a].no_base_cookies=e,t["cookie_preference_"+a].cookieless_analytics=e,t["app_"+a]=t.app(t["config_"+a]))})};return i(),!0}}(this.STRY=this.STRY||{}),e.STRY&&(STRY.util=new k),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryUtilities=k),e.STRY&&(STRY.formatter=new w(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFormatter=w),STRY.init=T,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.JavaScriptSDK=T)}(window,document); function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function storyboard(e){if(!(this instanceof storyboard))return new storyboard(e||{});var t={},a=null,r={app_type:"storyboard",analytics:{id:"UA-XXXXXXXX-1"},api:{story:"storyboard-test-cont",workflow_state:"live",story_id:"1885",app_id:"9251",environment:"//live.storystream.it",channel_id:"5ef4b9f1fc57bd02b5018ab4",token:"b5964baa7a61e760c84b4b8ccbe04cca6fdbf3de",version:"v4",type:"channel"},breakpoints:[{width:480,columns:1,rows:2},{width:760,columns:2,rows:2},{width:1200,columns:3,rows:2}],element_id:"stry-wrapper",limit:9,isChina:!1,roi_enabled:!1,sharing:{url_query:"rel=widget~id=0",app_id:"0",app_type:"widget"},theme:"advanced",templates:{version:"1.2.0",location:"//d7c4jjeuqag9w.cloudfront.net/grid/{theme}/{version}/",html:{item:"html/item.html",popup:"html/popup-item.html",menu:"html/menu.html",custom_story_item_popup:"html/story-popup-item.html"},stylesheet:"styles.css"},no_base_cookies:!1,cookie_killswitch:!1,show_grid_brand_messages:!1,show_popup_brand_messages:!1,track_storyboard_interactions:!0,smartgoals_always_visible:!1,seo_utils_enabled:!1,smartgoals_same_window:!1,show_smartgoal_hotspots_inline:!1,filters:{show:!1},direct_upload_enabled:!1,direct_upload:{button_template:"html/direct-upload-button.html",popup_template:"html/direct-upload-popup.html",tab_template_1:"html/direct-upload-tab-one.html",tab_template_upload_care:"html/direct-upload-tab-upload-care.html",tab_template_2:"html/direct-upload-tab-two.html",tab_template_3:"html/direct-upload-tab-three.html",tab_template_4:"html/direct-upload-tab-four.html",loading_template:"html/direct-upload-loading.html",error_template:"html/direct-upload-error-page.html",endpoint:"http://localhost:7070",uploadcare_publickey:"demopublickey"},hasDeeplink:!0,smartgoal_adobe_attribute_value:!1,us_date_format:!1,retain_full_length_title:!1,dynamic_product_page_mode:!1,product_group_mode:!1,type:"grid",useCloudinaryDerivatives:!0,previewMode:!1,lookbook:!1,hasDeeplinkCategories:!1,fallback_channel_id:null,fallback_language_code:null,storystream_credit:{inline:{enabled:!1,colour:"dark"},expanded:{enabled:!1,colour:"light"}},shopstream_credit:{header:{enabled:!1,colour:"dark"},footer:{enabled:!1,colour:"dark"}},block_videos_until_seen:!0,transitions_enabled:!0,transition_interval:7e3,mosaic:!1,locked_ratio_mode:!1,ratio_layout:"square",max_columns:3,car_crop:!0,customCloudinaryPreviewTransform:"smart_auto_crop",gutter:8,masonry_crop_to_fade:!1,kenfits:!1,carousel_crop:!1,digi_mag_carousel_letterbox:!1,adobe_analytics:!1,adobe_analytics_config:{pagename:"eVar1",app_id:"eVar2",event_type:"eVar3",content_id:"eVar4",smg_url_name:"eVar5",smart_goal_type:"eVar6",lvs_show_time_watched:"eVar7"},carousel_button_position:"inline"},s=[],i=[],n=0;t.popupIsOpen=!1,t.appStoreMode=!1;var o=!1,l=function(){t.resetAndReload(),t.layout.resetLayout(),t.popup&&t.popup.resetPopup()},p=function(){t.layout.resetLayout(),t.popup&&t.popup.resetPopup()},d=function(e){var a=e.target||e.srcElement,r=a.getAttribute("data-stry-action"),s=a.getAttribute("data-stry-track");if(s&&c(a,s),!r){var i=a.closest("[data-stry-action]");"VIDEO"!=a.nodeName&&"stry-ff-event-blocker"!=a.classList||"grid"!=t.params.type||(i=a.closest(".list-item").getElementsByClassName("list-item-inner")[0]),i&&(r=i.getAttribute("data-stry-action"),a=i)}switch(s||c(a),r){case"popupOpen":"live-video"===t.params.type&&t.popupIsOpen&&t.params.pip_enabled?(t.el.querySelector(".stry-popup").classList.remove("stry-pip-enabled"),t.params.pip_enabled=!1,t.layout.setPipStorage(!1),t.popup.resetOverflowsOnPopup(),t.popup.setOverflowsOnPopup()):(t.popup.handleHashChangeClick(a),t.popupIsOpen=!0);break;case"popupClose":t.popup.popupOuter.classList.remove("show-hotspot-labels"),t.popup.popupOuter.classList.remove("hotspots-animation-complete"),t.popup.closePopup(a),t.popupIsOpen=!1,"live-video"===t.params.type&&(t.chatService.persistingMessages=!0,t.params.pip&&(t.el.querySelector(".stry-popup").classList.remove("stry-pip-enabled"),t.el.querySelector(".stry-popup").classList.remove("stry-live-ended"),t.params.pip_enabled=!1,t.layout.setPipStorage(!1)));break;case"tab.right":t.tabber.tabRight();break;case"tab.left":t.tabber.tabLeft();break;case"shareOpen":case"shareClose":if("live-video"==t.params.type)return;if(t.popupIsOpen){var n=a.closest(".stry-popup-outer");n.classList.contains("is-sharing")?(t.el.classList.remove("stry-is-sharing"),n.classList.remove("is-sharing")):(t.el.classList.add("stry-is-sharing"),n.classList.add("is-sharing"))}else{var o=a.closest(".stry-item");if(o.classList.contains("is-sharing"))o.classList.remove("is-sharing");else t.el.querySelectorAll(".stry-item.is-sharing").forEach((function(e){e.classList.remove("is-sharing")})),o.classList.add("is-sharing")}break;case"toggleFilterMenu":t.filterMenuHandler.toggleFilterMenu();break;case"directUploadClose":"directUploadClose"!=e.target.getAttribute("data-stry-action")&&(r=(a=e.target||e.srcElement).getAttribute("data-stry-action"));break;case"toggle.visual.smartgoals":t.smartGoalHandler.willToggleVisualSmartgoalState();break;case"moveRight":t.layout.moveRight();break;case"moveLeft":t.layout.moveLeft();break;case"openProductIndicator":if(t.inlineProductTray)if(window.innerWidth<1024){var l=a.getAttribute("data-stry-id"),p=t.items.find((function(e){return e.content_item_id==l})),d=t.smartGoalHandler.willCollectVisualSmartgoals(p.tags);t.inlineProductTray.addProducts(d),t.inlineProductTray.onOpen()}else{t.popup.popupOuter.classList.add("show-hotspot-labels");var u=("grid"==t.params.type?e.target.closest(".list-item"):e.target.closest(".stry-item")).querySelector('[data-stry-action="popupOpen"]');u&&u.click()}break;case"toggleHotspotLabels":t.popup.popupOuter.classList.contains("show-hotspot-labels")?t.popup.popupOuter.classList.remove("show-hotspot-labels"):t.popup.popupOuter.classList.add("show-hotspot-labels");break;case"collapseToPip":var m=t.popup.popupOuter.querySelector(".active.stry-popup-outer").querySelector(".stry-expanded-item-video"),f=!!m&&m.muted,h=m?m.currentTime:0;t.popup.popupOuter.classList.remove("show-hotspot-labels"),t.popup.popupOuter.classList.remove("hotspots-animation-complete"),t.popup.closePopup(a),t.popupIsOpen=!1,t.pipPlayer.stopInlinePaneVideos();var y=t.tabber.currentItemId;t.pipPlayer.assignVideo(y,f,h)}STRY.util.transmit(t,"onClicked",{target:a,event:e,data:{element:a,action:r}})},c=function(e,a){if(a||(a=e.getAttribute("data-stry-track")),(t.params.analytics||t.params.custom_data_layer||t.params.can_use_measure_endpoint)&&a&&"default"!==a)if(t.params.custom_data_layer){var r=[];r.action=a,r.href=e.href,r.destination_url=e.getAttribute("data-stry-hash"),r.title=e.title,r.smartgoal_text=e.href?e.text:"",STRY.util.sendTrackEvent(r,t.params.api.app_id,t.params)}else STRY.util.sendTrackEvent(a,t.params.api.app_id,t.params)},u=function(n){if("live-video"!=(t=STRY.init(r,e)).params.type||STRY.util.hasValidLVSConfig(t.params)){if(STRY.util.clearHTML(t.el),t.el.style.opacity="0",STRY.hasOwnProperty("popupHashChangeListeners")&&STRY.popupHashChangeListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("hashchange",STRY.popupHashChangeListeners[t.params.api.app_id]),STRY.hasOwnProperty("layoutResizeListeners")&&STRY.layoutResizeListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("resize",STRY.layoutResizeListeners[t.params.api.app_id]),STRY.hasOwnProperty("layoutVisibilityListeners")&&STRY.layoutVisibilityListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("scroll",STRY.layoutVisibilityListeners[t.params.api.app_id],{capture:!0,passive:!0}),t.items=s,t.carouselItems=i,STRY.appversion="3.88.0",STRY.sdkversion=t.version,t.restart=l,t.appStoreMode=t.el.classList.contains("app-preview-window"),t.language=n,t.appStoreMode&&(t.params.use_container_breakpoints=!0),"1907"==t.params.api.story_id&&"www.boden.eu"==location.host&&STRY.util.addClass(t.el,"stry-boden-eu"),a&&t.params.pdp_xhr_config&&a.willListenForXHRProductChanges(t),a&&t.params.pdp_data_layer&&a.willListenForPageChange(t),t.renderer=new STRY.renderer(t),t.panes=STRY.panes(t),"live-video"==t.params.type&&(t.chatService=new STRY.chatService(t)),t.params.picture_in_picture){var o=t.el.hasAttribute("data-stry-pip-only");o&&(t.params.pipOnly=!0),t.pipPlayer=new STRY_Pip_player(t,o)}switch(t.params.type){case"grid":t.el.classList.add("stry-grid-layout"),t.layout=STRY.grid(t);break;case"masonry":case"digital-magazine":case"news-hub":t.el.classList.add("stry-masonry-layout"),t.layout=STRY.masonry(t);break;case"carousel":t.el.className+=" stry-carousel-layout stry-earned-media-module ",t.layout=STRY.carousel(t);break;case"live-video":t.el.classList.add("stry-live-video-layout"),t.layout=STRY.liveVideo(t)}if(t.params.accessibility_features&&(t.el.classList.add("stry-accessible-mode"),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.el.classList.add("stry-firefox")),t.params.shoppable_video&&t.el.classList.add("stry-shoppable-video"),t.smartgoalHandler=new STRY.smartgoals(t),t.popup=new STRY.popup(t),t.brandingService=new STRY.brandingService(t),STRY.util.isIE()||"live-video"===t.params.type||(t.tabber=new STRY.expandedTab(t,t.popup)),t.el.onclick=d,t.hasTouchEvents=STRY.util.hasTouchEvents(),t.hasTouchEvents?STRY.util.addClass(t.el,STRY.resources.class_has_touch_events):STRY.util.addClass(t.el,STRY.resources.class_no_touch_events),t.params.kenfits&&(t.kenfitsHandler=new STRY.kenfits(t)),t.params.direct_upload_enabled&&t.params.direct_upload.terms_url&&t.params.direct_upload.endpoint&&t.params.direct_upload.uploadcare_publickey&&!STRY.util.isIE()&&!t.params.pipOnly){t.directUploadHandler=new STRY.directUpload(t);new STRY.directUploadInterface(t)}var c=t.language?t.language:t.params.language;if((c.strings.hasOwnProperty("header")&&c.strings.header.length>0||t.params.hasOwnProperty("banner_config"))&&!t.params.pipOnly&&t.brandingService.createHeader(c.strings.header,t.params.banner_config),c.strings.hasOwnProperty("footer")&&c.strings.footer.length>0&&!t.params.pipOnly&&t.brandingService.createFooter(c.strings.footer),t.params.storystream_credit&&t.params.storystream_credit.inline.enabled&&!t.params.pipOnly&&t.brandingService.createCredit(t.el,t.params.storystream_credit.inline.colour),t.params.shopstream_credit&&t.params.shopstream_credit.footer.enabled&&!t.params.pipOnly&&t.brandingService.createCredit(t.el,t.params.shopstream_credit.footer.colour+" shop-footer",!0),t.params.filters.show&&!t.params.pipOnly){new STRY.filters(t);t.filterMenuHandler=new STRY.filtersInterface(t),STRY.util.addClass(t.el,"stry-has-filters")}t.params.inline_product_tray&&!t.params.pipOnly&&(t.inlineProductTray=new STRY.inlineProductTray(t),STRY.util.addClass(t.el,"stry-has-inline-product-tray")),t.fadeCarouselHandler=new STRY.fadeCarousel(t),11==STRY.util.isIE()&&(STRY.util.addClass(t.el,"ie11"),t.ieVersion=11),t.resetDOM=p,STRY.util.applyStyles({template:t.params.templates,custom:t.params.stylesheets,callback:function(){t.params.shopstream_credit&&t.params.shopstream_credit.header.enabled&&t.brandingService.createCredit(document.querySelectorAll(".header")[0],t.params.shopstream_credit.header.colour+" shop-header",!0),STRY.util.transmit(t,"onStylesLoaded",{})}}),t.renderer.prefetchTemplate({template:t.params.templates.location+t.params.templates.html.popup}),t.params.accessibility_features&&(window.onkeydown=function(e){var a=(e.code,e.keyCode);if("13"==a||"Enter"==a||"32"==a||"Space"==a){var r=e.target;if("VIDEO"==r.nodeName)return;var s=STRY.util.getDataAttribute(r,STRY.resources.data_action);"popupOpen"===s.action&&"A"!=e.target.nodeName?d({action:"popupOpen",target:s.element}):("shareOpen"===s.action||"BUTTON"!=e.target.nodeName&&document.getElementById("stry-wrapper").contains(e.target))&&e.target.click()}if("27"==a||"Escape"==a){var i=t.el.querySelector(".stry-popup-close");i&&i.click();var n=t.el.querySelector(".stry-direct-upload-close-link");n&&n.click()}t.params.presets&&t.params.presets.carousel&&("9"!=a&&"Tab"!=a||(e.shiftKey?STRY.util.transmit(t,"stryCarouselTabbed",{dir:"left"}):STRY.util.transmit(t,"stryCarouselTabbed",{dir:"right"})))})}},m=function(){var a=!!t.elementAttributeReaderHandler&&t.elementAttributeReaderHandler.language;a||(a="en"==(a=document.getElementsByTagName("html")[0].getAttribute("lang"))?"en-GB":a);var s=a||"en-GB";r.fallback_language_code=a||null,function(t,a){var s="/:app_id/translation/:language/.json?access_token=:access_token",i=e.api&&e.api.environment?e.api.environment:r.api.environment,n={};s="//storystream.stystm"==i?"https://storystream.stystm/admin/apps/api"+s:"https://d3g5d7323c2i6m.cloudfront.net"+s;var o=e.api&&e.api.token?e.api.token:r.api.token,l=e.api&&e.api.app_id?e.api.app_id:r.api.app_id,p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(200==p.status){var r=JSON.parse(p.responseText);n={code:t,strings:r.strings,categories:r.hasOwnProperty("categories")?r.categories:{}},e.experience_builder_preview_mode&&e.custom_language_overrides&&e.custom_language_overrides.hasOwnProperty(t)&&Object.entries(e.custom_language_overrides[t].strings).forEach((function(e){var t=_slicedToArray(e,2),a=t[0],r=t[1];n.strings[a]=r})),a(n)}else e.full_lang_override?a(e.full_lang_override):console.warn("StoryStream translations could not be retrieved. Stopping StoryStream initialisation.")},p.open("GET",s.replace(":app_id",l).replace(":language",t).replace(":access_token",o),!0),p.send(null)}(s,u)},f=function t(a){var r=a.detail;if(e.pdp_data_layer||document.removeEventListener("STRY.onPDPConfigReady",t),r.productSKUs.length)e.hasOwnProperty("filters")||(e.filters={}),e.filters.products=r.productSKUs;else if(r.productGroup)e.hasOwnProperty("filters")||(e.filters={}),e.filters.productGroup=r.productGroup;else if(!e.pdp_data_layer)return;m()},h=function(){if(!o&&e.embed_url&&-1===["localhost","0.0.0.0","storystream.stystm"].indexOf(window.location.hostname)){var s=encodeURIComponent(window.location.href);fetch(e.embed_url+"?p="+s,{method:"HEAD"}).then((function(e){})).catch((function(e){}))}var i=e.element_id?e.element_id:r.element_id;if(e.pip&&(function(){var t=localStorage.getItem("stry-pip");if(t){var a=JSON.parse(t)[e.app_id];a&&(e.pip_enabled=a.enabled,a.progress&&(e.pip_progress=a.progress),a.play_state&&(e.pip_play_state=a.play_state),a.integrity&&(e.integrity=a.integrity))}}(),e.hide_pip_inline_item=window.location.host+window.location.pathname!==e.pip_base_page&&window.location.host==e.pip_domain,e.pip_enabled&&e.hide_pip_inline_item)){var l=document.createElement("div");l.classList.add("stry-pip-hide"),l.id=i,document.body.appendChild(l)}if(STRY.util.element(i)){if(t.elementAttributeReaderHandler=new STRY.elementAttributeReader(t,e,r),t.elementAttributeReaderHandler.tags.length)e.hasOwnProperty("filters")||(e.filters={}),e.filters.tags=t.elementAttributeReaderHandler.tags;else if(e.custom_domain_mappings&&e.custom_domain_mappings.hasOwnProperty("tags")){var p=y(e.custom_domain_mappings.tags);p&&(e.hasOwnProperty("filters")||(e.filters={}),e.filters.tags=p)}if(e.custom_domain_mappings&&e.custom_domain_mappings.hasOwnProperty("streams")){var d=y(e.custom_domain_mappings.streams);d&&(e.hasOwnProperty("api")||(e.api={}),e.api.channel_id=d)}if(!e.gutter)switch(e.type?e.type:r.type){case"masonry":case"carousel":r.gutter=16;break;case"default":r.gutter=8}e.dynamic_product_page_mode||r.dynamic_product_page_mode?(document.addEventListener("STRY.onPDPConfigReady",f),a=new STRY.dynamicProductPage(t,e,r)):m()}else++n<20?setTimeout((function(){_()}),100):console.log("StoryStream DOM element took too long to load. Stopping StoryStream initialisation.")},y=function(e){var t=!1;return Object.keys(e).forEach((function(a){window.location.href.indexOf(a)>-1&&(t=e[a])})),t},_=function(){var t,a,s,i=e.element_id?e.element_id:r.element_id,n=STRY.util.element(i);n&&(o=n.classList.contains("app-preview-window")),e.api&&e.api.external_config_enabled&&"0"!==e.api.app_id&&!o?(t=e,a=function(){STRY["cookie_preference_"+e.api.app_id]&&(e.no_base_cookies=STRY["cookie_preference_"+e.api.app_id].no_base_cookies,e.cookieless_analytics=STRY["cookie_preference_"+e.api.app_id].cookieless_analytics),STRY["cookie_groups_enabled_"+e.api.app_id]&&(e.cookie_groups_enabled=STRY["cookie_groups_enabled_"+e.api.app_id]),h()},(s=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),a())},0==t.api.storyboard_service_location.indexOf("//")&&(t.api.storyboard_service_location="https:"+t.api.storyboard_service_location),s.open("GET",t.api.storyboard_service_location+t.api.app_id+"?access_token="+t.api.token,!0),s.send()):h()};return _(),t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var aria;function brandingService(e){if(!(this instanceof brandingService))return new brandingService(e||{});var t=this;t.hasRenderedHeader=!1,t.createHeader=function(r,s){void 0===r&&(r=""),s&&(r=a(s)+r),e.renderer.compile({template:'<div class="stry-wrapper-header">'+r+"</div>",callback:function(a){a.el&&(STRY.util.cleanseChildElements(a),e.el.prepend(a.el),t.hasRenderedHeader=!0)}})},t.createFooter=function(t){e.renderer.compile({template:'<div class="stry-wrapper-footer">'+t+"</div>",callback:function(t){t.el&&e.el.appendChild(t.el)}})},t.createCredit=function(t,a,r){var s=r?"?utm_source=shopstream&utm_medium=referral+&utm_campaign=shopstream":"";e.renderer.compile({template:'<a href="https://storystream.ai/'+s+'" target="_blank" class="stry-credit '+a+'"><span class="stry-credit-text">Powered By </span><span class="stry-credit-image"></span></a>',callback:function(e){e.el&&t&&t.appendChild(e.el)}})};var a=function(e){return bannerElement='<picture class="stry-banner">',e.mobile_image_url&&e.mobile_image_breakpoint&&(bannerElement+='<source style="max-width: 100%" media="(max-width:'+e.mobile_image_breakpoint+'px)" srcset="'+e.mobile_image_url+'">'),e.desktop_image_url&&e.mobile_image_breakpoint&&(bannerElement+='<source style="max-width: 100%" media="(min-width:'+e.mobile_image_breakpoint+'px)" srcset="'+e.desktop_image_url+'">',bannerElement+='<img style="max-width: 100%" src="'+e.desktop_image_url+'">'),bannerElement+="</picture>",bannerElement}}function directUploadInterface(e){if(!(this instanceof directUploadInterface))return new directUploadInterface(e||{});var t=function(){document.getElementById("stst_uploadcare_script")||e.directUploadHandler.applyUploadCare()};e.params.has_custom_direct_upload_button||function(){if("styles-v2.css"==e.params.templates.stylesheet){var t='<div class="stry-direct-upload stry-'.concat(e.params.direct_upload_position,'"><button id="direct-upload" data-stry-action="directUploadOpen" data-stry-track="Direct Upload, click, Open" title="{{=it.localisation.upload_your_photos}}" tabindex="0">{{=it.localisation.upload_your_photos}}</button></div>');e.renderer.compile({template:t,item:{localisation:e.language?e.language.strings:e.params.language.strings},callback:function(t){if(t.el)if("above"==e.params.direct_upload_position)if(e.brandingService.hasRenderedHeader){var a=e.el.querySelector(".stry-wrapper-header");a.parentNode.insertBefore(t.el,a.nextSibling)}else e.el.prepend(t.el);else e.el.appendChild(t.el)}})}else e.renderer.compile({template:e.params.direct_upload.button_template,item:{localisation:e.language?e.language.strings:e.params.language.strings},callback:function(t){if(t.el)if(e.brandingService.hasRenderedHeader){var a=e.el.querySelector(".stry-wrapper-header");a.parentNode.insertBefore(t.el,a.nextSibling)}else{var r=e.el.getElementsByClassName("stry-direct-upload");r.length&&r[0].remove(),e.el.prepend(t.el)}}})}(),e.renderer.compile({template:e.params.direct_upload.popup_template,item:{localisation:e.language?e.language.strings:e.params.language.strings},callback:function(t){if(t.el){var a=e.el.getElementsByClassName("stry-direct-upload-popup");a.length&&a[0].remove(),e.el.prepend(t.el)}}}),e.addEventListener("onLoadingComplete",t)}function dynamicProductPage(e,t,a){if(!(this instanceof dynamicProductPage))return new dynamicProductPage(e,t,a||{});this.productSKUs=[],this.productGroup=null,this.pdp_xhr_config=null,this.product_group_mode=!1,this.observer=null;var r=(t.api&&t.api.story?t.api.story:a.api.story)+"-",s=t.api?t.api.story_id:"",i=t.api?t.api.app_id:"",n=this;n.willListenForXHRProductChanges=function(e){var t=window.XMLHttpRequest;window.XMLHttpRequest=function(){var a=new t;return a.addEventListener("readystatechange",(function(){if(4==a.readyState&&200==a.status&&-1!==a.responseURL.indexOf(e.params.pdp_xhr_config.fragment))try{var t=(new DOMParser).parseFromString(a.responseText,"text/html").querySelector(e.params.pdp_xhr_config.element);t&&t.value&&(n.productSKUs=[],n.productSKUs.push(r+t.value.split("-").join("").split("_").join("")),e.params.filters.products=n.productSKUs,e.resetDOM(),e.restart())}catch(e){}}),!1),a}},n.willListenForPageChange=function(e){var t=location.href;n.observer||(n.observer=new MutationObserver((function(){var a=location.href;a!==t&&(t=a,o(e))})),n.observer.observe(document,{subtree:!0,childList:!0}))};var o=function e(t){"virtualPageView"==window.dataLayer[window.dataLayer.length-1].event?(t.resetDOM(),t.restart(),l()):setTimeout(e.bind(void 0,t),100)},l=function o(){if(n.product_group_mode){var l=document.getElementById("tfa-params");if(l){var p=l.querySelector('[name="product_id"]');p&&p.value&&(n.productGroup=p.value)}}else if(n.pdp_xhr_config){var d=document.querySelector(n.pdp_xhr_config.element);d&&n.productSKUs.push(r+d.value.split("-").join("").split("_").join(""))}else if(n.pdp_data_layer_mode){if(1366==s)for(var c=window.dataLayer.length-1;c>=0;c--){var u=window.dataLayer[c];if(u.event&&"productDetail"==u.event){u.ecommerce.detail.products.forEach((function(e){n.productGroup=e.dimension7||e.productMasterId}));break}}else if(2712==s)for(var m=0;m<window.dataLayer.length;m++){var f=window.dataLayer[m];if(f.event&&"nievent"==f.event){n.productSKUs.push(r+f.ecommerce.detail.products.id);break}}}else if(n.pdp_data_layer_product_info_mode)window.dataLayerProductInfo&&window.dataLayerProductInfo.sku_code&&n.productSKUs.push(r+window.dataLayerProductInfo.sku_code);else{var h=e.elementAttributeReaderHandler.attributes.sku;if(h)n.productSKUs.push(r+h);else document.querySelectorAll('script[type="application/json"], script[type="application/ld+json"]').forEach((function(e){var t=JSON.parse(e.textContent),a=[];t.hasOwnProperty("@type")&&"product"==t["@type"].toLowerCase()&&(1907==s&&"YmI4N2NkMTRmMTk1NzI3N2Nh"==i&&t.hasOwnProperty("productCode")?a.push(t.productCode):t.hasOwnProperty("offers")&&t.offers.hasOwnProperty("sku")?a.push(t.offers.sku):t.hasOwnProperty("offers")&&t.offers.length?t.offers.forEach((function(e){a.push(e.sku)})):t.hasOwnProperty("sku")&&a.push(t.sku),2638==s&&t.hasOwnProperty("name")&&(a=null,n.productGroup=t.name.replace(/[^\x00-\x7F]/g,"").replace(/(\.)|(')|(\/)/g," ").trim(),n.productGroup=n.productGroup.replace(/&/g,"").replace(/\s+/g," ").replace(/\s/g,"-").toLowerCase())),2328!=s&&2516!=s&&2537!=s||!t.hasOwnProperty("@type")||"productgroup"!=t["@type"].toLowerCase()||t.hasOwnProperty("hasVariant")&&t.hasVariant.forEach((function(e){try{a.push(e.sku)}catch(e){}})),a&&a.length&&a.forEach((function(e){-1==n.productSKUs.indexOf(r+e)&&("homebase-"!=r?n.productSKUs.push(r+e):n.productSKUs.push(e))}))}))}document.removeEventListener("DOMContentLoaded",o),function(){var e=t.filters&&t.filters.products?t.filters.products:[];n.productSKUs=STRY.util.mergeArrays(n.productSKUs,e);var r=t.element_id?t.element_id:a.element_id,s=document.querySelector("#"+r);s&&(s.classList.contains("app-preview-window")&&(n.productSKUs=t.previewModeProductSKU?[t.previewModeProductSKU]:[]),STRY.util.transmit(document,"STRY.onPDPConfigReady",{productSKUs:n.productSKUs,productGroup:n.productGroup}))}()};n.pdp_xhr_config=t.pdp_xhr_config?t.pdp_xhr_config:a.pdp_xhr_config,n.product_group_mode=t.product_group_mode?t.product_group_mode:a.product_group_mode,n.pdp_data_layer_mode=!!t.pdp_data_layer&&t.pdp_data_layer,n.pdp_data_layer_product_info_mode=!!t.pdp_data_layer_product_info_mode&&t.pdp_data_layer_product_info_mode,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()}function elementAttributeReader(e,t,a){this.attributes={},this.tags=[],this.language=!1;var r,s=this,i=null,n=t.element_id?t.element_id:a.element_id;(i=document.getElementById(n))&&(Object.keys(i.dataset).map((function(e){s.attributes[e]=i.dataset[e]})),r=t.filters&&t.filters.tags?t.filters.tags:[],(s.attributes.stryTags&&s.attributes.stryTags.length?s.attributes.stryTags.split(","):[]).forEach((function(e){-1==r.map((function(e){return e.url_name})).indexOf(e)&&r.push({url_name:e})})),s.tags=r,s.language=!!s.attributes.stryLang&&s.attributes.stryLang)}function filtersInterface(e){if(!(this instanceof filtersInterface))return new filtersInterface(e||{});this.wrapper=e.el,this.filterMenuEl=null,this.filterMenuIsExpanded=!1;var t=this,a=0,r=e.params.use_custom_category_filters&&e.params.category_filters?e.params.category_filters.filter((function(e){return e.enabled})):[];t.toggleFilterMenu=function(){t.filterMenuEl.classList.contains("collapsed")?(t.filterMenuEl.classList.remove("collapsed"),t.filterMenuEl.classList.add("expanded"),t.filterMenuIsExpanded=!0):(t.filterMenuEl.classList.remove("expanded"),t.filterMenuEl.classList.add("collapsed"),t.filterMenuIsExpanded=!1)};var s=function(){if(e.params.filters||"channel"===e.params.api.type){var s=[],i=[],n=e.el.querySelector(".stry-filters");n&&n.parentNode.removeChild(n);var o=e.getFilters();if(o.categories.length&&"stry-emm-all"!==o.categories[0].url_name&&(!e.params.use_custom_category_filters||r&&r.some((function(e){return"stry-emm-all"==e.url_name})))&&o.categories.unshift({name:"all",url_name:"stry-emm-all",data:{}}),e.params.use_custom_category_filters&&r.length&&o.categories.length)for(var l=function(e){var t=r[e];o.categories.some((function(e){return e.url_name===t.url_name}))||r.splice(e,1)},p=r.length-1;p>=0;p--)l(p);for(var d=0,c=!1,u=[],m=0;m<STRY.resources.filter_types.length;m++){d=0,-1,i=[];var f=STRY.resources.filter_types[m];if(e.filterScope[f]&&(u=e.filterScope[f]),o[f]){for(var h=0;h<o[f].length;h++){for(var y=o[f][h],_=0;_<u.length;_++)if(u[_].url_name===y.url_name){c=!0;break}if("categories"==f){var g=e.language?e.language:e.params.language;g.hasOwnProperty("categories")&&g.categories.hasOwnProperty(y.url_name)&&(y.name=g.categories[y.url_name]),i[d]={name:y.name,url_name:y.url_name,selected:c}}else i[d]={name:y.name,url_name:y.url_name,selected:c};d++,c=!1}i.length&&"categories"==f&&(i=i.filter((function(e){return void 0!==e.name}))),s[f]=i}}if(e.params.use_custom_category_filters&&r.length){var v=[],b=e.language?e.language:e.params.language;r.forEach((function(t){v.push({name:b.categories&&b.categories[t.url_name]?b.categories[t.url_name]:t.name,url_name:t.url_name,selected:e.filterScope.categories&&-1!==e.filterScope.categories.map((function(e){return e.url_name})).indexOf(t.url_name)})})),s.categories=v}if(s.localisation=e.language?e.language.strings:e.params.language.strings,s.categories.map((function(e){return e.selected})).indexOf(!0)<0&&s.categories.length)if(e.params.use_custom_category_filters&&r.length){var w=r.map((function(e){return e.url_name})).indexOf("stry-emm-all");-1!=w?s.categories[w].selected=!0:s.categories[0].selected=!0}else s.categories[0].selected=!0;s.expanded=t.filterMenuIsExpanded,e.renderer.compile({template:e.params.templates.location+e.params.templates.html.menu,item:s,callback:function(s){if(s.el){if(t.filterMenuEl=s.el,!e.el.querySelectorAll(".stry-filters").length){e.params.use_custom_category_filters&&!r.some((function(e){return"stry-emm-all"==e.url_name}))&&t.filterMenuEl.classList.add("no-deselect");var i="carousel"==e.params.type?e.layout.carouselOuter:e.layout[e.params.type];"digital-magazine"!=e.params.type&&"news-hub"!=e.params.type||(i=e.layout.masonry),i.id?"header"==e.params.carousel_button_position?e.el.insertBefore(s.el,e.el.querySelector(".stry-carousel-button-wrapper")):e.el.insertBefore(s.el,e.el.querySelector("#"+i.id)):e.el.insertBefore(s.el,i)}t.filterMenuEl.querySelector(".stry-categories").scrollLeft=a}}})}};e.addEventListener("filtersReady",s),e.addEventListener("onClicked",(function(e){var t,r;"filterClick"==(null==e||null===(t=e.detail)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.action)&&(a=e.detail.data.element.parentNode.parentNode.scrollLeft)}))}function inlineHotspots(e,t,a){if(!(this instanceof inlineHotspots))return new inlineHotspots(e,t,a||{});var r=null,s=null,i=null,n=!1,o=[];this.animateSpots=function(){var e=o.filter((function(e){return e.visible})),t=e.length;t&&function a(r){setTimeout((function(){d(e[t-r].el),e[t-r].active=!0,e[t-r].el.classList.add("animating"),--r&&a(r)}),100)}(t)};var l,p,d=function(e){e.addEventListener("animationend",(function(){e.classList.remove("animating")}))},c=function(){for(var t=o.length,a=0;a<t;a++){r.input.height,r.input.width;var i=o[a].originalCoords.x,n=o[a].originalCoords.y;r.resize.length&&r.resize.forEach((function(e){e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height")&&(i-=e.x,n-=e.y),e.hasOwnProperty("x_factor")&&e.hasOwnProperty("y_factor")&&(i*=e.x_factor,n*=e.y_factor)}));var l=i/r.output.width*100,p=n/r.output.height*100;o[a].visible=u(l,p),o[a].el.style.left="calc("+l+"%)",o[a].el.style.top="calc("+p+"%)",o[a].applied||(s.parentNode.insertBefore(o[a].el,s),o[a].applied=!0,"styles-v2.css"==e.params.templates.stylesheet&&m.observe(o[a].el))}},u=function(e,t){var a=!0;return(e>100||t>100||e<0|t<0)&&(a=!1),s.offsetHeight*(t/100)>i.offsetHeight&&(a=!1),s.offsetWidth*(e/100)>i.offsetWidth&&(a=!1),a},m=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(e.target.classList.remove("hidden"),e.target.classList.add("visible")):(e.target.classList.remove("visible"),e.target.classList.add("hidden")),o.filter((function(e){return e.el.classList.contains("visible")})).forEach((function(e,t){var a=e.el.querySelector(".stry-spot-outer"),r=e.el.querySelector(".stry-spot-inner");a.onanimationend=function(e){"hotspot-outer-outro"==e.animationName?setTimeout((function(){a.style.animationDelay=.1*t+"s",r.style.animationDelay=.1*t+"s"}),100*t):(a.style.animationDelay="0s",r.style.animationDelay="0s")},a.style.animationDelay=.1*t+"s",r.style.animationDelay=.1*t+"s"}))}))}),{threshold:1});l=t.item_data.images[0].preview_info_url,(p=new XMLHttpRequest).onreadystatechange=function(){if(4==p.readyState&&200==p.status){var e=JSON.parse(p.responseText);r=e,n&&r&&c()}},p.open("GET",l,!0),p.send(null),s="grid"==e.params.type?t.el.querySelector(".main-image"):t.el.querySelector(".stry-image-scale"),i=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(t.el,"stry-pane"),function(){for(var e=a.length,t=0;t<e;t++){var r=document.createElement("div"),s=document.createElement("span"),i=document.createElement("span");r.classList.add("stry-spot"),s.classList.add("stry-spot-outer"),r.appendChild(s),i.classList.add("stry-spot-inner"),r.appendChild(i),o.push({el:r,originalCoords:a[t].data.co_ords,applied:!1})}}(),STRY.util.addLoadEvent(s,(function(){(n=!0)&&r&&c()}))}function inlineProductTray(e){if(!(this instanceof inlineProductTray))return new inlineProductTray(e||{});var t=this,a=null,r=null,s=null;t.onOpen=function(){a.classList.add("active")},t.onClose=function(){a.classList.remove("active"),setTimeout((function(){s.replaceChildren()}),300)},t.addProducts=function(e){e.forEach((function(e){i(e)}))};var i=function(t){var a='<div class="stry-product">\n                                    <div class="stry-product-image-wrapper">\n                                        <img class="stry-product-image" src="https://du66ttpehq3tn.cloudfront.net/c_limit,h_96,w_96/'.concat(t.image,'" alt=""/>\n                                    </div>\n                                    <div class="stry-product-details">\n                                        <span class="stry-product-name ').concat(t.title?"":"no-name",'">').concat(t.title,'</span>\n                                        <span class="stry-product-price ').concat(t.price?"":"no-price",'">').concat(t.price,'</span>\n                                        <a class="stry-product-button" href="').concat(t.url,'" target="_blank">').concat(t.button_text,"</a>\n                                    </div>\n                                </div>");e.renderer.compile({template:a,callback:function(e){e.el&&s.appendChild(e.el)}})};e.renderer.compile({template:'<div class="stry-inline-product-tray-wrapper">\n                        <div class="stry-product-tray">\n                            <button class="stry-product-tray-close">\n                                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.2135 1.03286C16.4606 1.15604 16.5611 1.45625 16.438 1.7034L8.95701 16.7129C8.87253 16.8824 8.69954 16.9896 8.51015 16.9899C8.32077 16.9901 8.1475 16.8833 8.06259 16.714L0.543538 1.72359C0.419728 1.47676 0.51946 1.17629 0.766292 1.05248C1.01312 0.928676 1.31359 1.02841 1.4374 1.27524L8.5081 15.3718L15.543 1.25732C15.6661 1.01017 15.9663 0.909681 16.2135 1.03286Z" fill="black"/>\n                                </svg>\n                            </button>\n                            <div class="stry-product-tray-list"></div>\n                        </div>\n                    </div>',callback:function(i){i.el&&(a=i.el,r=i.el.querySelector(".stry-product-tray-close"),s=i.el.querySelector(".stry-product-tray-list"),r.onclick=t.onClose,e.el.prepend(i.el))}})}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}STRY.app=storyboard,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.storyboard=storyboard),(aria=aria||{}).Utils=aria.Utils||{},aria.Utils.remove=function(e){return e.remove&&"function"==typeof e.remove?e.remove():!(!e.parentNode||!e.parentNode.removeChild||"function"!=typeof e.parentNode.removeChild)&&e.parentNode.removeChild(e)},aria.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type&&"file"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},(aria=aria||{}).Utils=aria.Utils||{},aria.Utils.IgnoreUtilFocusChanges=!1,aria.Utils.dialogOpenClass="has-dialog",aria.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var a=e.childNodes[t];if(aria.Utils.attemptFocus(a)||aria.Utils.focusFirstDescendant(a))return!0}return!1},aria.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var a=e.childNodes[t];if(aria.Utils.attemptFocus(a)||aria.Utils.focusLastDescendant(a))return!0}return!1},aria.Utils.attemptFocus=function(e){if(!aria.Utils.isFocusable(e))return!1;aria.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return aria.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},aria.OpenDialogList=aria.OpenDialogList||new Array(0),aria.getCurrentDialog=function(){if(aria.OpenDialogList&&aria.OpenDialogList.length)return aria.OpenDialogList[aria.OpenDialogList.length-1]},aria.closeCurrentDialog=function(){var e=aria.getCurrentDialog();return!!e&&(e.close(),!0)},aria.Dialog=function(e,t,a){this.dialogNode=e,this.dialogNode.parentNode.classList.contains("dialog-backdrop")?this.backdropNode=this.dialogNode.parentNode:(this.backdropNode=document.createElement("div"),this.backdropNode.className="dialog-backdrop",this.dialogNode.parentNode.insertBefore(this.backdropNode,this.dialogNode),this.backdropNode.appendChild(this.dialogNode)),this.backdropNode.classList.add("active"),this.focusFirst="string"==typeof a?document.getElementById(a):"object"==_typeof(a)?a:null;var r=document.createElement("div");this.preNode=this.dialogNode.parentNode.insertBefore(r,this.dialogNode),this.preNode.tabIndex=0;var s=document.createElement("div");this.postNode=this.dialogNode.parentNode.insertBefore(s,this.dialogNode.nextSibling),this.postNode.tabIndex=0,aria.OpenDialogList.length>0&&aria.getCurrentDialog().removeListeners(),this.addListeners(),aria.OpenDialogList.push(this),this.clearDialog(),this.dialogNode.className="default_dialog",this.focusFirst?this.focusFirst.focus():aria.Utils.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement},aria.Dialog.prototype.clearDialog=function(){Array.prototype.map.call(this.dialogNode.querySelectorAll("input"),(function(e){e.value=""}))},aria.Dialog.prototype.close=function(){aria.OpenDialogList.pop(),this.removeListeners(),aria.Utils.remove(this.preNode),aria.Utils.remove(this.postNode),this.dialogNode.className="hidden",this.backdropNode.classList.remove("active"),aria.OpenDialogList.length>0&&aria.getCurrentDialog().addListeners()},aria.Dialog.prototype.replace=function(e,t,a){aria.getCurrentDialog(),aria.OpenDialogList.pop(),this.removeListeners(),aria.Utils.remove(this.preNode),aria.Utils.remove(this.postNode),this.dialogNode.className="hidden",this.backdropNode.classList.remove("active");var r=t||this.focusAfterClosed;new aria.Dialog(e,r,a)},aria.Dialog.prototype.addListeners=function(){document.addEventListener("focus",this.trapFocus,!0)},aria.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",this.trapFocus,!0)},aria.Dialog.prototype.trapFocus=function(e){if(!aria.Utils.IgnoreUtilFocusChanges){var t=aria.getCurrentDialog();t.dialogNode.contains(e.target)?t.lastFocus=e.target:(aria.Utils.focusFirstDescendant(t.dialogNode),t.lastFocus==document.activeElement&&aria.Utils.focusLastDescendant(t.dialogNode),t.lastFocus=document.activeElement)}},window.openDialog=function(e,t,a){new aria.Dialog(e,t,a)},window.closeDialog=function(e){var t=aria.getCurrentDialog();t.dialogNode.contains(e)&&t.close()},window.replaceDialog=function(e,t,a){var r=aria.getCurrentDialog();r.dialogNode.contains(document.activeElement)&&r.replace(e,t,a)},STRY.brandingService=brandingService,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.brandingService=brandingService),STRY.directUploadInterface=directUploadInterface,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.directUploadInterface=directUploadInterface),STRY.dynamicProductPage=dynamicProductPage,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.dynamicProductPage=dynamicProductPage),STRY.elementAttributeReader=elementAttributeReader,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.elementAttributeReader=elementAttributeReader),STRY.filtersInterface=filtersInterface,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.filtersInterface=filtersInterface),STRY.inlineHotspots=inlineHotspots,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.inlineHotspots=inlineHotspots),STRY.inlineProductTray=inlineProductTray,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.inlineProductTray=inlineProductTray);var STRY_Pip_player=function(){function e(t,a){var r=this;_classCallCheck(this,e),this.scope=t,this.pipOnly=a,this.template='<div class="stry-pip-player">\n            <div class="stry-pip-player-close-button"></div>\n            <div class="stry-pip-player-volume-button"></div>\n            <div class="stry-pip-player-expand-button"></div>\n            <video class="stry-pip-player-video" muted></video>\n        </div>',this.el=null,this.closeButtonEl=null,this.expandButtonEl=null,this.mockExpandEl=document.createElement("button"),this.volumeButtonEl=null,this.videoEl=null,this.itemData=[],this.itemPanes=[],this.currentItem=null,this.currentVideoState=null,this.currentPane=null,this.muted=!0,this.isOpen=!1;var s=this;this.scope.renderer.compile({template:this.template,callback:function(e){e.el&&(s.el=e.el,s.closeButtonEl=s.el.querySelector(".stry-pip-player-close-button"),s.expandButtonEl=s.el.querySelector(".stry-pip-player-expand-button"),s.volumeButtonEl=s.el.querySelector(".stry-pip-player-volume-button"),s.videoEl=s.el.querySelector(".stry-pip-player-video"),s.videoEl.addEventListener("ended",s.onVideoEnded.bind(s)),t.el.appendChild(s.el),s.closeButtonEl.addEventListener("click",s.close.bind(s)),s.expandButtonEl.addEventListener("click",s.expandToItem.bind(s)))}}),this.scope.addEventListener("onLoadingComplete",this.onItemDataLoaded.bind(this)),this.scope.addEventListener("onItemRenderingComplete",this.onPanesRendered.bind(this)),window.onbeforeunload=function(){if(r.isOpen){var e={itemId:r.currentItem.content_item_id,muted:r.muted,progress:r.videoEl.currentTime};window.localStorage.setItem("stry-".concat(r.scope.params.api.app_id,"-pip-state"),JSON.stringify(e))}}}return _createClass(e,[{key:"onItemDataLoaded",value:function(e){if(this.itemData=e.detail.data,this.pipOnly){var t=window.localStorage.getItem("stry-".concat(this.scope.params.api.app_id,"-pip-state"));if(t){var a=JSON.parse(t);this.assignVideo(a.itemId,a.muted,a.progress)}}}},{key:"onPanesRendered",value:function(e){this.itemPanes=e}},{key:"stopInlinePaneVideos",value:function(){this.itemPanes.forEach((function(e){e.el.querySelectorAll("video").forEach((function(e){e.pause()})),e.el.querySelectorAll(".stry-video-icon").forEach((function(e){e.style.display="block"}))}))}},{key:"assignVideo",value:function(e,t,a){var r=this;this.currentItem=this.itemData.find((function(t){return t.content_item_id===e})),this.pipOnly||(this.currentPane=this.itemPanes.find((function(e){return e.el.querySelector("[data-stry-block='"+r.currentItem.content_item_id+"']")})),this.currentPane.el.classList.add("stry-playing-in-pip")),this.el.classList.add("active"),this.isOpen=!0,this.videoEl.src=this.currentItem.videos[0].url,this.muted=t,this.muted?(this.videoEl.muted=!0,this.volumeButtonEl.classList.add("active")):(this.videoEl.muted=!1,this.volumeButtonEl.classList.remove("active")),a&&(this.videoEl.currentTime=a),this.playVideo()}},{key:"playVideo",value:function(){var e=this,t=this.videoEl.play();void 0!==t&&t.catch((function(t){e.videoEl.muted=!0,e.videoEl.play()}))}},{key:"onVideoEnded",value:function(){var e=this,t=this.itemData.findIndex((function(t){return t.content_item_id===e.currentItem.content_item_id})),a=t+1<this.itemData.length?t+1:0;this.pipOnly||this.currentPane.el.classList.remove("stry-playing-in-pip"),this.assignVideo(this.itemData[a].content_item_id,this.muted)}},{key:"syncExpandedViewVideo",value:function(e){this.currentVideoState&&(this.currentVideoState.progress&&(e.currentTime=this.currentVideoState.progress),this.currentVideoState.muted&&(e.muted=!0))}},{key:"expandToItem",value:function(){this.videoEl.pause(),this.el.classList.remove("active"),this.isOpen=!1,this.itemPanes.forEach((function(e){e.el.classList.remove("stry-playing-in-pip")})),this.currentVideoState={progress:this.videoEl.currentTime,muted:this.muted},this.mockExpandEl.dataset.stryAction="popupOpen",this.mockExpandEl.dataset.stryHash=this.scope.panes.willAddDeeplinkingAndRootUrl(this.currentItem).deeplink_url,this.scope.popup.handleHashChangeClick(this.mockExpandEl),this.scope.popupIsOpen=!0,localStorage.removeItem("stry-".concat(this.scope.params.api.app_id,"-pip-state"))}},{key:"close",value:function(){if(!this.pipOnly){var e=this.currentPane.el.getBoundingClientRect();e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth?this.scope.layout.resumeSequentialVideoPlayback(this.currentPane.el):this.scope.layout.resumeSequentialVideoPlayback()}this.videoEl.pause(),this.el.classList.remove("active"),this.isOpen=!1,this.itemPanes.forEach((function(e){e.el.classList.remove("stry-playing-in-pip")})),localStorage.removeItem("stry-".concat(this.scope.params.api.app_id,"-pip-state"))}}]),e}();function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function popup(e){var t=e.params.use_expanded_view?document.createElement("dialog"):document.createElement("div");t.classList.add("stry-popup"),e.params.digi_mag_carousel_letterbox&&t.classList.add("stry-popup-carousel-letterbox"),e.params.pip&&t.classList.add("stry-pip"),e.params.pip_enabled&&t.classList.add("stry-pip-enabled"),t.style.display="none",e.layout.wrapper.appendChild(t),this.popupOuter=t,this.popupsToRender=0,this.popupsRendered=0,this.directDeeplinkContentItemId=null;var a=this,r=document.getElementsByTagName("html")[0],s=r.style.overflow,i=document.getElementsByTagName("body")[0],n=i.style.overflow,o=[],l=null,p=e.params.use_expanded_view?1024:480;a.handleHashChangeClick=function(t){var a=t.getAttribute("data-stry-hash");e.params.hasDeeplink&&!e.appStoreMode?window.location.hash=STRY.util.replacePrefix(a):d(!1,a)},a.closePopup=function(r){var s=l;if(r){var i=r.getAttribute("data-stry-hash");e.params.hasDeeplink&&(window.location.hash=i)}for(e.layout.wrapper.classList.remove("stry-is-popup"),a.popupOuter.style.display="none",a.popupOuter.style.overflowX="unset";a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);e.carouselItems=[],STRY.util.removeClass(document.getElementsByTagName("html")[0],"stry-widget-is-popup"),g();var n=e.el.querySelector(".stry-paginator-container");if(n&&n.parentNode.removeChild(n),e.tabber&&window.removeEventListener("keydown",e.tabber.willHandleKeyRequest),e.params.seo_utils_enabled&&STRY.seo.willResetPopupMetaData(),e.smartGoalHandler.popupOpen=!1,o=[],e.layout.isInView||e.params.pip_enabled||c(),a.popupsRendered=0,a.popupsToRender=0,e.params.accessibility_features){var p=null;"grid"==e.params.type?p="list-item-inner":"masonry"!=e.params.type&&"carousel"!=e.params.type||(p="stry-item-hover");for(var d=e.el.getElementsByClassName(p),u=e.params.can_tab_expanded_content?e.tabber.currentItemId:l,m=d.length;m--;)if(d[m].getAttribute("data-stry-block")==u){d[m].focus(),expandedItem=null;break}}STRY.util.transmit(e,"popupHasClosed",{closed_item:s}),e.params.use_expanded_view&&t.close()},a.resetPopup=function(){for(e.layout.wrapper.classList.remove("stry-is-popup"),a.popupOuter.style.display="none";a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);e.carouselItems=[],STRY.util.removeClass(document.getElementsByTagName("html")[0],"stry-widget-is-popup");var r=e.el.querySelector(".stry-paginator-container");r&&r.parentNode.removeChild(r),e.smartGoalHandler.popupOpen=!1,o=[],a.popupsRendered=0,a.popupsToRender=0,e.params.use_expanded_view&&t.close()};var d=function(r,s){var i=s||window.location.hash,n=-1!==i.indexOf("id:");if("onItemRenderingComplete"!=r.type||!e.popupIsOpen)if(n){for(;a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);a.popupOuter.removeEventListener("scroll",STRY.tabberScrollListener,{capture:!0,passive:!0});var o=i.indexOf("/id:"),l=function(e){var t,a,r,s=e.replace("#","").split("/");if(s&&s.length>1)for(t=s.length,a=0,r=[];t--;)s[a]&&"!"!==s[a]&&r.push(s[a]),a+=1;return r&&r.length?r:void 0}(i.substr(o,i.length)),p=l[0].split(":")[1],d=l[1];"live-video"==e.params.type?u({detail:{data:{videos:[{url:e.params.lvs_settings.video.mp4_url?e.params.lvs_settings.video.mp4_url:"",hls_url:e.params.lvs_settings.video.hls_url?e.params.lvs_settings.video.hls_url:""}],tags:[],start_poster:e.params.lvs_settings.before_show.poster,end_poster:e.params.lvs_settings.after_show.poster}}}):e.loadItemById(p,d),e.popupIsOpen=!0,e.params.use_expanded_view&&t.showModal(),("onItemRenderingComplete"==r.type||"hashchange"==r.type&&-1!=r.newURL.indexOf("id:")&&-1!=r.oldURL.indexOf("id:"))&&(a.directDeeplinkContentItemId=p),e.layout.isInView||e.params.pip_enabled||c(),e.tabber&&window.addEventListener("keydown",e.tabber.willHandleKeyRequest)}else e.popupIsOpen&&(a.closePopup(),e.popupIsOpen=!1)},c=function(){e.el.scrollIntoView()},u=function(r){if(!r.detail.data.status){!a.directDeeplinkContentItemId||a.directDeeplinkContentItemId!=r.detail.data.id&&a.directDeeplinkContentItemId!=r.detail.data.legacy_block_id||(STRY.util.transmit(e,"onDirectDeeplink",{event:r,id:r.detail.data.content_item_id}),a.directDeeplinkContentItemId=null),e.panes.getCurrentlyVisibleAndOffScreenItems(),e.params.seo_utils_enabled&&STRY.seo.willUpdatePopupMetaData(r.detail.data),e.layout.wrapper.classList.add("stry-is-popup");var s={};if(s.no_paginator="masonry"==e.params.type&&window.innerWidth>p,window.innerWidth<=p){var i;switch(e.params.type){case"grid":i=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems.slice(0,4)),e.params.reverse_mosaic_column_layout&&(i=y(i)),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"masonry":case"digital-magazine":case"news-hub":i=e.layout.getMobileTabberItems(r.detail.data,e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems)),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"carousel":i=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"live-video":e.popup.popupsToRender=1,m(r.detail.data,!1)}}else{var n=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems);e.params.reverse_mosaic_column_layout&&(n=y(n));var o=n.map((function(e){return e.id})).indexOf(r.detail.data.id),l=n.map((function(e){return e.content_item_id})).indexOf(r.detail.data.content_item_id),d=o||l;e.popup.popupsToRender=0==d||d==n.length-1?2:3,1==n.length&&(e.popup.popupsToRender=1),m(r.detail.data,!1,(function(){e.tabber&&e.tabber.willRenderExpandedItems(r.detail.data,n,s),"live-video"==e.params.type&&(e.layout.setupLiveVideo(),e.chatService.whenPopupOpened()),e.params.storystream_credit&&e.params.storystream_credit.expanded.enabled&&"styles-v2.css"!==e.params.templates.stylesheet&&e.brandingService.createCredit(t,e.params.storystream_credit.expanded.colour)}),!0)}if(e.params.use_expanded_view){var c=r.detail.data.visual_smartgoals_with_hotspots&&r.detail.data.visual_smartgoals_with_hotspots.length&&"image"==r.detail.data.media_type;v(c)}}},m=function(t,a,s,i){var n,o,l,d=e.params.templates.location;if(t){d+=t.toggle_custom_story_item?e.params.templates.html.custom_story_item_popup:e.params.templates.html.popup;var c=e.language?e.language:e.params.language;c&&(t.localisation=c.strings?c.strings:{}),t.popup_position=a;var u=e.panes.willAddDeeplinkingAndRootUrl(t).deeplink_url;if(i&&e.params.hasDeeplink&&!e.appStoreMode&&(window.location.hash=u),STRY.util.addClass(r,"stry-widget-is-popup"),_(),t.tags.length&&e.params.show_popup_brand_messages){var m=t.tags.map((function(e){return e.type})).indexOf("brand-message");t.brand_message=-1!==m&&t.tags[m].data.message}if(t.tags.length&&e.params.smartgoal_utm_parameters&&(t.tags=e.panes.willHydrateSmartGoalUTM(t.tags)),e.params.lvs_override_tags&&(t.tags=e.params.lvs_override_tags),t.no_cookies=!(!e.params.cookie_killswitch&&!e.params.no_base_cookies),t.smartgoals_same_window=e.params.smartgoals_same_window,t.visual_smartgoals=e.smartGoalHandler.willCollectVisualSmartgoals(t.tags),t.visual_smartgoals_with_hotspots=e.smartGoalHandler.willCollectVisualSmartgoalsWithHotspot(t.tags),"live-video"==e.params.type){t.visual_smartgoals=e.params.products,t.current_url=window.location.href,t.chat_terms_url=e.params.lvs_settings.chat_terms_url?e.params.lvs_settings.chat_terms_url:"#",t.chat_privacy_policy_url=e.params.lvs_settings.chat_privacy_policy_url?e.params.lvs_settings.chat_privacy_policy_url:"#",t.cookie_helper_text=!(!e.params.lvs_settings.cookie_helper_text||!e.params.no_base_cookies)&&e.params.lvs_settings.cookie_helper_text;var h=document.createElement("video"),y=null;y=e.params.use_hls_video?Hls.isSupported()?"hls":h.canPlayType("application/vnd.apple.mpegurl")?"m3u8":"standard":"standard",t.video_format=y,e.video_format=y,t.app_id=e.params.api.app_id}t.hide_visual_smartgoals=!(e.smartGoalHandler&&e.smartGoalHandler.popupOpen&&window.innerWidth>p)||!e.smartGoalHandler.visualSmartgoalsToggled,t.smartgoal_adobe_attribute_value=!!e.params.smartgoal_adobe_attribute_value&&e.params.smartgoal_adobe_attribute_value,t.has_touch=!!e.hasTouchEvents,e.params.accessibility_features&&(t.accessibility_features=!0),t.toggle_custom_story_item&&(d=e.params.templates.location+e.params.templates.html.custom_story_item_popup),e.params.pip&&(t.pip=!0),"review"==t.feed_type&&(t.view_class="is-article-view",t.original.rating.star_rating.value&&(t.has_star_rating=!0,t.full_star_count=Math.floor(t.original.rating.star_rating.value),t.half_star_count=t.original.rating.star_rating.value-t.full_star_count>0?1:0,t.empty_star_count=5-(t.full_star_count+t.half_star_count)),t.url&&(t.body=t.original.preview)),t.us_date_format=!!e.params.us_date_format&&e.params.us_date_format,t.has_tab_arrows=window.innerWidth>=p,t.is_fullscreen=e.params.fullscreen_expanded_view,t.hide_dates=!!e.params.hide_dates&&e.params.hide_dates,t.hide_author_links=!!e.params.hide_author_links&&e.params.hide_author_links,t.expanded_item_url=window.location.origin+window.location.pathname+t.deeplink_url,t.twitter_share_url="https://twitter.com/intent/tweet?url="+encodeURIComponent(t.expanded_item_url)+"&text=",t.facebook_share_url="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.expanded_item_url),t.linkedin_share_url="http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(t.expanded_item_url)+"&title=",t.pinterest_share_url="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(t.expanded_item_url)+"&media=&description=",t.show_expanded_credit=!!(null===(n=e.params)||void 0===n||null===(o=n.storystream_credit)||void 0===o||null===(l=o.expanded)||void 0===l?void 0:l.enabled)&&e.params.storystream_credit.expanded.enabled;var g=e.panes.currentlyVisibleItems.findIndex((function(e){return e.content_item_id===t.content_item_id})),v=e.panes.offScreenItems.findIndex((function(e){return e.content_item_id===t.content_item_id}));t.index=-1!==g?g+1:e.panes.currentlyVisibleItems.length+v+1,t.total_item_count=e.panes.itemsRendered,s&&(t.callback=s),e.renderer.compile({template:d,item:t,callback:f})}};a.showItem=m;var f=function(r){if(!r.error){if(expandedItem=r.params.item.content_item_id,STRY.util.cleanseChildElements(r),e.params.use_expanded_view&&t.querySelector(".stry-focus-trap")?t.insertBefore(r.el,t.querySelector(".stry-focus-trap")):t.appendChild(r.el),(window.innerWidth>p||"live-video"==e.params.type)&&(t.style.display="block"),r.params.item.popup_position?function(t,a){var r;switch(t){case"left-side":if(e.params.use_expanded_view)a.classList.add(t),a.style.transform="translateX(-100%)",a.style.visibility="hidden";else{var s=a.querySelector(".stry-popup-item").offsetWidth;r=window.innerWidth>900?window.innerWidth-(window.innerWidth-s)/2-30+"px":"100%",a.classList.add(t),a.style.transform="translateX(-"+r+")"}break;case"right-side":if(e.params.use_expanded_view)a.classList.add(t),a.style.transform="translateX(100%)",a.style.visibility="hidden";else{var i=a.querySelector(".stry-popup-item").offsetWidth;r=window.innerWidth>900?window.innerWidth-(window.innerWidth-i)/2-30+"px":"100%",a.classList.add(t),a.style.transform="translateX("+r+")"}break;default:a.style.transform="translateX("+100*t+"%)",a.style.position="absolute",a.style.overflow="hidden"}}(r.params.item.popup_position,r.el):l=r.params.item.content_item_id,e.el.querySelector("."+STRY.resources.class_image_carousel))for(var s=e.el.querySelectorAll("."+STRY.resources.class_image_carousel).length;s--;)e.carouselItems.push(new STRY.mediaCarousel(e.el.querySelectorAll("."+STRY.resources.class_image_carousel)[s],{transition:"fade",time:5e3}));if(e.params.use_expanded_view&&r.el.querySelector(".stry-expanded-item-carousel")){var i=r.el.querySelector(".stry-expanded-item-carousel"),n=i.querySelectorAll(".stry-expanded-item-carousel-item"),d=r.el.querySelectorAll(".stry-expanded-item-carousel-paginator-item");n.forEach((function(e,t){new window.IntersectionObserver((function(a){if(_slicedToArray(a,1)[0].isIntersecting){d[t].classList.add("active");var r=e.querySelector("video");r&&(r.controls=!0)}else{d[t].classList.remove("active");var s=e.querySelector("video");s&&(s.controls=!1)}}),{root:i,threshold:.6}).observe(e)})),d.forEach((function(e,t){e.addEventListener("click",(function(){n[t].scrollIntoView({behavior:"smooth",block:"center"})}))}))}e.params.use_expanded_view||r.el&&r.params.item.visual_smartgoals&&r.params.item.visual_smartgoals.length&&"live-video"!==e.params.type&&o.push(new STRY.VisualSmartgoals(e,r.el,r.params.item));var c=r.el.querySelector(".stry-main-image");c?STRY.util.addLoadEvent(c,(function(){h(r.el)})):h(r.el);var u=r.el.querySelectorAll("video");u.length&&("right-side"==r.params.item.popup_position||"left-side"==r.params.item.popup_position||window.innerWidth<=p)&&u.forEach((function(e){e.controls=!1})),r.params.item.popup_position||(r.params.isCurrentItem=!0,window.innerWidth>p&&r.el.classList.add("active")),window.innerWidth<=p&&STRY.util.transmit(e,"popupHasOpened",{target:e.el.querySelector("."+STRY.resources.class_popup),data:r.params.item}),setTimeout((function(){STRY.facebook.applyXFBMLreparse(e.el.querySelector(".stry-popup"))}),100),r.params.item.callback&&r.params.item.callback(),a.popupsRendered+=1,a.popupsRendered==a.popupsToRender&&(window.innerWidth<=p?S():window.innerWidth>p&&e.params.use_expanded_view&&w(),setTimeout((function(){e.smartGoalHandler.toggleVisualSmartgoals(),e.smartGoalHandler.popupOpen=!0}),300))}},h=function(e){var t=e.querySelector(".stry-popup-item");t&&t.offsetHeight+160<window.innerHeight&&e.classList.add("is-vertically-centered")},y=function(e){for(var t=[],a=0;a<e.length;a+=3)t.push(e.slice(a,a+3));for(a=0;a<t.length;a++)if(a%2==0){var r=t[a].shift();t[a].push(r)}return[].concat.apply([],t)},_=function(){e.params.pip_enabled||(r.style.overflow="hidden"),"1907"==e.params.api.story_id||e.params.pip_enabled||(i.style.overflow="hidden")},g=function(){e.params.pip_enabled||(r.style.overflow=s),"1907"==e.params.api.story_id||e.params.pip_enabled||(i.style.overflow=n)},v=function(a){var r,s,i;e.params.fullscreen_expanded_view||(e.renderer.compile({template:'<button class="stry-tab-button next" tabindex="0" data-stry-action="tab.right" aria-label="Next Content Item slide"></button>',callback:function(e){e.el&&t.prepend(e.el)}}),e.renderer.compile({template:'<button class="stry-tab-button previous" tabindex="0" data-stry-action="tab.left" aria-label="Previous Content Item slide"></button>',callback:function(e){e.el&&t.prepend(e.el)}}),(null===(r=e.params)||void 0===r||null===(s=r.storystream_credit)||void 0===s||null===(i=s.expanded)||void 0===i?void 0:i.enabled)&&e.renderer.compile({template:'<a class="stry-expanded-item-credit stry-fixed-credit" href="https://storystream.ai/" target="_blank">\n                    <div class="stry-expanded-item-credit-text light">Powered by</div>\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n                        <path d="M0 0V24H24V0H0ZM15.1795 15.626C14.9893 16.013 14.7191 16.3563 14.3862 16.6336C14.0357 16.9282 13.6349 17.159 13.2027 17.3152C12.7367 17.4822 12.2448 17.5682 11.7491 17.5692C11.2726 17.5662 10.7975 17.5194 10.3298 17.4295C9.8112 17.3295 9.30811 17.1629 8.83325 16.9342L9.30921 15.0545C9.67563 15.2646 10.0695 15.4242 10.4798 15.5287C10.8774 15.6319 11.2865 15.6859 11.6976 15.6895C12.1712 15.7291 12.6423 15.5882 13.014 15.2958C13.1426 15.1931 13.2474 15.0644 13.3214 14.9184C13.3953 14.7723 13.4368 14.6123 13.4428 14.4491C13.4441 14.2805 13.4105 14.1134 13.3442 13.958C13.2696 13.7988 13.1648 13.6551 13.0355 13.5347C12.8718 13.378 12.6905 13.2402 12.4952 13.124C12.2851 12.9885 12.0278 12.8488 11.7276 12.7007C11.3815 12.5268 11.0451 12.3346 10.72 12.1249C10.4057 11.9299 10.1176 11.6966 9.86236 11.4306C9.6319 11.1813 9.44628 10.8949 9.3135 10.5839C9.17768 10.2356 9.11072 9.8648 9.11625 9.49162C9.10835 9.01575 9.22976 8.54648 9.46787 8.13265C9.69625 7.72798 10.0108 7.377 10.3898 7.1039C10.7438 6.84908 11.1487 6.67158 11.5776 6.58317C12.015 6.4847 12.4625 6.4364 12.9111 6.43923C13.2683 6.43819 13.6251 6.46224 13.9788 6.5112C14.3347 6.55777 14.6863 6.62127 15.0251 6.69748L14.6949 8.51367C14.4025 8.43453 14.1043 8.37792 13.803 8.34433C13.519 8.30378 13.2324 8.28256 12.9454 8.28083C12.5022 8.2685 12.0621 8.35685 11.659 8.53907C11.4955 8.6052 11.3566 8.71959 11.2615 8.86661C11.1663 9.01362 11.1194 9.18608 11.1273 9.36038C11.121 9.51581 11.1549 9.67027 11.2259 9.80914C11.3002 9.94556 11.4007 10.0664 11.5218 10.1648C11.6783 10.3006 11.8478 10.4211 12.0278 10.5246C12.2293 10.6431 12.4566 10.7702 12.761 10.9141C13.1384 11.1088 13.49 11.312 13.8202 11.5153C14.1369 11.7135 14.4253 11.9527 14.6778 12.2265C15.2169 12.8201 15.5014 13.5973 15.471 14.3941C15.4716 14.8215 15.3718 15.2432 15.1795 15.626Z" fill="black"/>\n                    </svg>\n                </a>',callback:function(e){e.el&&t.prepend(e.el)}}));e.renderer.compile({template:'<button class="toggle-hotspot-labels-button inactive" role="button" data-stry-action="toggleHotspotLabels" aria-label="Toggle hotspot labels"></button>',callback:function(e){e.el&&(a?(e.el.style.display="block",e.el.tabIndex=0):(e.el.style.display="none",e.el.tabIndex=-1),t.prepend(e.el))}}),e.params.picture_in_picture&&e.renderer.compile({template:'<button class="stry-pip-button" tabindex="0" role="button" data-stry-action="collapseToPip" data-stry-hash="{{=it.root_url}}" aria-label="Toggle Picture in Picture"></button>',item:{localisation:e.language?e.language.strings:e.params.language.strings,root_url:e.url_prefix},callback:function(e){e.el&&t.prepend(e.el)}}),e.renderer.compile({template:'<button class="stry-close-button" tabindex="0" role="button" title="{{=it.localisation.popup_close}}" data-stry-action="popupClose" data-stry-hash="{{=it.root_url}}" data-stry-link="{{=it.root_url}}" aria-label="Close popup"></button>',item:{localisation:e.language?e.language.strings:e.params.language.strings,root_url:e.url_prefix},callback:function(e){e.el&&t.prepend(e.el)}}),e.renderer.compile({template:'<div class="stry-focus-trap" tabindex="0" aria-hidden="true" onfocus="this.closest(\'.stry-popup\').querySelector(\'.stry-close-button\').focus()"></div>',callback:function(e){e.el&&t.appendChild(e.el)}})};a.resetOverflowsOnPopup=function(){r.style.overflow=s,i.style.overflow=n},a.setOverflowsOnPopup=_,a.setOverflowsOnPopupClose=g;var b=window.innerWidth;a.onResize=function(){var e=window.innerWidth;if(e>p&&b<=p||e<=p&&b>p){var t=document.createElement("div");t.setAttribute("data-stry-hash","#!/"),a.closePopup(t)}b=e};var w=function(){var a=t.querySelector(".stry-expanded-item-wrapper.active .stry-expanded-item-autoplayable-video");if(a){e.params.picture_in_picture&&e.pipPlayer&&e.pipPlayer.syncExpandedViewVideo(a);var r=a.play();void 0!==r&&r.catch((function(e){a.muted=!0,a.play()}))}},S=function(){var t=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting){if(t.target.classList.add("active"),e.params.use_expanded_view){var a=t.target.querySelector(".stry-expanded-item-autoplayable-video");if(a){e.params.picture_in_picture&&e.pipPlayer&&e.pipPlayer.syncExpandedViewVideo(a),a.controls=!0;var r=a.play();void 0!==r&&r.catch((function(e){a.muted=!0,a.play()}))}t.target.querySelector(".stry-expanded-item-hotspot")?(e.el.querySelector(".toggle-hotspot-labels-button").style.display="block",e.el.querySelector(".toggle-hotspot-labels-button").tabIndex=0):(e.el.querySelector(".toggle-hotspot-labels-button").style.display="none",e.el.querySelector(".toggle-hotspot-labels-button").tabIndex=-1)}}else{t.target.classList.remove("active");var s=t.target.querySelector(".stry-expanded-item-autoplayable-video");s&&(s.controls=!1)}}))}),{threshold:1});e.el.querySelectorAll(".stry-popup-outer").forEach((function(e){t.observe(e)}))};!function(){e.params.hasDeeplink&&(STRY.hasOwnProperty("popupHashChangeListeners")||(STRY.popupHashChangeListeners={}),STRY.popupHashChangeListeners[e.params.api.app_id]=d.bind(this),window.addEventListener("hashchange",STRY.popupHashChangeListeners[e.params.api.app_id]),e.addEventListener("onItemRenderingComplete",d)),e.addEventListener("onItemLoadingComplete",u)}()}function panes(e){if(!(this instanceof panes))return new panes(e||{});this.isAnimating=!1,this.panesToAnimate=[],this.currentPaneIndex=0,this.itemsRendered=0,this.paneInterval=null,this.currentlyVisibleItems=[],this.currentlyVisibleItemEls=[],this.offScreenItems=[],this.currentInterval=e.params.transition_interval,this.itemTemplateLoaded=!1;var t=this;t.renderItemsIntoPanes=function(a,r,i){t.itemTemplateLoaded?s(a,r,i):e.renderer.prefetchTemplate({template:e.params.templates.location+e.params.templates.html.item},(function(){t.itemTemplateLoaded=!0,s(a,r,i)}))},t.startAnimatingPanes=function(){t.isAnimating=!0,e.layout.panes.forEach((function(e){e.items.length>1&&(t.panesToAnimate.push(e),i(e))})),t.panesToAnimate.length&&p()},t.stopAnimatingPanes=function(){t.isAnimating=!1,clearInterval(t.paneInterval)},t.resetAnimatingPanes=function(){t.currentPaneIndex=0,t.panesToAnimate=[],e.layout.panes.forEach((function(e){e.currentItem=0}))},t.willHydrateSmartGoalUTM=function(t){return t.forEach((function(t){if("smart-goal"==t.type){var a=new URL(t.data.url),r=a.search?a.search.substr(1).split("&"):[],s=r.map((function(e){return e.split("=")[0]}));Object.keys(e.params.smartgoal_utm_parameters).forEach((function(t){-1==s.indexOf(t)&&(r.push(encodeURIComponent(t)+"="+encodeURIComponent(e.params.smartgoal_utm_parameters[t])),s.push(t))})),a.search=r.join("&"),t.data.url=a.href}})),t},t.willAddDeeplinkingAndRootUrl=function(t){if(e.url_prefix=STRY.util.getUrlPrefix(),e.url_prefix&&e.url_prefix.length){var a=e.url_prefix.substr(e.url_prefix.length-1),r=void 0!==t.id?t.id:t.content_block_id;"live-video"==e.params.type&&(r=e.params.api.app_id,t.slug_name="event");var s="id:"+r+"/"+t.slug_name+"/";t.deeplink_url="/"!==a?e.url_prefix+"/"+s:e.url_prefix+s,t.root_url=e.url_prefix}return t},t.getCurrentlyVisibleAndOffScreenItems=function(){t.currentlyVisibleItems=[],t.currentlyVisibleItemEls=[],t.offScreenItems=[],e.layout.panes.forEach((function(e){for(var a=0;a<e.items.length;a++)a==e.currentItem?(t.currentlyVisibleItems.push(e.items[a].item_data),t.currentlyVisibleItemEls.push(e.items[a].el)):t.offScreenItems.push(e.items[a].item_data)}))},t.renderEmptyMessageForBuilder=function(){STRY.util.clearHTML(e.el),e.el.style.opacity=1,e.el.classList.add("stry-no-content"),e.renderer.compile({template:'<div class="stry-no-content-message"><p>Insufficient content available to generate a preview.</p><p>This Storyboard will currently not display when embedded on a page.</p><p>Please publish more content, or choose a new Stream.</p></div>',callback:function(t){t.el&&e.el.appendChild(t.el)}})};var a=function(a,r){if(t.willAddDeeplinkingAndRootUrl(a),a.smart_goals_enabled=r.el.classList.contains("stry-pane"),a.tags.length){if(e.params.show_grid_brand_messages){var s=a.tags.map((function(e){return e.type})).indexOf("brand-message");a.brand_message=-1!==s&&a.tags[s].data.message}if("news-hub"==e.params.type){var i=a.tags.map((function(e){return e.type})).indexOf("category");a.category=-1!==i&&a.tags[i]}e.params.smartgoal_utm_parameters&&(a.tags=t.willHydrateSmartGoalUTM(a.tags))}a.excerpt=!(!a.original||!a.original.preview)&&a.original.preview,!a.excerpt&&"Facebook"==a.feed_type||!a.excerpt&&a.feed_type.indexOf("instagram")>-1?a.excerpt=STRY.util.truncate(a.body,300):a.excerpt||a.feed_class.startsWith("twitter")||(a.excerpt=a.title),a.excerpt||(a.excerpt=STRY.util.truncate(a.body,300)),a.excerpt&&(a.excerpt=STRY.util.truncate(a.excerpt,120)),"review"==a.feed_type&&a.original.rating.star_rating.value&&(a.has_star_rating=!0,a.full_star_count=Math.floor(a.original.rating.star_rating.value),a.half_star_count=a.original.rating.star_rating.value-a.full_star_count>0?1:0,a.empty_star_count=5-(a.full_star_count+a.half_star_count)),a.smartgoals_same_window=e.params.smartgoals_same_window,a.is_lookbook=e.params.lookbook,a.is_carousel="carousel"==e.params.type,a.no_cookies=!(!e.params.cookie_killswitch&&!e.params.no_base_cookies),a.sequential_video_playback=!!e.params.sequential_video_playback;var n=e.language?e.language:e.params.language;return n&&(a.localisation=n.strings),a.is_custom_image="image"==a.feed_class,a.visual_smartgoals=!!a.tags.length&&e.smartGoalHandler.willCollectVisualSmartgoalsCount(a.tags),a.smartgoal_adobe_attribute_value=!!e.params.smartgoal_adobe_attribute_value&&e.params.smartgoal_adobe_attribute_value,a.us_date_format=!!e.params.us_date_format&&e.params.us_date_format,e.params.accessibility_features&&(a.accessibility_features=!0),e.params.prevent_autoplay_video&&(a.prevent_autoplay_video=!0),a.block_videos_until_seen=!!e.params.block_videos_until_seen&&e.params.block_videos_until_seen,a.hide_dates=!!e.params.hide_dates&&e.params.hide_dates,a.hide_author_links=!!e.params.hide_author_links&&e.params.hide_author_links,e.params.pane_width&&"carousel"==e.params.type&&(a.images[0].preview="https://du66ttpehq3tn.cloudfront.net/h_284,w_"+e.params.pane_width+",c_fill,g_auto:car/"+a.images[0].original),e.params.sequential_video_playback&&e.params.shoppable_video&&(a.has_video_poster=!0),a},r=function(a,r,s,i,n,l){e.renderer.compile({template:e.params.templates.location+e.params.templates.html.item,item:a,itemIndex:r,paneIndex:s,callback:function(a){if(!a.error){if(a.params.paneIndex==a.params.itemIndex&&a.el.classList.add("active"),STRY.util.cleanseChildElements(a),!e.params.pipOnly)try{n[a.params.paneIndex].el.appendChild(a.el)}catch(e){n[a.params.paneIndex].el.htmlContent(a.html)}if(n[a.params.paneIndex].items.push({el:a.el,index:a.params.itemIndex,item_data:a.params.item}),e.params.show_smartgoal_hotspots_inline){var r=n[a.params.paneIndex].items.length-1,s=e.smartGoalHandler.willCollectVisualSmartgoalsWithHotspot(a.params.item.tags);s.length>0&&0==a.params.item.videos.length&&a.params.item.images&&1==a.params.item.images.length&&!n[a.params.paneIndex].el.classList.contains("stry-small-pane")&&(n[a.params.paneIndex].items[r].hotspotHandler=STRY.inlineHotspots(e,n[a.params.paneIndex].items[r],s))}n[a.params.paneIndex].currentItem=0,t.itemsRendered+=1,t.itemsRendered==i.length&&o(n,l)}}})},s=function(e,s,i){var n=0;t.itemsRendered=0;for(var o=0;o<e.length;o++)e[o]=a(e[o],s[n]),r(e[o],o,n,e,s,i),++n==s.length&&(n=0)},i=function(e){e.el.onmouseenter=function(){e.isHovered=!0},e.el.onmouseleave=function(){e.isHovered=!1}},n=function(e,t){return e.index-t.index},o=function(t,a){l(t),a(t),e.smartgoalHandler.willConfigureSmartGoalHeights({is_hub:"masonry"==e.params.type||"carousel"==e.params.type}),STRY.util.transmit(e,"onItemRenderingComplete",{}),e.pipPlayer&&e.pipPlayer.onPanesRendered(t)},l=function(e){e.forEach((function(e){e.items.sort(n)}))},p=function(){t.paneInterval=setInterval((function(){var a;t.panesToAnimate[t.currentPaneIndex].isHovered||((a=t.panesToAnimate[t.currentPaneIndex]).items[a.currentItem].el.classList.remove("active"),d(a.items[a.currentItem].el),a.currentItem=a.currentItem<a.items.length-1?a.currentItem+1:0,a.items[a.currentItem].el.classList.add("active"),c(a.items[a.currentItem].el),u(a.items[a.currentItem].el),e.params.no_promoted_panes&&0!=e.params.no_promoted_panes||(setTimeout((function(){a.items[a.currentItem].el.classList.add("promoted")}),750),setTimeout((function(){a.items[a.currentItem].el.classList.remove("promoted")}),3750))),t.currentPaneIndex=t.currentPaneIndex<t.panesToAnimate.length-1?t.currentPaneIndex+1:0}),t.currentInterval)},d=function(e){var t=e.querySelector("video");t&&!t.paused&&t.pause()},c=function(e){var t=e.querySelector("video");t&&!t.src&&t.dataset.src&&(t.src=t.dataset.src)},u=function(t){if(!e.params.prevent_autoplay_video&&!e.params.sequential_video_playback){var a=t.querySelector("video");a&&a.play()}}}function carousel(e){if(!(this instanceof carousel))return new carousel(e||{});this.wrapper=e.el,e.params.lookbook&&e.el.classList.add("stry-lookbook");var t=document.createElement("div");t.id="stry-carousel-outer",this.wrapper.appendChild(t),this.carouselOuter=t;var a=document.createElement("div");a.id="stry-carousel",a.setAttribute("tabindex","-1"),this.carouselOuter.appendChild(a),this.carousel=a;var r=document.createElement("div");r.id="stry-carousel-content-wrapper",this.carousel.appendChild(r),this.carouselContentWrapper=r,this.gutter=e.params.gutter?e.params.gutter:16,this.itemWidth=e.params.pane_width?e.params.pane_width:284,this.carouselContentWrapper.style.gap=this.gutter+"px",this.currentBreakpoint=null,this.currentMinimumContent=0,this.panes=[],this.supportsNativeSmoothScroll="scrollBehavior"in document.documentElement.style,this.isEdge=navigator.appVersion.indexOf("Edg")>-1,this.isLoadingContent=!1,this.isTransitioning=!1,this.isInView=!0,this.fallback_item=null;var s=this,i=!1,n=[];s.resumeSequentialVideoPlayback=function(e){k(e)},s.resetLayout=function(){s.wrapper.classList.remove("mobile-snap"),s.wrapper.classList.remove("even-snap"),s.wrapper.classList.remove("odd-snap"),s.wrapper.classList.remove("small-snap-items"),e.el.querySelectorAll(".stry-item").forEach((function(e){e.classList.contains("stry-loaded")&&e.classList.remove("stry-loaded")})),s.panes=[],e.items=[],s.isLoadingContent=!0,p(),setTimeout((function(){STRY.util.clearHTML(s.carouselContentWrapper),"styles-v2.css"==e.params.templates.stylesheet?s.carouselContentWrapper.style.width=s.itemWidth*e.params.limit+s.gutter*(e.params.limit-1)+"px":s.carouselContentWrapper.style.width=300*e.params.limit+"px",s.isLoadingContent=!1,g()}),600)};var o=function(t){var a;return a=e.params.use_container_breakpoints?t.findIndex((function(e){return e.width>function e(t){return t.clientWidth>0?t.clientWidth:e(t.parentElement)}(s.wrapper)})):t.findIndex((function(e){return e.width>window.innerWidth})),s.currentBreakpoint=-1!=a?t[a]:t[t.length-1],s.currentMinimumContent=s.currentBreakpoint.minimum_limit?s.currentBreakpoint.minimum_limit:null,s.currentBreakpoint},l=function(t){s.panes=[],(t=t||o(e.params.breakpoints)).mobile_snap&&(s.wrapper.classList.add("mobile-snap"),t.columns%2?s.wrapper.classList.add("odd-snap"):s.wrapper.classList.add("even-snap"),t.mobile_snap_item_size&&s.wrapper.classList.add(t.mobile_snap_item_size+"-snap-items")),e.params.fixed_mode&&s.wrapper.classList.add("stry-fixed-mode"),e.params.carousel_button_position&&s.wrapper.classList.add("stry-carousel-buttons-"+e.params.carousel_button_position);for(var a=0;a<e.items.length;a++){var r=document.createElement("div");r.classList.add("stry-pane"),r.id="pane-"+a,e.params.pane_width&&(r.style.width=e.params.pane_width+"px"),e.params.pipOnly||s.carouselContentWrapper.appendChild(r),s.panes.push({el:r,items:[]})}var i=e.items.length<=t.columns?e.items.length:t.columns;t.mobile_snap?"small"==t.mobile_snap_item_size?(s.carouselContentWrapper.style.width=260*e.items.length+"px",s.carousel.style.width=300*i+"px"):(s.carouselContentWrapper.style.width=300*e.items.length+"px",s.carousel.style.width=340*i+"px"):("styles-v2.css"==e.params.templates.stylesheet?s.carouselContentWrapper.style.width=s.itemWidth*e.items.length+s.gutter*(e.items.length-1)+"px":s.carouselContentWrapper.style.width=300*e.items.length+"px",e.params.fixed_mode?s.carousel.style.maxWidth=s.itemWidth*t.columns+s.gutter*(t.columns-1)+"px":"styles-v2.css"==e.params.templates.stylesheet?s.carousel.style.width=s.itemWidth*i+s.gutter*(i-1)+"px":s.carousel.style.width=300*i+"px")},p=function(){s.leftButton.classList.add("inactive"),s.leftButton.setAttribute("tabindex","-1"),s.rightButton.classList.add("inactive"),s.rightButton.setAttribute("tabindex","-1"),s.leftButton.classList.remove("active"),s.rightButton.classList.remove("active")},d=function(){s.leftButton=document.createElement("div"),s.leftButton.id="stry-hub-carousel-left",s.leftButton.setAttribute("role","button"),s.leftButton.setAttribute("tabindex","0"),s.leftButton.setAttribute("aria-label","Move Carousel to next item"),s.leftButton.classList.add("stry-hub-carousel-button"),s.rightButton=document.createElement("div"),s.rightButton.id="stry-hub-carousel-right",s.rightButton.setAttribute("role","button"),s.rightButton.setAttribute("tabindex","0"),s.rightButton.setAttribute("aria-label","Move Carousel to previous item"),s.rightButton.classList.add("stry-hub-carousel-button"),s.moveRight=u,s.moveLeft=c,s.rightButton.onclick=u,s.leftButton.onclick=c;var t=document.createElement("div"),a=document.createElement("div");if(t.classList.add("stry-line-arrow"),a.classList.add("stry-line-arrow"),s.leftButton.appendChild(t),s.rightButton.appendChild(a),!e.params.pipOnly)if("header"==e.params.carousel_button_position){s.buttonWrapper=document.createElement("div"),s.buttonWrapper.classList.add("stry-carousel-button-wrapper");var r=o(e.params.breakpoints).columns;s.buttonWrapper.style.maxWidth=s.itemWidth*r+s.gutter*(r-1)+"px",s.buttonWrapper.appendChild(s.leftButton),s.buttonWrapper.appendChild(s.rightButton),s.wrapper.insertBefore(s.buttonWrapper,s.carouselOuter)}else s.carouselOuter.prepend(s.rightButton),s.carouselOuter.prepend(s.leftButton)},c=function(){if(!s.isTransitioning){if(s.isTransitioning=!0,!e.params.fixed_mode){var t=s.carouselContentWrapper.lastChild;s.carouselContentWrapper.removeChild(t),s.carouselContentWrapper.prepend(t),w(t),s.carousel.scrollLeft=s.panes[0].el.offsetWidth}if(s.supportsNativeSmoothScroll&&!s.isEdge){var a=s.carousel.scrollLeft-s.panes[0].el.offsetWidth;"styles-v2.css"==e.params.templates.stylesheet&&(a=s.carousel.scrollLeft-s.panes[0].el.offsetWidth-s.gutter),s.carousel.scroll({top:0,left:a,behavior:"smooth"})}else f(s.carousel,300,-s.panes[0].el.offsetWidth,s.carousel.scrollLeft);if(!e.params.fixed_mode){var r=document.querySelectorAll(".stry-item")[0];b(r)}setTimeout((function(){s.isTransitioning=!1}),300)}},u=function(){if(!s.isTransitioning){if(s.isTransitioning=!0,s.supportsNativeSmoothScroll&&!s.isEdge){var t=s.carousel.scrollLeft+s.panes[0].el.offsetWidth;"styles-v2.css"==e.params.templates.stylesheet&&(t=s.carousel.scrollLeft+s.panes[0].el.offsetWidth+s.gutter),s.carousel.scroll({top:0,left:t,behavior:"smooth"})}else f(s.carousel,300,s.panes[0].el.offsetWidth,s.carousel.scrollLeft);if(e.params.fixed_mode)setTimeout((function(){s.isTransitioning=!1}),300);else{var a=o(e.params.breakpoints).columns,r=document.querySelectorAll(".stry-item")[a];b(r),setTimeout((function(){var e=s.carouselContentWrapper.firstChild;s.carouselContentWrapper.removeChild(e),s.carousel.scrollLeft=0,s.carouselContentWrapper.appendChild(e),w(e),s.isTransitioning=!1}),300)}}},m=function(){e.layout.wrapper.classList.contains("stry-is-popup")&&e.popup.onResize(),s.currentBreakpoint&&s.currentBreakpoint.columns!==o(e.params.breakpoints).columns&&(STRY.util.clearHTML(s.carouselContentWrapper),s.wrapper.classList.remove("mobile-snap"),s.wrapper.classList.remove("even-snap"),s.wrapper.classList.remove("odd-snap"),s.wrapper.classList.remove("small-snap-items"),p(),g()),e.inlineProductTray&&window.innerWidth>1024&&e.inlineProductTray.onClose()},f=function(e,t,a,r){for(var s=a/100,i=0,n=0;i<=t;)window.setTimeout(h,i,e,n,s,r),i+=t/100,n++};function h(e,t,a,r){e.scrollLeft=a*t+r}var y=function(){_()},_=function(){var t=i?0:600,a=i?0:900,r=e.el.querySelectorAll(".stry-item");if(e.params.kenfits&&e.kenfitsHandler.applyToAll(e.el.querySelectorAll(".stry-item .stry-image")),r.forEach((function(e){e.classList.contains("stry-loaded")||setTimeout((function(){e.classList.add("stry-loaded")}),t)})),setTimeout((function(){e.el.style.opacity="1",L()}),t),setTimeout((function(){STRY.util.transmit(e,"storyboardRendered",{})}),a),s.currentBreakpoint.columns<e.items.length&&!s.currentBreakpoint.mobile_snap&&(e.params.fixed_mode||s.leftButton.classList.remove("inactive"),s.rightButton.classList.remove("inactive"),setTimeout((function(){e.params.fixed_mode||s.leftButton.classList.add("active"),s.rightButton.classList.add("active")}),600),e.params.fixed_mode&&(s.carousel.onscrollend=function(){0==s.carousel.scrollLeft?s.leftButton.classList.remove("active"):s.leftButton.classList.add("active"),s.carousel.scrollLeft+s.carousel.clientWidth==s.carousel.scrollWidth?s.rightButton.classList.remove("active"):s.rightButton.classList.add("active")})),!i&&s.isInView&&e.el.getElementsByClassName("stry-item-hover")[0].focus(),e.params.fixed_mode){var o=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting)if(e.params.sequential_video_playback){var a=t.target.querySelector("video[data-src]");a&&(a.src||(a.src=a.dataset.src),function(t){n.push(t);var a=(n=n.sort((function(e,t){var a=e.compareDocumentPosition(t);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:void 0}))).every((function(e){return e.querySelector("video").paused})),r=e.pipPlayer&&e.pipPlayer.isOpen;a&&!r&&k()}(t.target))}else b(t.target);else e.params.sequential_video_playback?function(e){n=n.filter((function(t){return t.getAttribute("data-stry-block")!==e.getAttribute("data-stry-block")}));var t=e.querySelector("video[data-src]");t&&!t.paused&&isFinite(t.duration)&&(t.currentTime=t.duration)}(t.target):w(t.target)}))}),{threshold:.5});r.forEach((function(e){o.observe(e)}))}},g=function(t){i=t&&!e.items.length;var a=t&&t.detail.filters&&e.params.filters;if(!e.params.previewMode)if(a&&STRY.util.transmit(e,"filtersReady",{}),i&&(e.items=t.detail.data),e.params.experience_builder_preview_mode&&0==e.items.length)e.panes.renderEmptyMessageForBuilder();else if(!s.isLoadingContent){var r=o(e.params.breakpoints);if((s.currentMinimumContent&&e.items.length<s.currentMinimumContent||!e.items.length)&&!s.fallback_item){if(e.params.fallback_channel_id&&(e.items.length||e.params.fallback_always)){return void e.loadFallbackContent(1)}return STRY.util.clearHTML(s.carouselContentWrapper),s.carouselContentWrapper.style.width=0,s.isLoadingContent=!1,void(e.el.style.display="none")}l(r),e.el.style.display="block",s.panes.length&&e.panes.renderItemsIntoPanes(e.items,s.panes,y)}},v=function(t){!e.items.length&&e.params.fallback_always&&(e.items=t.detail.data),s.fallback_item=t.detail.data[0],STRY.util.clearHTML(s.carouselContentWrapper),l(),s.panes.length&&e.panes.renderItemsIntoPanes(e.items,s.panes,y)},b=function(t){var a=t.querySelector("video[data-src]");a&&!a.src&&(a.src=a.dataset.src),e.params.prevent_autoplay_video||a&&a.paused&&!e.params.sequential_video_playback&&a.play()},w=function(e){var t=e.querySelector("video");t&&!t.paused&&t.pause()},S=function(t){var a=s.wrapper.getBoundingClientRect(),r=a.top,i=a.bottom,n=s.isInView;if(s.isInView=r<window.innerHeight-50&&i>=50,n!==s.isInView||t){if(s.isInView)return STRY.util.transmit(e,"carouselInView",{}),!0;STRY.util.transmit(e,"carouselOutOfView",{})}return!1},L=function(){var t=e.el.getElementsByClassName("stry-wrapper-header")[0];t&&t.querySelectorAll("#stry-hub-carousel-left").length>0&&t.querySelectorAll("#stry-hub-carousel-right").length>0&&s.currentBreakpoint.columns<e.items.length&&!s.currentBreakpoint.mobile_snap&&(t.querySelectorAll("#stry-hub-carousel-left")[0].classList.add("active"),t.querySelectorAll("#stry-hub-carousel-right")[0].classList.add("active"))},k=function t(a){a||(a=n[0]),a.querySelector("video").addEventListener("ended",(function(){videoRefIndex=n.indexOf(a);var e=a.querySelector(".stry-video-poster");e&&e.classList.add("active"),videoRefIndex<n.length?t(n[videoRefIndex+1]):t()}),{once:!0}),e.el.querySelectorAll(".stry-item").forEach((function(e){e.querySelectorAll(".stry-video-icon").forEach((function(e){e.style.display="block"}))}));var r=a.querySelector(".stry-video-poster");r&&r.classList.remove("active"),a.querySelector("video").play(),a.querySelectorAll(".stry-video-icon").forEach((function(e){e.style.display="none"}))};!function(){d(),window.onresize=m,e.addEventListener("onLoadingComplete",g),e.addEventListener("onFallbackLoadingComplete",v),e.addEventListener("carouselInView",(function(){e.el.classList.contains("stry-app-viewed")&&(e.el.classList.add("stry-inline-hotspots-promoted"),setTimeout((function(){e.el.classList.remove("stry-inline-hotspots-promoted")}),1500))})),STRY.hasOwnProperty("layoutVisibilityListeners")||(STRY.layoutVisibilityListeners={}),STRY.layoutVisibilityListeners[e.params.api.app_id]=STRY.util.debounce((function(){S(!1)}),200,!1).bind(this),window.addEventListener("scroll",STRY.layoutVisibilityListeners[e.params.api.app_id],{capture:!0,passive:!0}),e.addEventListener("onViewed",(function(){e.el.classList.add("stry-app-viewed"),setTimeout((function(){e.el.classList.add("stry-visual-smartgoals-ready")}),4100),e.layout.panes.forEach((function(t){"styles-v2.css"==e.params.templates.stylesheet&&setTimeout((function(){window.innerWidth>1024?e.layout.panes.filter((function(e){return null!==e.el.querySelector(".stry-visual-smartgoal-indicator-wrapper")})).forEach((function(e,t){setTimeout((function(){e.el.querySelector(".stry-item-hover").classList.add("expanded"),setTimeout((function(){e.el.querySelector(".stry-item-hover").classList.remove("expanded")}),3e3)}),4500*t)})):e.layout.panes.filter((function(e){return null!==e.el.querySelector(".stry-visual-smartgoal-indicator-wrapper")})).forEach((function(e){e.el.querySelector(".stry-item-hover").classList.add("expanded"),setTimeout((function(){e.el.querySelector(".stry-item-hover").classList.remove("expanded")}),3e3)}))}),500),t.items.forEach((function(e){e.hasOwnProperty("hotspotHandler")&&e.hotspotHandler.animateSpots()}))})),e.params.block_videos_until_seen&&(!function(){for(var t=e.el.querySelectorAll(".stry-item"),a=o(e.params.breakpoints),r=0;r<a.columns;r++)try{var s=t[r].querySelector("video[data-src]");s&&(s.src=s.dataset.src)}catch(e){}}(),e.params.block_videos_until_seen=!1),e.params.sequential_video_playback&&n.length&&k(),setTimeout((function(){e.el.classList.add("stry-inline-hotspots-ready")}),3600)}),600),e.addEventListener("onOutOfView",(function(){e.el.querySelectorAll("video[src]").forEach((function(e){e.paused||e.pause()}))})),e.addEventListener("onEnterView",(function(){e.params.sequential_video_playback||function(){for(var t=e.el.querySelectorAll("video[src]"),a=o(e.params.breakpoints),r=0;r<a.columns;r++)t[r]&&t[r].paused&&t[r].play()}()}))}()}STRY.popup=popup,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.popup=popup),STRY.panes=panes,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.panes=panes),STRY.carousel=carousel,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.carousel=carousel); 


STRY.app_10825 = STRY.app(STRY.config_10825);

