angular.module("appNewForm",[]).controller("NewFormController",["$scope","$http",function(e,a){if(e.pattern_email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.pattern_phone=/^([1-9]{1}[0-9]{6})$|(^[1-9]{1}[0-9]{9})$/,e.pattern_doc=/^([1-9]{1}[0-9]{4})$|(^[1-9]{1}[0-9]{5})$|(^[1-9]{1}[0-9]{6})$|(^[1-9]{1}[0-9]{7})$|(^[1-9]{1}[0-9]{8})$|(^[1-9]{1}[0-9]{9})$/,e.UtmFuente="",e.UtmMedio="",e.UtmCampana="",""!=window.location.search){var t=window.location.search.split("?")[1].split("&");if(t.length>=1){var n=t[0].split("=")[0],r=t[1].split("=")[0],o=t[2].split("=")[0];"utm_source"==n&&"utm_medium"==r&&"utm_campaign"==o&&(e.UtmFuente=t[0].split("=")[1],e.UtmMedio=t[1].split("=")[1],e.UtmCampana=t[2].split("=")[1])}}var i,m=new Date,s=m.getFullYear(),l=m.getMonth()+1,c=l+"/"+m.getDate()+"/"+s+" "+m.toLocaleTimeString("en-US",{hour12:!0});c=c.replace(".",""),e.minCapacityNumber=5,e.maxCapacitynumber=10,e.minStringCapacity=2,e.changeTypeDoc=function(){e.dataNewForm.legalDocumentNumber="",e.messValidate="","CC"==e.dataNewForm.legalDocument&&(e.minCapacityNumber=5,e.maxCapacitynumber=10),"CE"==e.dataNewForm.legalDocument&&(e.minCapacityNumber=5,e.maxCapacitynumber=10),"CD"==e.dataNewForm.legalDocument&&(e.minCapacityNumber=6,e.maxCapacitynumber=10),"PD"==e.dataNewForm.legalDocument&&(e.minCapacityNumber=8,e.maxCapacitynumber=10),"PP"==e.dataNewForm.legalDocument&&(e.minCapacityNumber=8,e.maxCapacitynumber=10)},e.messValidate="",e.messValidateTel="",e.validationMess=function(a,t,n,r,o,i){if("doc"==r){if(!0==a&&!0==t&&!0!=n.minlength&&(e.messValidate="Ingresa un n\xfamero de documento"),!0==a&&!0==t&&!0==n.minlength&&(e.messValidate="Debe contener minimo "+o+" caracteres"),!0==a&&!0==t&&!0==n.pattern){var m=i.split("")[0];0==m?e.messValidate="El n\xfamero de documento no debe empezar por 0":e.messValidate="Debe contener entre 5 y 10 d\xedgitos"}return!0==a&&!1==t&&(e.messValidate=""),e.messValidate}if("tel"==r){if(!0==a&&!0==t&&!0!=n.minlength&&(e.messValidateTel="Ingresa un n\xfamero de tel\xe9fono"),!0==a&&!0==t&&!0==n.minlength&&(e.messValidateTel="Debe contener m\xednimo 7 d\xedgitos en caso de t\xe9lefono fijo, celular 10 d\xedgitos"),!0==a&&!0==t&&!0==n.pattern){var m=i.split("")[0];0==m?e.messValidateTel="No debe empezar por 0":e.messValidateTel="Debe contener exactamente 7 o 10 d\xedgitos"}return!0==a&&!1==t&&(e.messValidateTel=""),e.messValidateTel}return"firstName"==r?(!0==a&&!0==t&&(e.messValidateName="Ingresa un nombre"),!0==a&&!0==t&&!0==n.minlength&&void 0!=n.minlength&&(e.messValidateName="El nombre debe contener como minimo 2 letras"),!0==a&&!1==t&&(e.messValidateName=""),e.messValidateName):"surname"==r?(!0==a&&!0==t&&(e.messValidatesurname="Ingresa un apellido"),!0==a&&!0==t&&!0==n.minlength&&void 0!=n.minlength&&(e.messValidatesurname="El apellido debe contener como minimo 2 letras"),!0==a&&!1==t&&(e.messValidatesurname=""),e.messValidatesurname):void 0},e.showGif=!1,e.serviceFormContact=function(){e.showGif=!0,void 0!=e.InputpolicyAcceptance?e.dataNewForm.policyAcceptance="0":e.dataNewForm.policyAcceptance="1",e.dataNewForm.city="BOGOT\xc1 D.C.",e.dataNewForm.dateCreated=c,e.dataNewForm.dateEmailSend=c,e.dataNewForm.user="3Ct0sP561020Rp",e.dataNewForm.password="{GE!/8V58%24~>v",e.dataNewForm.hostUrl="testdriveMediacom",e.dataNewForm.token=Math.random().toString(12).substring(2,23)+Math.random().toString(12).substring(2,23),e.dataNewForm.ip=ipScript,e.dataNewForm.modelsOfInterest="30",e.dataNewForm.dealerCode="999",e.dataNewForm.dealerBranchCode="1",e.dataNewForm.testDriveAcceptance="1";var a=$.param(e.dataNewForm);$.ajax({method:"POST",url:"https://prospectos.mazda.co/prospectosREST?"+a+"&type=TestDrive",headers:{Accept:"*/*","Content-Type":"application/json"},data:{},type:"json",success:function(e){"OK"==e.codigo&&(window.parent.location.href="/vehiculos/proximamente/gracias-por-tu-registro/")},error:function(e){console.log(e)}})}}]).directive("onlyLetters",[function(){return{require:"ngModel",link:function(e,a,t,n){n.$parsers.push(function e(a){var t=a.replace(/[^a-zA-ZñÑáéíóúÁÉÍÓÚ\s]/g,"");return t!==a&&(n.$setViewValue(t),n.$render()),t})}}}]).directive("onlyDigit",[function(){return{require:"ngModel",link:function(e,a,t,n){n.$parsers.push(function e(a){var t=a.replace(/\D/g,"");return t!==a&&(n.$setViewValue(t),n.$render()),t})}}}]);